{"version":3,"file":"demo.js","sources":["../lib/circle-path.ts","../lib/pixel-ratio.ts","../lib/hidpi-canvas.ts","../site/index.ts"],"sourcesContent":["export default function circle(x, y, r) {\n  // prettier-ignore\n  return (\n    \"M \" + x + \" \" + y + \" \" +\n    \"m \" + -r + \",0 \" +\n    \"a \" + r + \",\" + r + \" 0 1,0 \" + (r * 2) + \",0 \" +\n    \"a \" + r + \",\" + r + \" 0 1,0 \" + (-r * 2) +\n    \",0 Z\"\n  );\n}\n","var context = document.createElement(\"canvas\").getContext(\"2d\");\nlet devicePixelRatio = window.devicePixelRatio || 1;\nlet backingStorePixelRatio =\n  context.webkitBackingStorePixelRatio ||\n  context.mozBackingStorePixelRatio ||\n  context.msBackingStorePixelRatio ||\n  context.oBackingStorePixelRatio ||\n  context.backingStorePixelRatio ||\n  1;\n\nexport default devicePixelRatio / backingStorePixelRatio;\n","import PIXEL_RATIO from \"./pixel-ratio\";\nexport default function createHiDPICanvas(w, h, ratio) {\n  if (!ratio) {\n    ratio = PIXEL_RATIO;\n  }\n  var canvas = document.createElement(\"canvas\");\n  canvas.width = w * ratio;\n  canvas.height = h * ratio;\n  canvas.style.width = w + \"px\";\n  canvas.style.height = h + \"px\";\n  canvas.getContext(\"2d\").setTransform(ratio, 0, 0, ratio, 0, 0);\n  return canvas;\n}\n","txt.FontLoader.path = \"font/\";\n\nimport circle from \"../lib/circle-path\";\nimport createHiDPICanvas from \"../lib/hidpi-canvas\";\n\nlet pathText, text, stage;\n\nfunction init() {\n  let canvas = createHiDPICanvas(500, 300, 2);\n  canvas.style.maxWidth = \"100%\";\n  document.getElementById(\"example\").appendChild(canvas);\n  stage = new createjs.Stage(canvas);\n\n  text = new txt.Text({\n    text: \"This is TxtJS\",\n    font: \"lobster\",\n    align: txt.Align.MIDDLE_CENTER,\n    style: Array.from(Array(14).keys()).map(val => {\n      let hex = val.toString(16);\n      let unhex = (14 - val).toString(16);\n      return {\n        fillColor:\n          val % 2 == 0\n            ? \"#FF\" + hex + hex + unhex + unhex\n            : \"#\" + hex + hex + unhex + unhex + \"FF\"\n      };\n    }),\n    strokeWidth: 1,\n    strokeColor: \"#000\",\n    width: 500,\n    height: 300,\n    size: 100,\n    start: 2700,\n    x: 250,\n    y: 150,\n    debug: true\n  });\n\n  stage.addChild(text);\n\n  pathText = new txt.PathText({\n    text: \"Text on a path!\",\n    font: \"arimo\",\n    align: txt.PathAlign.Center,\n    path: circle(0, 0, 200),\n    rotation: 0,\n    initialTracking: 200,\n    width: 1000,\n    height: 600,\n    size: 50,\n    start: 2700,\n    x: 500,\n    y: 300\n  });\n\n  stage.addChild(pathText);\n\n  createjs.Ticker.on(\"tick\", tick);\n  createjs.Ticker.framerate = 30;\n}\n\nvar counter = 0;\nvar counter2 = 0;\n\nfunction tick(event) {\n  pathText.tracking = 50 + Math.sin(counter) * 200;\n  text.align =\n    Math.sin(counter) > 0 ? txt.Align.BOTTOM_RIGHT : txt.Align.TOP_LEFT;\n\n  counter = (counter + 0.05) % 7;\n  counter2 = (counter2 + 3) % 500;\n  text.width = 100 + counter2;\n  text.x = 450 - counter2 / 2;\n  pathText.font = counter > 2.5 ? \"arimo\" : \"lobster\";\n\n  pathText.rotation = pathText.rotation + (1 % 360);\n\n  text.layout();\n  pathText.layout();\n  stage.update(event);\n}\n\ndocument.onload = init();\n"],"names":["txt","FontLoader","path","pathText","text","stage","init","canvas","createHiDPICanvas","style","maxWidth","document","getElementById","appendChild","createjs","Stage","Text","font","align","Align","MIDDLE_CENTER","Array","from","keys","map","val","hex","toString","unhex","fillColor","strokeWidth","strokeColor","width","height","size","start","x","y","debug","addChild","PathText","PathAlign","Center","circle","rotation","initialTracking","Ticker","on","tick","framerate","counter","counter2","event","tracking","Math","sin","BOTTOM_RIGHT","TOP_LEFT","layout","update","onload"],"mappings":"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"}