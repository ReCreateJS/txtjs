{"version":3,"file":"demo.js","sources":["../lib/circle-path.ts","../lib/pixel-ratio.ts","../lib/hidpi-canvas.ts","../site/index.ts"],"sourcesContent":["export default function circle(x, y, r) {\n  return (\n    \"M \" +\n    x +\n    \" \" +\n    y +\n    \" \" +\n    \"m \" +\n    -r +\n    \",0 \" +\n    \"a \" +\n    r +\n    \",\" +\n    r +\n    \" 0 1,0 \" +\n    r * 2 +\n    \",0 \" +\n    \"a \" +\n    r +\n    \",\" +\n    r +\n    \" 0 1,0 \" +\n    -r * 2 +\n    \",0\"\n  );\n}\n","var context = document.createElement(\"canvas\").getContext(\"2d\");\nlet devicePixelRatio = window.devicePixelRatio || 1;\nlet backingStorePixelRatio =\n  context.webkitBackingStorePixelRatio ||\n  context.mozBackingStorePixelRatio ||\n  context.msBackingStorePixelRatio ||\n  context.oBackingStorePixelRatio ||\n  context.backingStorePixelRatio ||\n  1;\n\nexport default devicePixelRatio / backingStorePixelRatio;\n","import PIXEL_RATIO from \"./pixel-ratio\";\nexport default function createHiDPICanvas(w, h, ratio) {\n  if (!ratio) {\n    ratio = PIXEL_RATIO;\n  }\n  var canvas = document.createElement(\"canvas\");\n  canvas.width = w * ratio;\n  canvas.height = h * ratio;\n  canvas.style.width = w + \"px\";\n  canvas.style.height = h + \"px\";\n  canvas.getContext(\"2d\").setTransform(ratio, 0, 0, ratio, 0, 0);\n  return canvas;\n}\n","txt.FontLoader.path = \"font/\";\n\nimport circle from \"../lib/circle-path\";\nimport createHiDPICanvas from \"../lib/hidpi-canvas\";\n\nlet pathText, text, stage;\n\nfunction init() {\n  let canvas = createHiDPICanvas(500, 300, 2);\n  canvas.style.maxWidth = \"100%\";\n  document.getElementById(\"example\").appendChild(canvas);\n  stage = new createjs.Stage(canvas);\n\n  text = new txt.Text({\n    text: \"This is TxtJS\",\n    font: \"lobster\",\n    align: txt.Align.MIDDLE_CENTER,\n    width: 500,\n    height: 300,\n    size: 100,\n    start: 2700,\n    x: 250,\n    y: 150,\n    debug: true\n  });\n\n  stage.addChild(text);\n\n  pathText = new txt.PathText({\n    text: \"Text on a path!\",\n    font: \"arimo\",\n    align: txt.PathAlign.Center,\n    path: circle(0, 0, 200),\n    rotation: 0,\n    initialTracking: 200,\n    width: 1000,\n    height: 600,\n    size: 50,\n    start: 2700,\n    x: 500,\n    y: 300\n  });\n\n  stage.addChild(pathText);\n\n  createjs.Ticker.on(\"tick\", tick);\n  createjs.Ticker.framerate = 30;\n}\n\nvar counter = 0;\nvar counter2 = 0;\n\nfunction tick(event) {\n  pathText.tracking = 50 + Math.sin(counter) * 200;\n  text.align =\n    Math.sin(counter) > 0 ? txt.Align.BOTTOM_RIGHT : txt.Align.TOP_LEFT;\n\n  counter = (counter + 0.05) % 7;\n  counter2 = (counter2 + 3) % 500;\n  text.width = 100 + counter2;\n  text.x = 450 - counter2 / 2;\n  text.font = counter > 2.5 ? \"arimo\" : \"lobster\";\n\n  pathText.rotation = pathText.rotation + (1 % 360);\n\n  text.layout();\n  pathText.layout();\n  stage.update(event);\n}\n\ndocument.onload = init();\n"],"names":["txt","FontLoader","path","pathText","text","stage","init","canvas","createHiDPICanvas","style","maxWidth","document","getElementById","appendChild","createjs","Stage","Text","font","align","Align","MIDDLE_CENTER","width","height","size","start","x","y","debug","addChild","PathText","PathAlign","Center","circle","rotation","initialTracking","Ticker","on","tick","framerate","counter","counter2","event","tracking","Math","sin","BOTTOM_RIGHT","TOP_LEFT","layout","update","onload"],"mappings":"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"}