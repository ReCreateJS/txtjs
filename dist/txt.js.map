{"version":3,"file":"txt.js","sources":["../src/SVGArc.ts","../src/SVGPath.ts","../src/Graphics.ts","../src/applyMixins.ts","../src/GraphicsMixin.ts","../src/Accessibility.ts","../src/Align.ts","../src/Case.ts","../src/Font.ts","../src/Glyph.ts","../src/FontLoader.ts","../src/Character.ts","../src/TextContainer.ts","../src/Line.ts","../src/utils/apply-shape-event-listeners.ts","../src/CharacterText.ts","../src/Info.ts","../src/Word.ts","../src/Text.ts","../src/Path.ts","../src/VerticalAlign.ts","../src/PathText.ts","../src/index.ts"],"sourcesContent":["export default class SVGArc {\n  r0: number;\n  r1: number;\n  cx: number;\n  cy: number;\n  phi: number;\n  rx: number;\n  ry: number;\n  start: number;\n  end: number;\n  fS: boolean;\n  x2: number[];\n\n  mag(v) {\n    return Math.sqrt(Math.pow(v[0], 2) + Math.pow(v[1], 2));\n  }\n\n  meanVec(u, v) {\n    return [(u[0] + v[0]) / 2.0, (u[1] + v[1]) / 2.0];\n  }\n\n  dot(u, v) {\n    return u[0] * v[0] + u[1] * v[1];\n  }\n\n  ratio(u, v) {\n    return this.dot(u, v) / (this.mag(u) * this.mag(v));\n  }\n\n  rotClockwise(v, angle) {\n    const cost = Math.cos(angle);\n    const sint = Math.sin(angle);\n    return [cost * v[0] + sint * v[1], -1 * sint * v[0] + cost * v[1]];\n  }\n\n  pointMul(u, v) {\n    return [u[0] * v[0], u[1] * v[1]];\n  }\n\n  scale(c, v) {\n    return [c * v[0], c * v[1]];\n  }\n\n  sum(u, v) {\n    return [u[0] + v[0], u[1] + v[1]];\n  }\n\n  angle(u, v) {\n    let sign = 1.0;\n    if (u[0] * v[1] - u[1] * v[0] < 0) {\n      sign = -1.0;\n    }\n    return sign * Math.acos(this.ratio(u, v));\n  }\n\n  rotCounterClockwise(v, angle) {\n    const cost = Math.cos(angle);\n    const sint = Math.sin(angle);\n    return [cost * v[0] - sint * v[1], sint * v[0] + cost * v[1]];\n  }\n\n  midPoint(u, v) {\n    return [(u[0] - v[0]) / 2.0, (u[1] - v[1]) / 2.0];\n  }\n\n  constructor(\n    x1: number[],\n    rx: number,\n    ry: number,\n    phiarg: number,\n    fA: boolean,\n    fS: boolean,\n    x2: number[]\n  ) {\n    this.rx = rx;\n    this.ry = ry;\n    this.x2 = x2;\n    if (rx == 0 || ry == 0) {\n      return;\n    }\n    const phi = phiarg * (Math.PI / 180.0);\n    rx = Math.abs(rx);\n    ry = Math.abs(ry);\n    const xPrime = this.rotClockwise(this.midPoint(x1, x2), phi); // F.6.5.1\n    const xPrime2 = this.pointMul(xPrime, xPrime);\n    let rx2 = Math.pow(rx, 2);\n    let ry2 = Math.pow(ry, 2);\n\n    const lambda = Math.sqrt(xPrime2[0] / rx2 + xPrime2[1] / ry2);\n    if (lambda > 1) {\n      rx *= lambda;\n      ry *= lambda;\n      rx2 = Math.pow(rx, 2);\n      ry2 = Math.pow(ry, 2);\n    }\n    let t = rx2 * ry2 - rx2 * xPrime2[1] - ry2 * xPrime2[0];\n    if (t > -0.000001 && t < 0.000001) {\n      t = 0;\n    }\n    let b = rx2 * xPrime2[1] + ry2 * xPrime2[0];\n    if (b > -0.000001 && b < 0.000001) {\n      b = 0;\n    }\n    let factor = Math.sqrt(t / b);\n    if (fA == fS) {\n      factor *= -1.0;\n    }\n    const cPrime = this.scale(factor, [\n      (rx * xPrime[1]) / ry,\n      (-ry * xPrime[0]) / rx\n    ]);\n    const c = this.sum(\n      this.rotCounterClockwise(cPrime, phi),\n      this.meanVec(x1, x2)\n    );\n    const x1UnitVector = [\n      (xPrime[0] - cPrime[0]) / rx,\n      (xPrime[1] - cPrime[1]) / ry\n    ];\n    const x2UnitVector = [\n      (-1.0 * xPrime[0] - cPrime[0]) / rx,\n      (-1.0 * xPrime[1] - cPrime[1]) / ry\n    ];\n    const theta = this.angle([1, 0], x1UnitVector);\n    let deltaTheta = this.angle(x1UnitVector, x2UnitVector);\n    if (isNaN(deltaTheta)) {\n      deltaTheta = Math.PI;\n    }\n    const start = theta;\n    const end = theta + deltaTheta;\n    this.cx = c[0];\n    this.cy = c[1];\n    this.phi = phi;\n    this.rx = rx;\n    this.ry = ry;\n    this.start = start;\n    this.end = end;\n    this.fS = !fS;\n  }\n\n  exec(ctx: CanvasRenderingContext2D) {\n    if (this.rx == 0 || this.ry == 0) {\n      ctx.lineTo(this.x2[0], this.x2[1]);\n      return;\n    }\n    ctx.translate(this.cx, this.cy);\n    ctx.rotate(this.phi);\n    ctx.scale(this.rx, this.ry);\n    ctx.arc(0, 0, 1, this.start, this.end, this.fS);\n    ctx.scale(1 / this.rx, 1 / this.ry);\n    ctx.rotate(-this.phi);\n    ctx.translate(-this.cx, -this.cy);\n  }\n}\n","export function parsePathData(data) {\n  if (!data) {\n    return [];\n  }\n  let cs = data;\n  const cc = [\n    \"m\",\n    \"M\",\n    \"l\",\n    \"L\",\n    \"v\",\n    \"V\",\n    \"h\",\n    \"H\",\n    \"z\",\n    \"Z\",\n    \"c\",\n    \"C\",\n    \"q\",\n    \"Q\",\n    \"t\",\n    \"T\",\n    \"s\",\n    \"S\",\n    \"a\",\n    \"A\"\n  ];\n  cs = cs.replace(new RegExp(\" \", \"g\"), \",\");\n  for (let n = 0; n < cc.length; n++) {\n    cs = cs.replace(new RegExp(cc[n], \"g\"), \"|\" + cc[n]);\n  }\n  const arr = cs.split(\"|\");\n  const ca = [];\n  let cpx = 0;\n  let cpy = 0;\n  const arrLength = arr.length;\n  let startPoint = null;\n  for (let n = 1; n < arrLength; n++) {\n    let str = arr[n];\n    let c = str.charAt(0);\n    str = str.slice(1);\n    str = str.replace(new RegExp(\",-\", \"g\"), \"-\");\n    str = str.replace(new RegExp(\"-\", \"g\"), \",-\");\n    str = str.replace(new RegExp(\"e,-\", \"g\"), \"e-\");\n    let p = str.split(\",\");\n    if (p.length > 0 && p[0] === \"\") {\n      p.shift();\n    }\n    const pLength = p.length;\n    for (let i = 0; i < pLength; i++) {\n      p[i] = parseFloat(p[i]);\n    }\n    if (c === \"z\" || c === \"Z\") {\n      p = [true];\n    }\n\n    while (p.length > 0) {\n      if (isNaN(p[0])) {\n        break;\n      }\n      let cmd = null;\n      let points = [];\n      const startX = cpx,\n        startY = cpy;\n      let prevCmd, ctlPtx, ctlPty;\n      let rx, ry, psi, fa, fs, x1, y1;\n      let dx, dy;\n\n      switch (c) {\n        case \"l\":\n          cpx += p.shift();\n          cpy += p.shift();\n          cmd = \"L\";\n          points.push(cpx, cpy);\n          break;\n\n        case \"L\":\n          cpx = p.shift();\n          cpy = p.shift();\n          points.push(cpx, cpy);\n          break;\n\n        case \"m\":\n          dx = p.shift();\n          dy = p.shift();\n          cpx += dx;\n          cpy += dy;\n          if (startPoint == null) {\n            startPoint = [cpx, cpy];\n          }\n          cmd = \"M\";\n          points.push(cpx, cpy);\n          c = \"l\";\n          break;\n\n        case \"M\":\n          cpx = p.shift();\n          cpy = p.shift();\n          cmd = \"M\";\n          if (startPoint == null) {\n            startPoint = [cpx, cpy];\n          }\n          points.push(cpx, cpy);\n          c = \"L\";\n          break;\n\n        case \"h\":\n          cpx += p.shift();\n          cmd = \"L\";\n          points.push(cpx, cpy);\n          break;\n\n        case \"H\":\n          cpx = p.shift();\n          cmd = \"L\";\n          points.push(cpx, cpy);\n          break;\n\n        case \"v\":\n          cpy += p.shift();\n          cmd = \"L\";\n          points.push(cpx, cpy);\n          break;\n\n        case \"V\":\n          cpy = p.shift();\n          cmd = \"L\";\n          points.push(cpx, cpy);\n          break;\n\n        case \"C\":\n          points.push(p.shift(), p.shift(), p.shift(), p.shift());\n          cpx = p.shift();\n          cpy = p.shift();\n          points.push(cpx, cpy);\n          break;\n\n        case \"c\":\n          points.push(\n            cpx + p.shift(),\n            cpy + p.shift(),\n            cpx + p.shift(),\n            cpy + p.shift()\n          );\n          cpx += p.shift();\n          cpy += p.shift();\n          cmd = \"C\";\n          points.push(cpx, cpy);\n          break;\n\n        case \"S\":\n          ctlPtx = cpx;\n          ctlPty = cpy;\n          prevCmd = ca[ca.length - 1];\n          if (prevCmd.command === \"C\") {\n            ctlPtx = cpx + (cpx - prevCmd.points[2]);\n            ctlPty = cpy + (cpy - prevCmd.points[3]);\n          }\n          points.push(ctlPtx, ctlPty, p.shift(), p.shift());\n          cpx = p.shift();\n          cpy = p.shift();\n          cmd = \"C\";\n          points.push(cpx, cpy);\n          break;\n\n        case \"s\":\n          ctlPtx = cpx;\n          ctlPty = cpy;\n          prevCmd = ca[ca.length - 1];\n          if (prevCmd.command === \"C\") {\n            ctlPtx = cpx + (cpx - prevCmd.points[2]);\n            ctlPty = cpy + (cpy - prevCmd.points[3]);\n          }\n          points.push(ctlPtx, ctlPty, cpx + p.shift(), cpy + p.shift());\n          cpx += p.shift();\n          cpy += p.shift();\n          cmd = \"C\";\n          points.push(cpx, cpy);\n          break;\n\n        case \"Q\":\n          points.push(p.shift(), p.shift());\n          cpx = p.shift();\n          cpy = p.shift();\n          points.push(cpx, cpy);\n          break;\n\n        case \"q\":\n          points.push(cpx + p.shift(), cpy + p.shift());\n          cpx += p.shift();\n          cpy += p.shift();\n          cmd = \"Q\";\n          points.push(cpx, cpy);\n          break;\n\n        case \"T\":\n          ctlPtx = cpx;\n          ctlPty = cpy;\n          prevCmd = ca[ca.length - 1];\n          if (prevCmd.command === \"Q\") {\n            ctlPtx = cpx + (cpx - prevCmd.points[0]);\n            ctlPty = cpy + (cpy - prevCmd.points[1]);\n          }\n          cpx = p.shift();\n          cpy = p.shift();\n          cmd = \"Q\";\n          points.push(ctlPtx, ctlPty, cpx, cpy);\n          break;\n\n        case \"t\":\n          ctlPtx = cpx;\n          ctlPty = cpy;\n          prevCmd = ca[ca.length - 1];\n          if (prevCmd.command === \"Q\") {\n            ctlPtx = cpx + (cpx - prevCmd.points[0]);\n            ctlPty = cpy + (cpy - prevCmd.points[1]);\n          }\n          cpx += p.shift();\n          cpy += p.shift();\n          cmd = \"Q\";\n          points.push(ctlPtx, ctlPty, cpx, cpy);\n          break;\n\n        case \"A\":\n          rx = p.shift();\n          ry = p.shift();\n          psi = p.shift();\n          fa = p.shift();\n          fs = p.shift();\n          x1 = cpx;\n          y1 = cpy;\n          cpx = p.shift();\n          cpy = p.shift();\n          cmd = \"A\";\n          points = [[x1, y1], rx, ry, psi, fa, fs, [cpx, cpy]];\n          break;\n\n        case \"a\":\n          rx = p.shift();\n          ry = p.shift();\n          psi = p.shift();\n          fa = p.shift();\n          fs = p.shift();\n          x1 = cpx;\n          y1 = cpy;\n          cpx += p.shift();\n          cpy += p.shift();\n          cmd = \"A\";\n          points = [[x1, y1], rx, ry, psi, fa, fs, [cpx, cpy]];\n          break;\n\n        case \"z\":\n          cmd = \"Z\";\n          if (startPoint) {\n            cpx = startPoint[0];\n            cpy = startPoint[1];\n            startPoint = null;\n          } else {\n            cpx = 0;\n            cpy = 0;\n          }\n          p.shift();\n          points = [cpx, cpy];\n          break;\n\n        case \"Z\":\n          cmd = \"Z\";\n          if (startPoint) {\n            cpx = startPoint[0];\n            cpy = startPoint[1];\n            startPoint = null;\n          } else {\n            cpx = 0;\n            cpy = 0;\n          }\n          p.shift();\n          points = [cpx, cpy];\n          break;\n      }\n\n      ca.push({\n        command: cmd || c,\n        points: points,\n        start: {\n          x: startX,\n          y: startY\n        }\n      });\n    }\n  }\n  return ca;\n}\n","import SVGArc from \"./SVGArc\";\nimport { parsePathData } from \"./SVGPath\";\n\nexport default class Graphics {\n  /**\n   * Build up createjs Graphics commands based on path data.\n   */\n  static init(target, svgpath: string) {\n    const ca = parsePathData(svgpath);\n    const G = createjs.Graphics;\n\n    for (let n = 0; n < ca.length; n++) {\n      const c = ca[n].command;\n      const p = ca[n].points;\n      switch (c) {\n        case \"L\":\n          target.append(new G.LineTo(p[0], p[1]));\n          break;\n\n        case \"M\":\n          target.append(new G.MoveTo(p[0], p[1]));\n          break;\n\n        case \"C\":\n          target.append(\n            new G.BezierCurveTo(p[0], p[1], p[2], p[3], p[4], p[5])\n          );\n          break;\n\n        case \"Q\":\n          target.append(new G.QuadraticCurveTo(p[0], p[1], p[2], p[3]));\n          break;\n\n        case \"A\":\n          target.append(new SVGArc(p[0], p[1], p[2], p[3], p[4], p[5], p[6]));\n          break;\n\n        case \"Z\":\n          target.append(new G.ClosePath());\n          target.append(new G.MoveTo(p[0], p[1]));\n          break;\n      }\n    }\n  }\n}\n","export default function applyMixins(derivedCtor: any, baseCtors: any[]) {\n  baseCtors.forEach(baseCtor => {\n    Object.getOwnPropertyNames(baseCtor.prototype).forEach(name => {\n      Object.defineProperty(\n        derivedCtor.prototype,\n        name,\n        Object.getOwnPropertyDescriptor(baseCtor.prototype, name)\n      );\n    });\n  });\n}\n","import Graphics from \"./Graphics\";\nimport applyMixins from \"./applyMixins\";\n\nclass GraphicsMixin {\n  /**\n   * decodeSVGPath intended for createjs.Graphics class\n   */\n  decodeSVGPath(data: string) {\n    Graphics.init(this, data);\n    return this;\n  }\n}\n\napplyMixins(createjs.Graphics, [GraphicsMixin]);\n\ndeclare global {\n  namespace createjs {\n    interface Graphics {\n      decodeSVGPath(data: string): Graphics;\n    }\n  }\n}\n","export default class Accessibility {\n  static data: any = [];\n\n  static timeout: any = null;\n\n  static set(element: any) {\n    //if an element is not on canvas, do not place into accessibility api\n    if (element.stage == null) {\n      return;\n    }\n    //clear timeout if exists\n    if (Accessibility.timeout != null) {\n      clearTimeout(Accessibility.timeout);\n    }\n    // add to accessibility elements\n    if (element.accessibilityId == null) {\n      Accessibility.data.push(element);\n      element.accessibilityId = Accessibility.data.length - 1;\n    }\n    Accessibility.timeout = setTimeout(Accessibility.update, 300);\n  }\n\n  static update() {\n    Accessibility.timeout = null;\n    const data = Accessibility.data.slice(0);\n    data.sort(function(a, b) {\n      return a.accessibilityPriority - b.accessibilityPriority;\n    });\n    const len = data.length;\n    let out = \"\";\n    let currentCanvas = data[0].stage.canvas;\n    for (let i = 0; i < len; i++) {\n      if (data[i].stage == null) {\n        continue;\n      }\n      if (currentCanvas != data[i].stage.canvas) {\n        currentCanvas.innerHTML = out;\n        out = \"\";\n        currentCanvas = data[i].stage.canvas;\n      }\n      if (data[i].accessibilityText == null) {\n        out += \"<p>\" + data[i].text + \"</p>\";\n      } else {\n        out += data[i].accessibilityText;\n      }\n    }\n    currentCanvas.innerHTML = out;\n  }\n\n  static clear() {\n    Accessibility.data = [];\n  }\n}\n","enum Align {\n  TOP_LEFT = 0,\n  TOP_CENTER = 1,\n  TOP_RIGHT = 2,\n  MIDDLE_LEFT = 3,\n  MIDDLE_CENTER = 4,\n  MIDDLE_RIGHT = 5,\n  BOTTOM_LEFT = 6,\n  BOTTOM_CENTER = 7,\n  BOTTOM_RIGHT = 8,\n  TL = 0,\n  TC = 1,\n  TR = 2,\n  ML = 3,\n  MC = 4,\n  MR = 5,\n  BL = 6,\n  BC = 7,\n  BR = 8\n}\n\nexport default Align;\n","enum Case {\n  NORMAL = 0,\n  UPPER = 1,\n  LOWER = 2,\n  SMALL_CAPS = 3\n}\n\nexport default Case;\n","export default class Font {\n  glyphs: any = {};\n  kerning: any = {};\n  missing: number;\n  offset: number;\n  default: number;\n  descent: number;\n  ascent: number;\n  top = 0;\n  middle = 0;\n  bottom = 0;\n  units = 1000;\n  id: string;\n  ligatures: any = {};\n  panose: string;\n  alphabetic: string;\n  loaded = false;\n  targets: number[] = [];\n  loader: XMLHttpRequest;\n\n  cloneGlyph(target: number, from: number) {\n    if (this.glyphs[target] == undefined && this.glyphs[from] != undefined) {\n      this.glyphs[target] = this.glyphs[from];\n      this.kerning[target] = this.kerning[from];\n    }\n  }\n}\n","/**\n * Represents a single Glyph within a Font.\n */\n\nexport default class Glyph {\n  /** SVG path data */\n  path = \"\";\n  offset: number;\n  kerning: any = {};\n  private _graphic: createjs.Graphics = null;\n  _fill: createjs.Graphics.Fill;\n  _stroke: createjs.Graphics.Stroke;\n  _strokeStyle: createjs.Graphics.StrokeStyle;\n\n  graphic() {\n    if (this._graphic == null) {\n      this._graphic = new createjs.Graphics();\n\n      //append fill/stroke/stokeStyle\n      //Character instances populate properties before draw\n      this._stroke = new createjs.Graphics.Stroke(null, true);\n\n      this._strokeStyle = new createjs.Graphics.StrokeStyle(\n        0,\n        null,\n        null,\n        null\n      );\n\n      this._fill = new createjs.Graphics.Fill(null);\n\n      //convert SVG to drawing paths\n      this._graphic.decodeSVGPath(this.path);\n\n      this._graphic.append(this._fill);\n      this._graphic.append(this._strokeStyle);\n      this._graphic.append(this._stroke);\n    }\n    return this._graphic;\n  }\n\n  draw(ctx: CanvasRenderingContext2D): boolean {\n    this._graphic.draw(ctx);\n    return true;\n  }\n\n  getKerning(characterCode: number, size: number) {\n    const out = -(this.kerning[characterCode] * size);\n    if (isNaN(out)) {\n      return 0;\n    }\n    if (isNaN(characterCode)) {\n      return 0;\n    }\n    if (isNaN(size)) {\n      return 0;\n    }\n    if (this.kerning[characterCode] != undefined) {\n      return out;\n    }\n    return 0;\n  }\n}\n","import Font from \"./Font\";\nimport Glyph from \"./Glyph\";\n\n/**\n * Fetches font files via AJAX request, and\n * parses the font into glyphs, and stores it.\n * Local storage is optionally used for caching.\n *\n * Font files store font data, grouped by categories:\n *\n *  * `0` = Font properties: `0|property name|property value`\n *  * `1` = Glyph SVG shape data: `1|?|?|SVGPath data`\n *  * `2` = Kerning spacing: `2|?|?|?`\n *  * `3` = Ligatures: `3`\n *\n * Each line in a category of data is delineated with pipe characters \"|\".\n *\n * Partial example:\n *\n * ```\n * 0|id|Abel-Regular\n * 0|family|Abel\n * 1|33|428|M250 434h-72l-55 1000h182zM137 0v154h154v-154h-154z\n * 1|34|645|M225 993h-51l-51 441h153zM471 993h-51l-51 441h153z\n * 2|34|197|123\n * 2|47|100|102\n * 3\n * ```\n *\n * @todo This class should be split into FontLoader (AJAX fetch), FontParser (deserialisation), and probably a FontStorage class.\n */\nexport default class FontLoader {\n  /**\n   * Server path to load font files from.\n   */\n  static path = \"/font/\";\n\n  static cache = false;\n\n  static version = 0;\n\n  static fonts: any = {};\n\n  static loaders: any = [];\n\n  static isLoaded(name: string): boolean {\n    if (FontLoader.fonts.hasOwnProperty(name)) {\n      return FontLoader.fonts[name].loaded;\n    }\n    return false;\n  }\n\n  static getFont(name: string): Font {\n    if (FontLoader.fonts.hasOwnProperty(name)) {\n      return FontLoader.fonts[name];\n    }\n    return null;\n  }\n\n  static load(target: any, fonts: string[]) {\n    //no loaderId implies no loading for this txt field\n    let loader: any;\n    if (target.loaderId == null) {\n      loader = {};\n      target.loaderId = FontLoader.loaders.push(loader) - 1;\n      loader._id = target.loaderId;\n      loader._target = target;\n    } else {\n      loader = FontLoader.loaders[target.loaderId];\n    }\n    const fontCount = fonts.length;\n    for (let i = 0; i < fontCount; ++i) {\n      //mark loader for font loading\n      loader[fonts[i]] = false;\n    }\n    for (const prop in loader) {\n      if (prop.charAt(0) != \"_\") {\n        FontLoader.loadFont(prop, loader);\n      }\n    }\n  }\n\n  static check(id: number) {\n    const loader = FontLoader.loaders[id];\n    //determine if all fonts are loaded\n    for (const prop in loader) {\n      if (prop.charAt(0) != \"_\") {\n        loader[prop] = FontLoader.isLoaded(prop);\n        if (loader[prop] == false) return;\n      }\n    }\n    window.setTimeout(function() {\n      loader._target.fontLoaded();\n    }, 1);\n  }\n\n  static loadFont(fontName: string, loader: any) {\n    //determine if font exists in memory\n    if (FontLoader.fonts.hasOwnProperty(fontName)) {\n      //loading complete\n      if (FontLoader.fonts[fontName].loaded === true) {\n        FontLoader.check(loader._id);\n\n        //loading not complete\n      } else {\n        //add loader id to font\n        FontLoader.fonts[fontName].targets.push(loader._id);\n      }\n      //load from scratch\n    } else {\n      const font: Font = (FontLoader.fonts[fontName] = new Font());\n      font.targets.push(loader._id);\n\n      //TODO localstorage check & get\n      const req: any = new XMLHttpRequest();\n\n      if (localStorage && FontLoader.cache) {\n        const local = JSON.parse(\n          localStorage.getItem(\"txt_font_\" + fontName.split(\" \").join(\"_\"))\n        );\n        if (local != null) {\n          if (local.version === FontLoader.version) {\n            req.cacheResponseText = local.font;\n            req.cacheFont = true;\n          }\n        }\n      }\n\n      req.onload = function() {\n        //localstorage set\n        if (localStorage && FontLoader.cache && this.cacheFont == undefined) {\n          localStorage.setItem(\n            \"txt_font_\" + fontName.split(\" \").join(\"_\"),\n            JSON.stringify({\n              font: this.responseText,\n              version: FontLoader.version\n            })\n          );\n        }\n\n        let lines = this.responseText.split(\"\\n\");\n        //use cacheResponseText as responseText is readonly via XHR\n        if (this.cacheResponseText) {\n          lines = this.cacheResponseText.split(\"\\n\");\n        }\n        const len = lines.length;\n        let i = 0;\n        let line: string[];\n        let glyph: Glyph;\n        let lineLen;\n        while (i < len) {\n          line = lines[i].split(\"|\");\n          switch (line[0]) {\n            case \"0\":\n              //properties\n              if (\n                line[1] == \"id\" ||\n                line[1] == \"panose\" ||\n                line[1] == \"family\" ||\n                line[1] == \"font-style\" ||\n                line[1] == \"font-stretch\"\n              ) {\n                font[line[1]] = line[2];\n              } else {\n                font[line[1]] = parseInt(line[2]);\n              }\n              break;\n\n            case \"1\":\n              //glyphs\n\n              glyph = new Glyph();\n              glyph.offset = parseInt(line[2]) / font.units;\n              glyph.path = line[3];\n              font.glyphs[line[1]] = glyph;\n              break;\n\n            case \"2\":\n              //kerning\n              if (font.kerning[line[1]] == undefined) {\n                font.kerning[line[1]] = {};\n              }\n              if (font.glyphs[line[1]] == undefined) {\n                glyph = new Glyph();\n                glyph.offset = font.default / font.units;\n                glyph.path = \"\";\n                font.glyphs[line[1]] = glyph;\n              }\n              font.glyphs[line[1]].kerning[line[2]] =\n                parseInt(line[3]) / font.units;\n              font.kerning[line[1]][line[2]] = parseInt(line[3]) / font.units;\n              break;\n\n            case \"3\":\n              line.shift();\n              lineLen = line.length;\n              for (let j = 0; j < lineLen; j++) {\n                const path = line[j].split(\"\");\n                const pathLength = path.length;\n                let target = font.ligatures;\n                for (let k = 0; k < pathLength; k++) {\n                  if (target[path[k]] == undefined) {\n                    target[path[k]] = {};\n                  }\n                  if (k == pathLength - 1) {\n                    target[path[k]].glyph = font.glyphs[line[j]];\n                  }\n\n                  target = target[path[k]];\n                }\n                //font.ligatures[ line[ j ] ] = font.glyphs[ line[j] ]\n              }\n              break;\n          }\n          i++;\n        }\n        //character cloning\n        //clone bullet into multiple areas\n        font.cloneGlyph(183, 8226);\n        font.cloneGlyph(8729, 8226);\n        font.cloneGlyph(12539, 8226);\n        font.cloneGlyph(9702, 8226);\n        font.cloneGlyph(9679, 8226);\n        font.cloneGlyph(9675, 8226);\n\n        //define font adjustment values for font.top, font.middle, font.bottom\n        if (font.top == undefined) {\n          font.top = 0;\n        }\n        if (font.middle == undefined) {\n          font.middle = 0;\n        }\n        if (font.bottom == undefined) {\n          font.bottom = 0;\n        }\n\n        //level the font metadata\n        const lLen = font.targets.length;\n        font.loaded = true;\n        for (let l = 0; l < lLen; ++l) {\n          FontLoader.check(font.targets[l]);\n        }\n        font.targets = [];\n      };\n      //check if cached\n      if (req.cacheFont == true) {\n        req.onload();\n      } else {\n        req.open(\n          \"get\",\n          FontLoader.path + fontName.split(\" \").join(\"_\") + \".txt\",\n          true\n        );\n        req.send();\n      }\n    }\n  }\n}\n","import Case from \"./Case\";\nimport Glyph from \"./Glyph\";\nimport FontLoader from \"./FontLoader\";\nimport Font from \"./Font\";\n\n/**\n * Represents a styled character\n */\nexport default class Character extends createjs.Shape {\n  character = \"\";\n  characterCode: number = null;\n  font: string = null;\n  tracking: number = null;\n  characterCase: Case = null;\n  characterCaseOffset = 0;\n  index: number = null;\n  size: number = null;\n  fillColor: string = null;\n  strokeColor: string = null;\n  strokeWidth: number = null;\n  measuredWidth: number = null;\n  measuredHeight: number = null;\n  hPosition: number = null;\n  missing = false;\n\n  _glyph: Glyph;\n  _font: Font;\n\n  constructor(character: string, style: {}, index: number = null) {\n    super();\n    this.set(style);\n    this.index = index;\n\n    let upperSmall;\n\n    // flip case depending on characterCase property\n    if (this.characterCase == Case.NORMAL) {\n      this.character = character;\n    } else if (this.characterCase == Case.UPPER) {\n      this.character = character.toUpperCase();\n    } else if (this.characterCase == Case.LOWER) {\n      this.character = character.toLowerCase();\n    } else if (this.characterCase == Case.SMALL_CAPS) {\n      this.character = character.toUpperCase();\n      upperSmall = !(character === this.character);\n    } else {\n      //fallback case for unknown.\n      this.character = character;\n    }\n    this.characterCode = this.character.charCodeAt(0);\n\n    this._font = FontLoader.getFont(this.font);\n\n    if (this._font.glyphs[this.characterCode]) {\n      this._glyph = this._font.glyphs[this.characterCode];\n\n      //flip lower\n    } else if (\n      this._font.glyphs[\n        String.fromCharCode(this.characterCode)\n          .toLowerCase()\n          .charCodeAt(0)\n      ]\n    ) {\n      this._glyph = this._font.glyphs[\n        String.fromCharCode(this.characterCode)\n          .toLowerCase()\n          .charCodeAt(0)\n      ];\n\n      //flip upper\n    } else if (\n      this._font.glyphs[\n        String.fromCharCode(this.characterCode)\n          .toUpperCase()\n          .charCodeAt(0)\n      ]\n    ) {\n      this._glyph = this._font.glyphs[\n        String.fromCharCode(this.characterCode)\n          .toUpperCase()\n          .charCodeAt(0)\n      ];\n    }\n\n    //missing glyph\n    if (this._glyph === undefined) {\n      console.log(\"MISSING GLYPH:\" + this.character);\n      this._glyph = this._font.glyphs[42];\n      this.missing = true;\n    }\n    this.graphics = this._glyph.graphic();\n\n    // scale x\n    if (this.characterCase === Case.SMALL_CAPS) {\n      if (upperSmall) {\n        this.scaleX = (this.size / this._font.units) * 0.8;\n        this.characterCaseOffset = -0.2 * (this._glyph.offset * this.size);\n      } else {\n        this.scaleX = this.size / this._font.units;\n      }\n    } else {\n      this.scaleX = this.size / this._font.units;\n    }\n\n    this.scaleY = -this.scaleX;\n\n    this.measuredHeight =\n      (this._font.ascent - this._font.descent) * this.scaleX;\n    this.measuredWidth = this.scaleX * this._glyph.offset * this._font.units;\n\n    const ha = new createjs.Shape();\n    ha.graphics\n      .beginFill(\"#000\")\n      .drawRect(\n        0,\n        this._font.descent,\n        this._glyph.offset * this._font.units,\n        this._font.ascent - this._font.descent\n      );\n    this.hitArea = ha;\n  }\n\n  setGlyph(glyph: Glyph) {\n    this._glyph = glyph;\n    this.graphics = this._glyph.graphic();\n  }\n\n  trackingOffset(): number {\n    return this.size * (2.5 / this._font.units + 1 / 900 + this.tracking / 990);\n  }\n\n  draw(ctx: CanvasRenderingContext2D): boolean {\n    this._glyph._fill.style = this.fillColor;\n    this._glyph._fill.matrix = null;\n    this._glyph._stroke.style = this.strokeColor;\n    this._glyph._strokeStyle.width = this.strokeWidth;\n    return this._glyph.draw(ctx);\n  }\n\n  getWidth() {\n    return this.size * this._glyph.offset;\n  }\n}\n","import FontLoader from \"./FontLoader\";\nimport Case from \"./Case\";\nimport { ConstructObj, Style } from \"./Interfaces\";\nimport Accessibility from \"./Accessibility\";\n\n/**\n * Common aspects of top-level Text classes\n */\nexport default abstract class TextContainer extends createjs.Container {\n  text = \"\";\n  original: ConstructObj = null;\n  style: Style[] = null;\n  font = \"belinda\";\n  characterCase: Case = Case.NORMAL;\n\n  //accessibility\n  accessibilityText: string = null;\n  accessibilityPriority = 2;\n  accessibilityId: number = null;\n\n  protected loadFonts() {\n    const fonts = [this.font].concat(this.fontsFromCharacterStyles(this.style));\n    FontLoader.load(this, fonts);\n  }\n\n  //called when text is rendered\n  complete() {\n    //placeholder\n  }\n\n  //called when font has loaded\n  fontLoaded() {\n    this.layout();\n  }\n\n  //call stage.update to render canvas\n  //overload to support deferred rendering\n  render() {\n    this.stage.update();\n  }\n\n  abstract layout();\n\n  addAccessibility() {\n    Accessibility.set(this);\n  }\n\n  private fontsFromCharacterStyles(styles) {\n    const styleFonts = [];\n    if (styles) {\n      for (let i = 0; i < styles.length; ++i) {\n        if (styles[i] != undefined && styles[i].font != undefined) {\n          styleFonts.push(styles[i].font);\n        }\n      }\n    }\n    return styleFonts;\n  }\n\n  getCharCodeAt(index: number): number {\n    if (this.characterCase == Case.NORMAL) {\n      return this.text.charAt(index).charCodeAt(0);\n    } else if (this.characterCase == Case.UPPER) {\n      return this.text\n        .charAt(index)\n        .toUpperCase()\n        .charCodeAt(0);\n    } else if (this.characterCase == Case.LOWER) {\n      return this.text\n        .charAt(index)\n        .toLowerCase()\n        .charCodeAt(0);\n    } else if (this.characterCase == Case.SMALL_CAPS) {\n      return this.text\n        .charAt(index)\n        .toUpperCase()\n        .charCodeAt(0);\n    } else {\n      //fallback case for unknown.\n      return this.text.charAt(index).charCodeAt(0);\n    }\n  }\n}\n","import Word from \"./Word\";\nimport Character from \"./Character\";\n\nexport default class Line extends createjs.Container {\n  measuredWidth: number;\n  measuredHeight: number;\n\n  constructor() {\n    super();\n  }\n\n  //Text support\n  lastWord(): Word {\n    return this.children[this.children.length - 1] as Word;\n  }\n\n  //CharacterText support\n  lastCharacter(): Character {\n    return this.children[this.children.length - 1] as Character;\n  }\n}\n","import { ShapeEvents } from \"../Interfaces\";\n\nexport const EventNames = [\n  \"click\",\n  \"dblclick\",\n  \"mousedown\",\n  \"mouseout\",\n  \"mouseover\",\n  \"pressmove\",\n  \"pressup\",\n  \"rollout\",\n  \"rollover\",\n  \"added\",\n  \"removed\",\n  \"tick\"\n];\n\n/**\n *\n * @param source\n * @param shape\n *\n * @todo: simplify with a loop\n */\nexport default function(\n  original: ShapeEvents,\n  shape: createjs.EventDispatcher\n) {\n  EventNames.forEach(eventName => {\n    if (original[eventName]) {\n      shape.on(eventName, original[eventName]);\n    }\n  });\n}\n","import TextContainer from \"./TextContainer\";\nimport Align from \"./Align\";\nimport FontLoader from \"./FontLoader\";\nimport { ConstructObj } from \"./Interfaces\";\nimport Font from \"./Font\";\nimport Character from \"./Character\";\nimport Line from \"./Line\";\nimport applyShapeEventListeners from \"./utils/apply-shape-event-listeners\";\n\nexport default class CharacterText extends TextContainer {\n  lineHeight: number = null;\n  width = 100;\n  height = 20;\n  align: number = Align.TOP_LEFT;\n  size = 12;\n  minSize: number = null;\n  maxTracking: number = null;\n  tracking = 0;\n  ligatures = false;\n  fillColor = \"#000\";\n  strokeColor: string = null;\n  strokeWidth: number = null;\n  singleLine = false;\n  autoExpand = false;\n  autoReduce = false;\n  overset = false;\n  oversetIndex: number = null;\n  loaderId: number = null;\n  debug = false;\n  lines: Line[] = [];\n  block: createjs.Container;\n  missingGlyphs: any[] = null;\n  renderCycle = true;\n  measured = false;\n  oversetPotential = false;\n\n  constructor(props: ConstructObj = null) {\n    super();\n\n    if (props) {\n      this.original = props;\n      this.set(props);\n      this.original.tracking = this.tracking;\n    }\n    this.loadFonts();\n  }\n\n  //layout text\n  layout() {\n    this.addAccessibility();\n\n    this.overset = false;\n    this.measured = false;\n    this.oversetPotential = false;\n\n    if (this.original.size) {\n      this.size = this.original.size;\n    }\n    if (this.original.tracking) {\n      this.tracking = this.original.tracking;\n    }\n    this.text = this.text.replace(/([\\n][ \\t]+)/g, \"\\n\");\n\n    if (this.singleLine === true) {\n      this.text = this.text.split(\"\\n\").join(\"\");\n      this.text = this.text.split(\"\\r\").join(\"\");\n    }\n\n    this.lines = [];\n    this.missingGlyphs = null;\n    this.removeAllChildren();\n\n    if (this.text === \"\" || this.text === undefined) {\n      this.render();\n      this.complete();\n      return;\n    }\n\n    this.block = new createjs.Container();\n    this.addChild(this.block);\n\n    if (this.debug == true) {\n      this.addDebugLayout();\n    }\n    if (\n      this.singleLine === true &&\n      (this.autoExpand === true || this.autoReduce === true)\n    ) {\n      this.measure();\n    }\n\n    if (this.renderCycle === false) {\n      this.removeAllChildren();\n      this.complete();\n      return;\n    }\n\n    if (this.characterLayout() === false) {\n      this.removeAllChildren();\n      return;\n    }\n    this.lineLayout();\n    this.render();\n    this.complete();\n  }\n\n  /**\n   * Draw baseline, ascent, ascender, and descender lines\n   */\n  private addDebugLayout() {\n    const font: Font = FontLoader.getFont(this.font);\n    //outline\n    let s = new createjs.Shape();\n    s.graphics.beginStroke(\"#FF0000\");\n    s.graphics.setStrokeStyle(1.2);\n    s.graphics.drawRect(0, 0, this.width, this.height);\n    this.addChild(s);\n    //baseline\n    s = new createjs.Shape();\n    s.graphics.beginFill(\"#000\");\n    s.graphics.drawRect(0, 0, this.width, 0.2);\n    s.x = 0;\n    s.y = 0;\n    this.block.addChild(s);\n    s = new createjs.Shape();\n    s.graphics.beginFill(\"#F00\");\n    s.graphics.drawRect(0, 0, this.width, 0.2);\n    s.x = 0;\n    s.y = (-font[\"cap-height\"] / font.units) * this.size;\n    this.block.addChild(s);\n    s = new createjs.Shape();\n    s.graphics.beginFill(\"#0F0\");\n    s.graphics.drawRect(0, 0, this.width, 0.2);\n    s.x = 0;\n    s.y = (-font.ascent / font.units) * this.size;\n    this.block.addChild(s);\n    s = new createjs.Shape();\n    s.graphics.beginFill(\"#00F\");\n    s.graphics.drawRect(0, 0, this.width, 0.2);\n    s.x = 0;\n    s.y = (-font.descent / font.units) * this.size;\n    this.block.addChild(s);\n  }\n\n  measure(): boolean {\n    this.measured = true;\n    //Extract origin sizing from this.original to preserve\n    //metrics. autoMeasure will change style properties\n    //directly. Change this.original to re-render.\n\n    let len = this.text.length;\n    const defaultStyle = {\n      size: this.original.size,\n      font: this.original.font,\n      tracking: this.original.tracking,\n      characterCase: this.original.characterCase\n    };\n    let currentStyle: any;\n    let charCode: number = null;\n    let font: Font;\n    const charMetrics = [];\n    let largestFontSize = defaultStyle.size;\n    for (let i = 0; i < len; i++) {\n      charCode = this.text.charCodeAt(i);\n\n      currentStyle = defaultStyle;\n      if (\n        this.original.style !== undefined &&\n        this.original.style[i] !== undefined\n      ) {\n        currentStyle = this.original.style[i];\n        // make sure style contains properties needed.\n        if (currentStyle.size === undefined)\n          currentStyle.size = defaultStyle.size;\n        if (currentStyle.font === undefined)\n          currentStyle.font = defaultStyle.font;\n        if (currentStyle.tracking === undefined)\n          currentStyle.tracking = defaultStyle.tracking;\n      }\n      if (currentStyle.size > largestFontSize) {\n        largestFontSize = currentStyle.size;\n      }\n      font = FontLoader.fonts[currentStyle.font];\n\n      charMetrics.push({\n        char: this.text[i],\n        size: currentStyle.size,\n        charCode: charCode,\n        font: currentStyle.font,\n        offset: font.glyphs[charCode].offset,\n        units: font.units,\n        tracking: this.trackingOffset(\n          currentStyle.tracking,\n          currentStyle.size,\n          font.units\n        ),\n        kerning: font.glyphs[charCode].getKerning(this.getCharCodeAt(i + 1), 1)\n      });\n    }\n\n    //save space char using last known width/height\n    const space: any = {\n      char: \" \",\n      size: currentStyle.size,\n      charCode: 32,\n      font: currentStyle.font,\n      offset: font.glyphs[32].offset,\n      units: font.units,\n      tracking: 0,\n      kerning: 0\n    };\n\n    charMetrics[charMetrics.length - 1].tracking = 0;\n    //charMetrics[ charMetrics.length-1 ].kerning=0;\n\n    len = charMetrics.length;\n\n    //measured without size\n    let metricBaseWidth = 0;\n    //measured at size\n    let metricRealWidth = 0;\n    //measured at size with tracking\n    let metricRealWidthTracking = 0;\n\n    let current = null;\n    for (let i = 0; i < len; i++) {\n      current = charMetrics[i];\n      metricBaseWidth = metricBaseWidth + current.offset + current.kerning;\n      metricRealWidth =\n        metricRealWidth + (current.offset + current.kerning) * current.size;\n      metricRealWidthTracking =\n        metricRealWidthTracking +\n        (current.offset + current.kerning + current.tracking) * current.size;\n    }\n\n    //size cases\n    if (metricRealWidth > this.width) {\n      if (this.autoReduce === true) {\n        this.tracking = 0;\n        this.size =\n          (this.original.size * this.width) /\n          (metricRealWidth + space.offset * space.size);\n        if (this.minSize != null && this.size < this.minSize) {\n          this.size = this.minSize;\n          this.oversetPotential = true;\n        }\n        return true;\n      }\n      //tracking cases\n    } else {\n      let trackMetric = this.offsetTracking(\n        (this.width - metricRealWidth) / len,\n        current.size,\n        current.units\n      );\n      if (trackMetric < 0) {\n        trackMetric = 0;\n      }\n      //auto expand case\n      if (trackMetric > this.original.tracking && this.autoExpand) {\n        if (this.maxTracking != null && trackMetric > this.maxTracking) {\n          this.tracking = this.maxTracking;\n        } else {\n          this.tracking = trackMetric;\n        }\n        this.size = this.original.size;\n        return true;\n      }\n      //auto reduce tracking case\n      if (trackMetric < this.original.tracking && this.autoReduce) {\n        if (this.maxTracking != null && trackMetric > this.maxTracking) {\n          this.tracking = this.maxTracking;\n        } else {\n          this.tracking = trackMetric;\n        }\n        this.size = this.original.size;\n        return true;\n      }\n    }\n    return true;\n  }\n\n  trackingOffset(tracking: number, size: number, units: number): number {\n    return size * (2.5 / units + 1 / 900 + tracking / 990);\n  }\n\n  offsetTracking(offset: number, size: number, units: number): number {\n    return Math.floor(((offset - 2.5 / units - 1 / 900) * 990) / size);\n  }\n\n  getWidth(): number {\n    return this.width;\n  }\n\n  /**\n   * Place characters in lines\n   * adds Characters to lines. LineHeight IS a factor given lack of Words.\n   */\n  characterLayout(): boolean {\n    //char layout\n    const len = this.text.length;\n    let char: Character;\n    const defaultStyle = {\n      size: this.size,\n      font: this.font,\n      tracking: this.tracking,\n      characterCase: this.characterCase,\n      fillColor: this.fillColor,\n      strokeColor: this.strokeColor,\n      strokeWidth: this.strokeWidth\n    };\n    let currentStyle = defaultStyle;\n    let hPosition = 0;\n    let vPosition = 0;\n    let lineY = 0;\n    let firstLine = true;\n\n    let currentLine: Line = new Line();\n\n    this.lines.push(currentLine);\n    this.block.addChild(currentLine);\n\n    // loop over characters\n    // place into lines\n    for (let i = 0; i < len; i++) {\n      if (this.style !== null && this.style[i] !== undefined) {\n        currentStyle = this.style[i];\n        // make sure style contains properties needed.\n        if (currentStyle.size === undefined)\n          currentStyle.size = defaultStyle.size;\n        if (currentStyle.font === undefined)\n          currentStyle.font = defaultStyle.font;\n        if (currentStyle.tracking === undefined)\n          currentStyle.tracking = defaultStyle.tracking;\n        if (currentStyle.characterCase === undefined)\n          currentStyle.characterCase = defaultStyle.characterCase;\n        if (currentStyle.fillColor === undefined)\n          currentStyle.fillColor = defaultStyle.fillColor;\n        if (currentStyle.strokeColor === undefined)\n          currentStyle.strokeColor = defaultStyle.strokeColor;\n        if (currentStyle.strokeWidth === undefined)\n          currentStyle.strokeWidth = defaultStyle.strokeWidth;\n      }\n\n      // newline\n      // mark word as having newline\n      // create new word\n      // new line has no character\n      if (this.text.charAt(i) == \"\\n\" || this.text.charAt(i) == \"\\r\") {\n        //only if not last char\n        if (i < len - 1) {\n          if (firstLine === true) {\n            vPosition = currentStyle.size;\n            currentLine.measuredHeight = currentStyle.size;\n            currentLine.measuredWidth = hPosition;\n            lineY = 0;\n            currentLine.y = 0;\n          } else if (this.lineHeight != undefined) {\n            vPosition = this.lineHeight;\n            currentLine.measuredHeight = vPosition;\n            currentLine.measuredWidth = hPosition;\n            lineY = lineY + vPosition;\n            currentLine.y = lineY;\n          } else {\n            vPosition = char.measuredHeight;\n            currentLine.measuredHeight = vPosition;\n            currentLine.measuredWidth = hPosition;\n            lineY = lineY + vPosition;\n            currentLine.y = lineY;\n          }\n\n          firstLine = false;\n          currentLine = new Line();\n          currentLine.measuredHeight = currentStyle.size;\n          currentLine.measuredWidth = 0;\n          this.lines.push(currentLine);\n          this.block.addChild(currentLine);\n          vPosition = 0;\n          hPosition = 0;\n        }\n\n        if (this.text.charAt(i) == \"\\r\" && this.text.charAt(i + 1) == \"\\n\") {\n          i++;\n        }\n\n        continue;\n      }\n\n      //runtime test for font\n      if (FontLoader.isLoaded(currentStyle.font) === false) {\n        FontLoader.load(this, [currentStyle.font]);\n        return false;\n      }\n\n      // create character\n      char = new Character(this.text.charAt(i), currentStyle, i);\n\n      if (this.original.character) {\n        applyShapeEventListeners(this.original.character, char);\n      }\n\n      if (char.missing) {\n        if (this.missingGlyphs == null) {\n          this.missingGlyphs = [];\n        }\n        this.missingGlyphs.push({\n          position: i,\n          character: this.text.charAt(i),\n          font: currentStyle.font\n        });\n      }\n\n      if (firstLine === true) {\n        if (vPosition < char.size) {\n          vPosition = char.size;\n        }\n      } else if (this.lineHeight != undefined && this.lineHeight > 0) {\n        if (vPosition < this.lineHeight) {\n          vPosition = this.lineHeight;\n        }\n      } else if (char.measuredHeight > vPosition) {\n        vPosition = char.measuredHeight;\n      }\n\n      //swap character if ligature\n      //ligatures removed if tracking or this.ligatures is false\n      if (currentStyle.tracking == 0 && this.ligatures == true) {\n        //1 char match\n        const ligTarget = this.text.substr(i, 4);\n        if (char._font.ligatures[ligTarget.charAt(0)]) {\n          //2 char match\n          if (char._font.ligatures[ligTarget.charAt(0)][ligTarget.charAt(1)]) {\n            //3 char match\n            if (\n              char._font.ligatures[ligTarget.charAt(0)][ligTarget.charAt(1)][\n                ligTarget.charAt(2)\n              ]\n            ) {\n              //4 char match\n              if (\n                char._font.ligatures[ligTarget.charAt(0)][ligTarget.charAt(1)][\n                  ligTarget.charAt(2)\n                ][ligTarget.charAt(3)]\n              ) {\n                //swap 4 char ligature\n                char.setGlyph(\n                  char._font.ligatures[ligTarget.charAt(0)][\n                    ligTarget.charAt(1)\n                  ][ligTarget.charAt(2)][ligTarget.charAt(3)].glyph\n                );\n                i = i + 3;\n              } else {\n                //swap 3 char ligature\n                char.setGlyph(\n                  char._font.ligatures[ligTarget.charAt(0)][\n                    ligTarget.charAt(1)\n                  ][ligTarget.charAt(2)].glyph\n                );\n                i = i + 2;\n              }\n            } else {\n              //swap 2 char ligature\n              char.setGlyph(\n                char._font.ligatures[ligTarget.charAt(0)][ligTarget.charAt(1)]\n                  .glyph\n              );\n              i = i + 1;\n            }\n          }\n        }\n      }\n\n      if (this.overset == true) {\n        break;\n      } else if (\n        this.singleLine === false &&\n        hPosition + char.measuredWidth > this.width\n      ) {\n        const lastchar: Character = currentLine.children[\n          currentLine.children.length - 1\n        ] as Character;\n        if (lastchar.characterCode == 32) {\n          currentLine.measuredWidth =\n            hPosition -\n            lastchar.measuredWidth -\n            lastchar.trackingOffset() -\n            lastchar._glyph.getKerning(this.getCharCodeAt(i), lastchar.size);\n        } else {\n          currentLine.measuredWidth =\n            hPosition -\n            lastchar.trackingOffset() -\n            lastchar._glyph.getKerning(this.getCharCodeAt(i), lastchar.size);\n        }\n        if (firstLine === true) {\n          currentLine.measuredHeight = vPosition;\n          currentLine.y = 0;\n          lineY = 0;\n        } else {\n          currentLine.measuredHeight = vPosition;\n          lineY = lineY + vPosition;\n          currentLine.y = lineY;\n        }\n        firstLine = false;\n        currentLine = new Line();\n        currentLine.addChild(char);\n\n        if (char.characterCode == 32) {\n          hPosition = 0;\n        } else {\n          hPosition =\n            char.x +\n            char._glyph.offset * char.size +\n            char.characterCaseOffset +\n            char.trackingOffset();\n        }\n\n        this.lines.push(currentLine);\n        this.block.addChild(currentLine);\n        vPosition = 0;\n\n        //measured case\n      } else if (\n        this.measured == true &&\n        this.singleLine === true &&\n        hPosition + char.measuredWidth > this.width &&\n        this.oversetPotential == true\n      ) {\n        //char.x = hPosition;\n        //currentLine.addChild( char );\n        this.oversetIndex = i;\n        this.overset = true;\n        //hPosition = char.x + ( char._glyph.offset * char.size ) + char.characterCaseOffset + char.trackingOffset() + char._glyph.getKerning( this.getCharCodeAt( i + 1 ) , char.size );\n\n        //not measured\n      } else if (\n        this.measured == false &&\n        this.singleLine === true &&\n        hPosition + char.measuredWidth > this.width\n      ) {\n        //char.x = hPosition;\n        //currentLine.addChild( char );\n        this.oversetIndex = i;\n        this.overset = true;\n        //hPosition = char.x + ( char._glyph.offset * char.size ) + char.characterCaseOffset + char.trackingOffset() + char._glyph.getKerning( this.getCharCodeAt( i + 1 ) , char.size );\n      } else {\n        char.x = hPosition;\n        // push character into word\n        currentLine.addChild(char);\n        hPosition =\n          char.x +\n          char._glyph.offset * char.size +\n          char.characterCaseOffset +\n          char.trackingOffset() +\n          char._glyph.getKerning(this.getCharCodeAt(i + 1), char.size);\n      }\n    }\n    //case of empty word at end.\n    if (currentLine.children.length == 0) {\n      currentLine = this.lines[this.lines.length - 1];\n      hPosition = currentLine.measuredWidth;\n      vPosition = currentLine.measuredHeight;\n    }\n    if (firstLine === true) {\n      currentLine.measuredWidth = hPosition;\n      currentLine.measuredHeight = vPosition;\n      currentLine.y = 0;\n    } else {\n      currentLine.measuredWidth = hPosition;\n      currentLine.measuredHeight = vPosition;\n      if (vPosition == 0) {\n        if (this.lineHeight) {\n          vPosition = this.lineHeight;\n        } else {\n          vPosition = currentStyle.size;\n        }\n      }\n      currentLine.y = lineY + vPosition;\n    }\n    return true;\n  }\n\n  lineLayout() {\n    // loop over lines\n    // place into text\n    let measuredHeight = 0;\n    let line;\n    const a = Align;\n    const fnt: Font = FontLoader.getFont(this.font);\n\n    const len = this.lines.length;\n    for (let i = 0; i < len; i++) {\n      line = this.lines[i];\n\n      //correct measuredWidth if last line character contains tracking\n      if (line.lastCharacter()) {\n        line.measuredWidth -= line.lastCharacter().trackingOffset();\n      }\n\n      if (this.original.line) {\n        applyShapeEventListeners(this.original.line, line);\n      }\n\n      measuredHeight += line.measuredHeight;\n\n      if (this.align === a.TOP_CENTER) {\n        //move to center\n        line.x = (this.width - line.measuredWidth) / 2;\n      } else if (this.align === a.TOP_RIGHT) {\n        //move to right\n        line.x = this.width - line.measuredWidth;\n      } else if (this.align === a.MIDDLE_CENTER) {\n        //move to center\n        line.x = (this.width - line.measuredWidth) / 2;\n      } else if (this.align === a.MIDDLE_RIGHT) {\n        //move to right\n        line.x = this.width - line.measuredWidth;\n      } else if (this.align === a.BOTTOM_CENTER) {\n        //move to center\n        line.x = (this.width - line.measuredWidth) / 2;\n      } else if (this.align === a.BOTTOM_RIGHT) {\n        //move to right\n        line.x = this.width - line.measuredWidth;\n      }\n    }\n\n    //TOP ALIGNED\n    if (\n      this.align === a.TOP_LEFT ||\n      this.align === a.TOP_CENTER ||\n      this.align === a.TOP_RIGHT\n    ) {\n      if (fnt.top == 0) {\n        this.block.y = (this.lines[0].measuredHeight * fnt.ascent) / fnt.units;\n      } else {\n        this.block.y =\n          (this.lines[0].measuredHeight * fnt.ascent) / fnt.units +\n          (this.lines[0].measuredHeight * fnt.top) / fnt.units;\n      }\n\n      //MIDDLE ALIGNED\n    } else if (\n      this.align === a.MIDDLE_LEFT ||\n      this.align === a.MIDDLE_CENTER ||\n      this.align === a.MIDDLE_RIGHT\n    ) {\n      this.block.y =\n        this.lines[0].measuredHeight +\n        (this.height - measuredHeight) / 2 +\n        (this.lines[0].measuredHeight * fnt.middle) / fnt.units;\n\n      //BOTTOM ALIGNED\n    } else if (\n      this.align === a.BOTTOM_LEFT ||\n      this.align === a.BOTTOM_CENTER ||\n      this.align === a.BOTTOM_RIGHT\n    ) {\n      this.block.y =\n        this.height -\n        this.lines[this.lines.length - 1].y +\n        (this.lines[0].measuredHeight * fnt.bottom) / fnt.units;\n    }\n\n    if (this.original.block) {\n      applyShapeEventListeners(this.original.block, this.block);\n    }\n  }\n}\n","export default class Info {\n  static VERSION = \"0.9.5\";\n  static LICENSE = \"BSD-2-Clause\";\n  static CONTACT = \"ted@light.ly\";\n}\n","import Character from \"./Character\";\n\nexport default class Word extends createjs.Container {\n  hasNewLine = false;\n  hasHyphen = false;\n  hasSpace = false;\n  measuredWidth: number;\n  measuredHeight: number;\n  spaceOffset = 0;\n\n  constructor() {\n    super();\n  }\n\n  //CharacterText support\n  lastCharacter(): Character {\n    return this.children[this.children.length - 1] as Character;\n  }\n}\n","import TextContainer from \"./TextContainer\";\nimport Align from \"./Align\";\nimport FontLoader from \"./FontLoader\";\nimport Word from \"./Word\";\nimport Line from \"./Line\";\nimport Font from \"./Font\";\nimport { ConstructObj } from \"./Interfaces\";\nimport Character from \"./Character\";\nimport applyShapeEventListeners from \"./utils/apply-shape-event-listeners\";\n\nexport default class Text extends TextContainer {\n  lineHeight: number = null;\n  width = 100;\n  height = 20;\n  align: number = Align.TOP_LEFT;\n  size = 12;\n  tracking = 0;\n  ligatures = false;\n  fillColor = \"#000\";\n  strokeColor: string = null;\n  strokeWidth: number = null;\n  loaderId: number = null;\n  debug = false;\n  words: Word[] = [];\n  lines: Line[] = [];\n  block: createjs.Container;\n  missingGlyphs: any[] = null;\n  renderCycle = true;\n\n  constructor(props: ConstructObj = null) {\n    super();\n    if (props) {\n      this.original = props;\n      this.set(props);\n    }\n    this.loadFonts();\n  }\n\n  getBounds(): createjs.Rectangle {\n    // TODO: obtain intersected bounds of the characters/words in here\n\n    return new createjs.Rectangle(this.x, this.y, this.width, this.height);\n  }\n\n  layout() {\n    this.addAccessibility();\n    this.text = this.text.replace(/([\\n][ \\t]+)/g, \"\\n\");\n    this.words = [];\n    this.lines = [];\n    this.missingGlyphs = null;\n    // TODO - remove composite layout\n    this.removeAllChildren();\n\n    this.block = new createjs.Container();\n    this.addChild(this.block);\n\n    if (this.debug == true) {\n      this.addDebugLayout();\n    }\n\n    if (this.text === \"\" || this.text === undefined) {\n      this.render();\n      this.complete();\n      return;\n    }\n\n    if (this.characterLayout() === false) {\n      this.removeAllChildren();\n      return;\n    }\n\n    if (this.renderCycle === false) {\n      this.removeAllChildren();\n      this.complete();\n      return;\n    }\n\n    this.wordLayout();\n    this.lineLayout();\n\n    this.render();\n    this.complete();\n  }\n\n  /**\n   * Draw baseline, ascent, ascender, and descender lines\n   */\n  private addDebugLayout() {\n    const font: Font = FontLoader.getFont(this.font);\n    //outline\n    let s = new createjs.Shape();\n    s.graphics.beginStroke(\"#FF0000\");\n    s.graphics.setStrokeStyle(1.2);\n    s.graphics.drawRect(0, 0, this.width, this.height);\n    this.addChild(s);\n    //baseline\n    s = new createjs.Shape();\n    s.graphics.beginFill(\"#000\");\n    s.graphics.drawRect(0, 0, this.width, 0.2);\n    s.x = 0;\n    s.y = 0;\n    this.block.addChild(s);\n    s = new createjs.Shape();\n    s.graphics.beginFill(\"#F00\");\n    s.graphics.drawRect(0, 0, this.width, 0.2);\n    s.x = 0;\n    s.y = (-font[\"cap-height\"] / font.units) * this.size;\n    this.block.addChild(s);\n    s = new createjs.Shape();\n    s.graphics.beginFill(\"#0F0\");\n    s.graphics.drawRect(0, 0, this.width, 0.2);\n    s.x = 0;\n    s.y = (-font.ascent / font.units) * this.size;\n    this.block.addChild(s);\n    s = new createjs.Shape();\n    s.graphics.beginFill(\"#00F\");\n    s.graphics.drawRect(0, 0, this.width, 0.2);\n    s.x = 0;\n    s.y = (-font.descent / font.units) * this.size;\n    this.block.addChild(s);\n  }\n\n  //place characters in words\n  characterLayout(): boolean {\n    //characterlayout adds Charcters to words and measures true height. LineHeight is not a factor til Line layout.\n\n    //char layout\n    const len = this.text.length;\n    let char: Character;\n    const defaultStyle = {\n      size: this.size,\n      font: this.font,\n      tracking: this.tracking,\n      characterCase: this.characterCase,\n      fillColor: this.fillColor,\n      strokeColor: this.strokeColor,\n      strokeWidth: this.strokeWidth\n    };\n    let currentStyle = defaultStyle;\n    let hPosition = 0;\n    let vPosition = 0;\n\n    let currentWord: Word = new Word();\n    // push a new word to capture characters\n    this.words.push(currentWord);\n\n    // loop over characters\n    // place into words\n    for (let i = 0; i < len; i++) {\n      if (this.style !== null && this.style[i] !== undefined) {\n        currentStyle = this.style[i];\n        // make sure style contains properties needed.\n        if (currentStyle.size === undefined)\n          currentStyle.size = defaultStyle.size;\n        if (currentStyle.font === undefined)\n          currentStyle.font = defaultStyle.font;\n        if (currentStyle.tracking === undefined)\n          currentStyle.tracking = defaultStyle.tracking;\n        if (currentStyle.characterCase === undefined)\n          currentStyle.characterCase = defaultStyle.characterCase;\n        if (currentStyle.fillColor === undefined)\n          currentStyle.fillColor = defaultStyle.fillColor;\n        if (currentStyle.strokeColor === undefined)\n          currentStyle.strokeColor = defaultStyle.strokeColor;\n        if (currentStyle.strokeWidth === undefined)\n          currentStyle.strokeWidth = defaultStyle.strokeWidth;\n      }\n\n      // newline\n      // mark word as having newline\n      // create new word\n      // new line has no character\n      if (this.text.charAt(i) == \"\\n\") {\n        //only if not last char\n        if (i < len - 1) {\n          currentWord.measuredWidth = hPosition;\n          currentWord.measuredHeight = vPosition;\n          if (currentWord.measuredHeight == 0) {\n            currentWord.measuredHeight = currentStyle.size;\n          }\n          currentWord.hasNewLine = true;\n          currentWord = new Word();\n          this.words.push(currentWord);\n          vPosition = 0;\n          hPosition = 0;\n        }\n\n        continue;\n      }\n\n      //runtime test for font\n      if (FontLoader.isLoaded(currentStyle.font) === false) {\n        FontLoader.load(this, [currentStyle.font]);\n        return false;\n      }\n\n      // create character\n      char = new Character(this.text.charAt(i), currentStyle, i);\n\n      if (this.original.character) {\n        applyShapeEventListeners(this.original.character, char);\n      }\n\n      if (char.missing) {\n        if (this.missingGlyphs == null) {\n          this.missingGlyphs = [];\n        }\n        this.missingGlyphs.push({\n          position: i,\n          character: this.text.charAt(i),\n          font: currentStyle.font\n        });\n      }\n\n      if (char.measuredHeight > vPosition) {\n        vPosition = char.measuredHeight;\n      }\n\n      //swap character if ligature\n      //ligatures removed if tracking or this.ligatures is false\n      if (currentStyle.tracking == 0 && this.ligatures == true) {\n        //1 char match\n        const ligTarget = this.text.substr(i, 4);\n        if (char._font.ligatures[ligTarget.charAt(0)]) {\n          //2 char match\n          if (char._font.ligatures[ligTarget.charAt(0)][ligTarget.charAt(1)]) {\n            //3 char match\n            if (\n              char._font.ligatures[ligTarget.charAt(0)][ligTarget.charAt(1)][\n                ligTarget.charAt(2)\n              ]\n            ) {\n              //4 char match\n              if (\n                char._font.ligatures[ligTarget.charAt(0)][ligTarget.charAt(1)][\n                  ligTarget.charAt(2)\n                ][ligTarget.charAt(3)]\n              ) {\n                //swap 4 char ligature\n                char.setGlyph(\n                  char._font.ligatures[ligTarget.charAt(0)][\n                    ligTarget.charAt(1)\n                  ][ligTarget.charAt(2)][ligTarget.charAt(3)].glyph\n                );\n                i = i + 3;\n              } else {\n                //swap 3 char ligature\n                char.setGlyph(\n                  char._font.ligatures[ligTarget.charAt(0)][\n                    ligTarget.charAt(1)\n                  ][ligTarget.charAt(2)].glyph\n                );\n                i = i + 2;\n              }\n            } else {\n              //swap 2 char ligature\n              char.setGlyph(\n                char._font.ligatures[ligTarget.charAt(0)][ligTarget.charAt(1)]\n                  .glyph\n              );\n              i = i + 1;\n            }\n          }\n        }\n      }\n\n      char.x = hPosition;\n\n      // push character into word\n      currentWord.addChild(char);\n\n      // space\n      // mark word as having space\n      // create new word\n      // space character\n      if (this.text.charAt(i) == \" \") {\n        currentWord.hasSpace = true;\n        currentWord.spaceOffset = char._glyph.offset * char.size;\n        hPosition =\n          char.x +\n          char._glyph.offset * char.size +\n          char.characterCaseOffset +\n          char.trackingOffset() +\n          char._glyph.getKerning(this.text.charCodeAt(i + 1), char.size);\n        currentWord.measuredWidth = hPosition;\n        currentWord.measuredHeight = vPosition;\n        hPosition = 0;\n        vPosition = 0;\n        currentWord = new Word();\n        this.words.push(currentWord);\n        continue;\n      }\n\n      // hyphen\n      // mark word as having hyphen\n      // create new word\n      // space character\n      if (this.text.charAt(i) == \"-\") {\n        currentWord.hasHyphen = true;\n      }\n\n      hPosition =\n        char.x +\n        char._glyph.offset * char.size +\n        char.characterCaseOffset +\n        char.trackingOffset() +\n        char._glyph.getKerning(this.text.charCodeAt(i + 1), char.size);\n    }\n    //case of empty word at end.\n    if (currentWord.children.length == 0) {\n      currentWord = this.words[this.words.length - 1];\n      hPosition = currentWord.measuredWidth;\n      vPosition = currentWord.measuredHeight;\n    }\n    currentWord.measuredWidth = hPosition;\n    currentWord.measuredHeight = vPosition;\n\n    return true;\n  }\n\n  //place words in lines\n  wordLayout() {\n    // loop over words\n    // place into lines\n    const len = this.words.length;\n    let currentLine = new Line();\n    this.lines.push(currentLine);\n\n    currentLine.y = 0;\n\n    let currentWord: Word;\n    let lastHeight: number;\n\n    this.block.addChild(currentLine);\n    let hPosition = 0;\n    let vPosition = 0;\n    let firstLine = true;\n\n    let lastLineWord: Word;\n\n    for (let i = 0; i < len; i++) {\n      currentWord = this.words[i];\n      currentWord.x = hPosition;\n\n      if (this.original.word) {\n        applyShapeEventListeners(this.original.word, currentWord);\n      }\n\n      if (firstLine) {\n        vPosition = currentWord.measuredHeight;\n      } else if (this.lineHeight != null) {\n        vPosition = this.lineHeight;\n      } else if (currentWord.measuredHeight > vPosition) {\n        vPosition = currentWord.measuredHeight;\n      }\n\n      //exceeds line width && has new line\n      if (\n        hPosition + currentWord.measuredWidth > this.width &&\n        currentWord.hasNewLine == true &&\n        currentLine.children.length > 0\n      ) {\n        if (this.lineHeight != null) {\n          lastHeight = currentLine.y + this.lineHeight;\n        } else {\n          lastHeight = currentLine.y + vPosition;\n        }\n\n        currentLine.measuredWidth = hPosition;\n        lastLineWord = this.words[i - 1];\n\n        if (lastLineWord != undefined && lastLineWord.hasSpace) {\n          currentLine.measuredWidth -= lastLineWord.spaceOffset;\n        }\n        if (firstLine == false && this.lineHeight != null) {\n          currentLine.measuredHeight = this.lineHeight;\n        } else {\n          currentLine.measuredHeight = vPosition;\n        }\n\n        firstLine = false;\n        currentLine = new Line();\n        this.lines.push(currentLine);\n        currentLine.y = lastHeight;\n        hPosition = 0;\n        currentWord.x = 0;\n        this.block.addChild(currentLine);\n        //add word\n        const swapWord = this.words[i];\n        currentLine.addChild(swapWord);\n        if (this.lineHeight != null) {\n          currentLine.measuredHeight = this.lineHeight;\n        } else {\n          currentLine.measuredHeight = swapWord.measuredHeight;\n        }\n        currentLine.measuredWidth = swapWord.measuredWidth;\n\n        //add new line\n        currentLine = new Line();\n        this.lines.push(currentLine);\n        if (this.lineHeight != null) {\n          currentLine.y = lastHeight + this.lineHeight;\n        } else {\n          currentLine.y = lastHeight + vPosition;\n        }\n        this.block.addChild(currentLine);\n        if (i < len - 1) {\n          vPosition = 0;\n        }\n\n        continue;\n      }\n\n      //wrap word to new line if length\n      else if (\n        hPosition + currentWord.measuredWidth > this.width &&\n        i > 0 &&\n        currentLine.children.length > 0\n      ) {\n        if (this.lineHeight != null) {\n          lastHeight = currentLine.y + this.lineHeight;\n        } else {\n          lastHeight = currentLine.y + vPosition;\n        }\n        currentLine.measuredWidth = hPosition;\n        lastLineWord = this.words[i - 1];\n        if (lastLineWord != undefined && lastLineWord.hasSpace) {\n          currentLine.measuredWidth -= lastLineWord.spaceOffset;\n        }\n        if (firstLine == false && this.lineHeight != null) {\n          currentLine.measuredHeight = this.lineHeight;\n        } else {\n          currentLine.measuredHeight = vPosition;\n        }\n\n        firstLine = false;\n        currentLine = new Line();\n        this.lines.push(currentLine);\n        currentLine.y = lastHeight;\n        if (i < len - 1) {\n          vPosition = 0;\n        }\n        hPosition = 0;\n        currentWord.x = hPosition;\n        this.block.addChild(currentLine);\n      }\n\n      //wrap word to new line if newline\n      else if (currentWord.hasNewLine == true) {\n        if (this.lineHeight != null) {\n          lastHeight = currentLine.y + this.lineHeight;\n        } else {\n          lastHeight = currentLine.y + vPosition;\n        }\n        currentLine.measuredWidth = hPosition + currentWord.measuredWidth;\n        if (firstLine == false && this.lineHeight != null) {\n          currentLine.measuredHeight = this.lineHeight;\n        } else {\n          currentLine.measuredHeight = vPosition;\n        }\n        currentLine.addChild(this.words[i]);\n\n        firstLine = false;\n        currentLine = new Line();\n        this.lines.push(currentLine);\n        currentLine.y = lastHeight;\n        if (i < len - 1) {\n          vPosition = 0;\n        }\n        hPosition = 0;\n\n        this.block.addChild(currentLine);\n\n        continue;\n      }\n\n      hPosition = hPosition + currentWord.measuredWidth;\n      currentLine.addChild(this.words[i]);\n    }\n\n    //case of empty word at end.\n    if (currentLine.children.length == 0) {\n      currentLine = this.lines[this.lines.length - 1];\n    }\n\n    currentLine.measuredWidth = hPosition;\n    currentLine.measuredHeight = vPosition;\n  }\n\n  lineLayout() {\n    // loop over lines\n    // place into text\n    let measuredHeight = 0;\n    let line;\n    const a = Align;\n    const fnt: Font = FontLoader.getFont(this.font);\n\n    const len = this.lines.length;\n    for (let i = 0; i < len; i++) {\n      line = this.lines[i];\n\n      if (this.original.line) {\n        applyShapeEventListeners(this.original.line, line);\n      }\n\n      //correct measuredWidth if last line character contains tracking\n      if (line.lastWord() != undefined && line.lastWord().lastCharacter()) {\n        line.measuredWidth -= line\n          .lastWord()\n          .lastCharacter()\n          .trackingOffset();\n      }\n\n      measuredHeight += line.measuredHeight;\n      if (this.align === a.TOP_CENTER) {\n        //move to center\n        line.x = (this.width - line.measuredWidth) / 2;\n      } else if (this.align === a.TOP_RIGHT) {\n        //move to right\n        line.x = this.width - line.measuredWidth;\n      } else if (this.align === a.MIDDLE_CENTER) {\n        //move to center\n        line.x = (this.width - line.measuredWidth) / 2;\n      } else if (this.align === a.MIDDLE_RIGHT) {\n        //move to right\n        line.x = this.width - line.measuredWidth;\n      } else if (this.align === a.BOTTOM_CENTER) {\n        //move to center\n        line.x = (this.width - line.measuredWidth) / 2;\n      } else if (this.align === a.BOTTOM_RIGHT) {\n        //move to right\n        line.x = this.width - line.measuredWidth;\n      }\n    }\n\n    //TOP ALIGNED\n    if (\n      this.align === a.TOP_LEFT ||\n      this.align === a.TOP_CENTER ||\n      this.align === a.TOP_RIGHT\n    ) {\n      this.block.y =\n        (this.lines[0].measuredHeight * fnt.ascent) / fnt.units +\n        (this.lines[0].measuredHeight * fnt.top) / fnt.units;\n\n      //MIDDLE ALIGNED\n    } else if (\n      this.align === a.MIDDLE_LEFT ||\n      this.align === a.MIDDLE_CENTER ||\n      this.align === a.MIDDLE_RIGHT\n    ) {\n      this.block.y =\n        this.lines[0].measuredHeight +\n        (this.height - measuredHeight) / 2 +\n        (this.lines[0].measuredHeight * fnt.middle) / fnt.units;\n\n      //BOTTOM ALIGNED\n    } else if (\n      this.align === a.BOTTOM_LEFT ||\n      this.align === a.BOTTOM_CENTER ||\n      this.align === a.BOTTOM_RIGHT\n    ) {\n      this.block.y =\n        this.height -\n        this.lines[this.lines.length - 1].y +\n        (this.lines[0].measuredHeight * fnt.bottom) / fnt.units;\n    }\n\n    if (this.original.block) {\n      applyShapeEventListeners(this.original.block, this.block);\n    }\n  }\n}\n","export enum PathFit {\n  Rainbow,\n  Stairstep\n}\n\nexport interface PathPoint {\n  x: number;\n  y: number;\n  rotation?: number;\n  offsetX?: number;\n}\n\nexport enum PathAlign {\n  Center,\n  Right,\n  Left\n}\n\nexport default class Path {\n  private pathElement: SVGPathElement = null;\n  path: string = null;\n  start = 0;\n  center: number = null;\n  end: number = null;\n  angles: any[] = null;\n  flipped = false;\n  fit: PathFit = PathFit.Rainbow;\n  align: PathAlign = PathAlign.Center;\n  length: number = null;\n  realLength: number = null;\n  closed = false;\n  clockwise = true;\n\n  constructor(\n    path: string,\n    start = 0,\n    end: number = null,\n    flipped = false,\n    fit: PathFit = PathFit.Rainbow,\n    align: PathAlign = PathAlign.Center\n  ) {\n    this.path = path;\n    this.start = start;\n    this.align = align;\n    this.end = end;\n    this.flipped = flipped;\n    this.fit = fit;\n    this.update();\n  }\n\n  update() {\n    this.pathElement = document.createElementNS(\n      \"http://www.w3.org/2000/svg\",\n      \"path\"\n    ) as SVGPathElement;\n    this.pathElement.setAttributeNS(null, \"d\", this.path);\n    this.length = this.pathElement.getTotalLength();\n    this.closed = this.path.toLowerCase().indexOf(\"z\") != -1;\n    const pointlength = this.length / 10;\n    const points = [];\n\n    points.push(this.getRealPathPoint(0));\n    points.push(this.getRealPathPoint(pointlength));\n    points.push(this.getRealPathPoint(pointlength * 2));\n    points.push(this.getRealPathPoint(pointlength * 3));\n    points.push(this.getRealPathPoint(pointlength * 4));\n    points.push(this.getRealPathPoint(pointlength * 5));\n    points.push(this.getRealPathPoint(pointlength * 6));\n    points.push(this.getRealPathPoint(pointlength * 7));\n    points.push(this.getRealPathPoint(pointlength * 8));\n    points.push(this.getRealPathPoint(pointlength * 9));\n    points.push(this.getRealPathPoint(pointlength * 10));\n\n    const clock =\n      (points[1].x - points[0].x) * (points[1].y + points[0].y) +\n      (points[2].x - points[1].x) * (points[2].y + points[1].y) +\n      (points[3].x - points[2].x) * (points[3].y + points[2].y) +\n      (points[4].x - points[3].x) * (points[4].y + points[3].y) +\n      (points[5].x - points[4].x) * (points[5].y + points[4].y) +\n      (points[6].x - points[5].x) * (points[6].y + points[5].y) +\n      (points[7].x - points[6].x) * (points[7].y + points[6].y) +\n      (points[8].x - points[7].x) * (points[8].y + points[7].y) +\n      (points[9].x - points[8].x) * (points[9].y + points[8].y) +\n      (points[10].x - points[9].x) * (points[10].y + points[9].y);\n    if (clock > 0) {\n      this.clockwise = false;\n    } else {\n      this.clockwise = true;\n    }\n\n    if (this.end == null) {\n      this.end = this.length;\n    }\n    if (this.closed == false) {\n      if (this.flipped == false) {\n        if (this.start > this.end) {\n          this.realLength = this.start - this.end;\n          this.center = this.start - this.realLength / 2;\n        } else {\n          this.realLength = this.end - this.start;\n          this.center = this.start + this.realLength / 2;\n        }\n      } else {\n        if (this.start > this.end) {\n          this.realLength = this.start - this.end;\n          this.center = this.start - this.realLength / 2;\n        } else {\n          this.realLength = this.end - this.start;\n          this.center = this.start + this.realLength / 2;\n        }\n      }\n    } else if (this.clockwise == false) {\n      if (this.flipped == false) {\n        if (this.start > this.end) {\n          this.realLength = this.start - this.end;\n          this.center = this.end + this.realLength / 2;\n        } else {\n          this.realLength = this.start + this.length - this.end;\n          this.center = this.end + this.realLength / 2;\n          if (this.center > this.length) {\n            this.center = this.center - this.length;\n          }\n        }\n      } else {\n        if (this.start > this.end) {\n          this.realLength = this.end + this.length - this.start;\n          this.center = this.start + this.realLength / 2;\n          if (this.center > this.length) {\n            this.center = this.center - this.length;\n          }\n        } else {\n          this.realLength = this.end - this.start;\n          this.center = this.start + this.realLength / 2;\n        }\n      }\n    } else {\n      if (this.flipped == false) {\n        if (this.start > this.end) {\n          this.realLength = this.end + this.length - this.start;\n          this.center = this.start + this.realLength / 2;\n          if (this.center > this.length) {\n            this.center = this.center - this.length;\n          }\n        } else {\n          this.realLength = this.end - this.start;\n          this.center = this.start + this.realLength / 2;\n        }\n      } else {\n        if (this.start > this.end) {\n          this.realLength = this.start - this.end;\n          this.center = this.end + this.realLength / 2;\n        } else {\n          this.realLength = this.start + this.length - this.end;\n          this.center = this.end + this.realLength / 2;\n          if (this.center > this.length) {\n            this.center = this.center - this.length;\n          }\n        }\n      }\n    }\n  }\n\n  getRealPathPoint(distance: number): PathPoint {\n    if (distance > this.length) {\n      return this.pathElement.getPointAtLength(distance - this.length);\n    } else if (distance < 0) {\n      return this.pathElement.getPointAtLength(distance + this.length);\n    } else {\n      return this.pathElement.getPointAtLength(distance);\n    }\n  }\n\n  getPathPoint(\n    distance: number,\n    characterLength = 0,\n    charOffset = 0\n  ): PathPoint {\n    distance = distance * 0.99;\n    characterLength = characterLength * 0.99;\n\n    let point1: PathPoint;\n    let point2: PathPoint;\n    let position: number;\n    let direction = true;\n    let realStart = 0;\n\n    if (this.closed == false) {\n      if (this.flipped == false) {\n        if (this.start > this.end) {\n          if (this.align == PathAlign.Left) {\n            realStart = this.start;\n          } else if (this.align == PathAlign.Center) {\n            realStart = this.start - (this.realLength - characterLength) / 2;\n          } else if (this.align == PathAlign.Right) {\n            realStart = this.start - this.realLength - characterLength;\n          }\n          position = realStart - distance;\n          direction = false;\n        } else {\n          if (this.align == PathAlign.Left) {\n            realStart = this.start;\n          } else if (this.align == PathAlign.Center) {\n            realStart = this.start + (this.realLength - characterLength) / 2;\n          } else if (this.align == PathAlign.Right) {\n            realStart = this.start + this.realLength - characterLength;\n          }\n          position = realStart + distance;\n        }\n      } else {\n        if (this.start > this.end) {\n          if (this.align == PathAlign.Left) {\n            realStart = this.start;\n          } else if (this.align == PathAlign.Center) {\n            realStart = this.start - (this.realLength - characterLength) / 2;\n          } else if (this.align == PathAlign.Right) {\n            realStart = this.start - this.realLength - characterLength;\n          }\n          position = realStart - distance;\n          direction = false;\n        } else {\n          if (this.align == PathAlign.Left) {\n            realStart = this.start;\n          } else if (this.align == PathAlign.Center) {\n            realStart = this.start + (this.realLength - characterLength) / 2;\n          } else if (this.align == PathAlign.Right) {\n            realStart = this.start + this.realLength - characterLength;\n          }\n          position = realStart - distance;\n        }\n      }\n    } else if (this.clockwise == false) {\n      if (this.flipped == false) {\n        if (this.start > this.end) {\n          if (this.align == PathAlign.Left) {\n            realStart = this.start;\n          } else if (this.align == PathAlign.Center) {\n            realStart = this.start - (this.realLength - characterLength) / 2;\n          } else if (this.align == PathAlign.Right) {\n            realStart = this.start - this.realLength - characterLength;\n          }\n\n          position = realStart - distance;\n          direction = false;\n        } else {\n          if (this.align == PathAlign.Left) {\n            realStart = this.start;\n            position = realStart - distance;\n          } else if (this.align == PathAlign.Center) {\n            realStart = this.start - (this.realLength - characterLength) / 2;\n            position = realStart - distance;\n          } else if (this.align == PathAlign.Right) {\n            realStart = this.start - this.realLength - characterLength;\n            position = realStart - distance;\n          }\n\n          if (position < 0) {\n            position = position + this.length;\n          }\n          direction = false;\n        }\n      } else {\n        if (this.start > this.end) {\n          if (this.align == PathAlign.Left) {\n            realStart = this.start;\n            position = realStart + distance;\n          } else if (this.align == PathAlign.Center) {\n            realStart = this.start + (this.realLength - characterLength) / 2;\n            position = realStart + distance;\n          } else if (this.align == PathAlign.Right) {\n            realStart = this.start + this.realLength - characterLength;\n            position = realStart + distance;\n          }\n\n          if (position > this.length) {\n            position = position - this.length;\n          }\n        } else {\n          if (this.align == PathAlign.Left) {\n            realStart = this.start;\n          } else if (this.align == PathAlign.Center) {\n            realStart = this.start + (this.realLength - characterLength) / 2;\n          } else if (this.align == PathAlign.Right) {\n            realStart = this.start + this.realLength - characterLength;\n          }\n          position = realStart + distance;\n        }\n      }\n    } else {\n      if (this.flipped == false) {\n        if (this.start > this.end) {\n          if (this.align == PathAlign.Left) {\n            realStart = this.start;\n            position = realStart - distance;\n          } else if (this.align == PathAlign.Center) {\n            realStart = this.start - (this.realLength - characterLength) / 2;\n            position = realStart - distance;\n          } else if (this.align == PathAlign.Right) {\n            realStart = this.start - this.realLength - characterLength;\n            position = realStart - distance;\n          }\n\n          if (position < 0) {\n            position = position + this.length;\n          }\n          direction = false;\n        } else {\n          if (this.align == PathAlign.Left) {\n            realStart = this.start;\n          } else if (this.align == PathAlign.Center) {\n            realStart = this.start - (this.realLength - characterLength) / 2;\n          } else if (this.align == PathAlign.Right) {\n            realStart = this.start - this.realLength - characterLength;\n          }\n          position = realStart - distance;\n          direction = false;\n        }\n      } else {\n        if (this.start > this.end) {\n          if (this.align == PathAlign.Left) {\n            realStart = this.start;\n          } else if (this.align == PathAlign.Center) {\n            realStart = this.start + (this.realLength - characterLength) / 2;\n          } else if (this.align == PathAlign.Right) {\n            realStart = this.start + this.realLength - characterLength;\n          }\n          position = realStart + distance;\n        } else {\n          if (this.align == PathAlign.Left) {\n            realStart = this.start;\n            position = realStart + distance;\n          } else if (this.align == PathAlign.Center) {\n            realStart = this.start + (this.realLength - characterLength) / 2;\n            position = realStart + distance;\n          } else if (this.align == PathAlign.Right) {\n            realStart = this.start + this.realLength - characterLength;\n            position = realStart + distance;\n          }\n\n          if (position > this.length) {\n            position = position - this.length;\n          }\n        }\n      }\n    }\n\n    point1 = this.getRealPathPoint(position);\n    const segment = this.pathElement.pathSegList.getItem(\n      this.pathElement.getPathSegAtLength(position)\n    ).pathSegType;\n\n    if (\n      segment == 4 &&\n      !direction &&\n      this.pathElement.getPathSegAtLength(position) !=\n        this.pathElement.getPathSegAtLength(position - charOffset)\n    ) {\n      const pp0 = this.getRealPathPoint(position);\n      const pp1 = this.getRealPathPoint(position - charOffset);\n      const ppc = this.pathElement.pathSegList.getItem(\n        this.pathElement.getPathSegAtLength(position) - 1\n      );\n      const d0 = Math.sqrt(\n        Math.pow(pp0.x - ppc[\"x\"], 2) + Math.pow(pp0.y - ppc[\"y\"], 2)\n      );\n\n      const d1 = Math.sqrt(\n        Math.pow(pp1.x - ppc[\"x\"], 2) + Math.pow(pp1.y - ppc[\"y\"], 2)\n      );\n\n      if (d0 > d1) {\n        point1 = pp0;\n        point2 = { x: ppc[\"x\"], y: ppc[\"y\"] };\n\n        let rot12 =\n          (Math.atan((point2.y - point1.y) / (point2.x - point1.x)) * 180) /\n          Math.PI;\n        if (point1.x > point2.x) {\n          rot12 = rot12 + 180;\n        }\n\n        if (rot12 < 0) {\n          rot12 = rot12 + 360;\n        }\n        if (rot12 > 360) {\n          rot12 = rot12 - 360;\n        }\n\n        point1.rotation = rot12;\n        return point1;\n      } else {\n        point1 = { x: ppc[\"x\"], y: ppc[\"y\"] };\n        point1.offsetX = -d0;\n        point1[\"next\"] = true;\n        return point1;\n      }\n    }\n\n    if (direction) {\n      point2 = this.getRealPathPoint(position + charOffset);\n    } else {\n      point2 = this.getRealPathPoint(position - charOffset);\n    }\n\n    let rot12 =\n      (Math.atan((point2.y - point1.y) / (point2.x - point1.x)) * 180) /\n      Math.PI;\n\n    if (point1.x > point2.x) {\n      rot12 = rot12 + 180;\n    }\n\n    if (rot12 < 0) {\n      rot12 = rot12 + 360;\n    }\n    if (rot12 > 360) {\n      rot12 = rot12 - 360;\n    }\n\n    point1.rotation = rot12;\n    return point1;\n  }\n}\n","enum VerticalAlign {\n  Top,\n  CapHeight,\n  Center,\n  BaseLine,\n  Bottom,\n  XHeight,\n  Ascent,\n  Percent\n}\n\nexport default VerticalAlign;\n","import TextContainer from \"./TextContainer\";\nimport { ConstructObj } from \"./Interfaces\";\nimport Path, { PathFit, PathAlign } from \"./Path\";\nimport VerticalAlign from \"./VerticalAlign\";\nimport FontLoader from \"./FontLoader\";\nimport Character from \"./Character\";\nimport Font from \"./Font\";\nimport applyShapeEventListeners from \"./utils/apply-shape-event-listeners\";\n\nexport default class PathText extends TextContainer {\n  size = 12;\n  tracking = 0;\n  ligatures = false;\n  minSize: number = null;\n  maxTracking: number = null;\n  fillColor = \"#000\";\n  strokeColor: string = null;\n  strokeWidth: number = null;\n  debug = false;\n  characters: Character[];\n  block: createjs.Container;\n  original: ConstructObj = null;\n  autoExpand = false;\n  autoReduce = false;\n  overset = false;\n  oversetIndex: number = null;\n  pathPoints: Path = null;\n  path = \"\";\n  start = 0;\n  end: number = null;\n  flipped = false;\n  fit: PathFit = PathFit.Rainbow;\n  align: PathAlign = PathAlign.Center;\n  valign: VerticalAlign = VerticalAlign.BaseLine;\n  missingGlyphs: any[] = null;\n  renderCycle = true;\n  valignPercent = 1;\n  initialTracking = 0;\n  initialOffset = 0;\n  measured = false;\n  oversetPotential = false;\n\n  constructor(props: ConstructObj = null) {\n    super();\n\n    if (props) {\n      this.original = props;\n      this.set(props);\n      this.original.tracking = this.tracking;\n    }\n    this.loadFonts();\n    this.pathPoints = new Path(\n      this.path,\n      this.start,\n      this.end,\n      this.flipped,\n      this.fit,\n      this.align\n    );\n  }\n\n  setPath(path: string) {\n    this.path = path;\n    this.pathPoints.path = this.path;\n    this.pathPoints.update();\n  }\n\n  setStart(start: number) {\n    this.start = start;\n    this.pathPoints.start = this.start;\n    this.pathPoints.update();\n  }\n\n  setEnd(end: number) {\n    this.end = end;\n    this.pathPoints.end = this.end;\n    this.pathPoints.update();\n  }\n\n  setFlipped(flipped: boolean) {\n    this.flipped = flipped;\n    this.pathPoints.flipped = this.flipped;\n    this.pathPoints.update();\n  }\n\n  setFit(fit: PathFit = PathFit.Rainbow) {\n    this.fit = fit;\n    this.pathPoints.fit = this.fit;\n    this.pathPoints.update();\n  }\n\n  setAlign(align: PathAlign = PathAlign.Center) {\n    this.align = align;\n    this.pathPoints.align = this.align;\n    this.pathPoints.update();\n  }\n\n  getWidth(): number {\n    return this.pathPoints.realLength;\n  }\n\n  layout() {\n    this.addAccessibility();\n    this.overset = false;\n    this.oversetIndex = null;\n    this.removeAllChildren();\n    this.characters = [];\n    this.missingGlyphs = null;\n    this.measured = false;\n    this.oversetPotential = false;\n    if (this.debug == true) {\n      this.addDebugLayout();\n    }\n\n    if (this.text === \"\" || this.text === undefined) {\n      this.render();\n      return;\n    }\n\n    this.block = new createjs.Container();\n    this.addChild(this.block);\n\n    if (this.autoExpand === true || this.autoReduce === true) {\n      if (this.measure() === false) {\n        this.removeAllChildren();\n        return;\n      }\n    }\n\n    if (this.renderCycle === false) {\n      this.removeAllChildren();\n      this.complete();\n      return;\n    }\n\n    if (this.characterLayout() === false) {\n      this.removeAllChildren();\n      return;\n    }\n    this.render();\n    this.complete();\n  }\n\n  private addDebugLayout() {\n    let s = new createjs.Shape();\n    s.graphics.beginStroke(\"#FF0000\");\n    s.graphics.setStrokeStyle(0.1);\n    s.graphics.decodeSVGPath(this.path);\n    s.graphics.endFill();\n    s.graphics.endStroke();\n    this.addChild(s);\n    s = new createjs.Shape();\n    let pp = this.pathPoints.getRealPathPoint(0);\n    s.x = pp.x;\n    s.y = pp.y;\n    s.graphics.beginFill(\"black\");\n    s.graphics.drawCircle(0, 0, 2);\n    this.addChild(s);\n    s = new createjs.Shape();\n    pp = this.pathPoints.getRealPathPoint(this.pathPoints.start);\n    s.x = pp.x;\n    s.y = pp.y;\n    s.graphics.beginFill(\"green\");\n    s.graphics.drawCircle(0, 0, 2);\n    this.addChild(s);\n    s = new createjs.Shape();\n    pp = this.pathPoints.getRealPathPoint(this.pathPoints.end);\n    s.x = pp.x;\n    s.y = pp.y;\n    s.graphics.beginFill(\"red\");\n    s.graphics.drawCircle(0, 0, 2);\n    this.addChild(s);\n    s = new createjs.Shape();\n    pp = this.pathPoints.getRealPathPoint(this.pathPoints.center);\n    s.x = pp.x;\n    s.y = pp.y;\n    s.graphics.beginFill(\"blue\");\n    s.graphics.drawCircle(0, 0, 2);\n    this.addChild(s);\n  }\n\n  measure(): boolean {\n    this.measured = true;\n    //Extract orgin sizing from this.original to preserve\n    //metrics. autoMeasure will change style properties\n    //directly. Change this.original to rerender.\n\n    let len = this.text.length;\n    const width = this.getWidth();\n    const defaultStyle = {\n      size: this.original.size,\n      font: this.original.font,\n      tracking: this.original.tracking,\n      characterCase: this.original.characterCase\n    };\n    let currentStyle: any;\n    let charCode: number = null;\n    let font: Font;\n    const charMetrics = [];\n    let largestFontSize = defaultStyle.size;\n    for (let i = 0; i < len; i++) {\n      charCode = this.text.charCodeAt(i);\n\n      currentStyle = defaultStyle;\n      if (\n        this.original.style !== undefined &&\n        this.original.style[i] !== undefined\n      ) {\n        currentStyle = this.original.style[i];\n        // make sure style contains properties needed.\n        if (currentStyle.size === undefined)\n          currentStyle.size = defaultStyle.size;\n        if (currentStyle.font === undefined)\n          currentStyle.font = defaultStyle.font;\n        if (currentStyle.tracking === undefined)\n          currentStyle.tracking = defaultStyle.tracking;\n      }\n      if (currentStyle.size > largestFontSize) {\n        largestFontSize = currentStyle.size;\n      }\n      font = FontLoader.fonts[currentStyle.font];\n      charMetrics.push({\n        char: this.text[i],\n        size: currentStyle.size,\n        charCode: charCode,\n        font: currentStyle.font,\n        offset: font.glyphs[charCode].offset,\n        units: font.units,\n        tracking: this.trackingOffset(\n          currentStyle.tracking,\n          currentStyle.size,\n          font.units\n        ),\n        kerning: font.glyphs[charCode].getKerning(this.getCharCodeAt(i + 1), 1)\n      });\n    }\n\n    //save space char using last known width/height\n    const space: any = {\n      char: \" \",\n      size: currentStyle.size,\n      charCode: 32,\n      font: currentStyle.font,\n      offset: font.glyphs[32].offset,\n      units: font.units,\n      tracking: 0,\n      kerning: 0\n    };\n\n    charMetrics[charMetrics.length - 1].tracking = 0;\n    //charMetrics[ charMetrics.length-1 ].kerning=0;\n\n    len = charMetrics.length;\n\n    //measured without size\n    let metricBaseWidth = 0;\n    //measured at size\n    let metricRealWidth = 0;\n    //measured at size with tracking\n    let metricRealWidthTracking = 0;\n\n    let current = null;\n    for (let i = 0; i < len; i++) {\n      current = charMetrics[i];\n      metricBaseWidth = metricBaseWidth + current.offset + current.kerning;\n      metricRealWidth =\n        metricRealWidth + (current.offset + current.kerning) * current.size;\n      metricRealWidthTracking =\n        metricRealWidthTracking +\n        (current.offset + current.kerning + current.tracking) * current.size;\n    }\n\n    //size cases\n    if (metricRealWidth > width) {\n      if (this.autoReduce === true) {\n        this.tracking = 0;\n        this.size =\n          (this.original.size * width) /\n          (metricRealWidth + space.offset * space.size);\n        if (this.minSize != null && this.size < this.minSize) {\n          this.size = this.minSize;\n          if (this.renderCycle === false) {\n            this.overset = true;\n          } else {\n            this.oversetPotential = true;\n          }\n        }\n        return true;\n      }\n      //tracking cases\n    } else {\n      let trackMetric = this.offsetTracking(\n        (width - metricRealWidth) / len,\n        current.size,\n        current.units\n      );\n      if (trackMetric < 0) {\n        trackMetric = 0;\n      }\n      //autoexpand case\n      if (trackMetric > this.original.tracking && this.autoExpand) {\n        if (this.maxTracking != null && trackMetric > this.maxTracking) {\n          this.tracking = this.maxTracking;\n        } else {\n          this.tracking = trackMetric;\n        }\n        this.size = this.original.size;\n        return true;\n      }\n      //autoreduce tracking case\n      if (trackMetric < this.original.tracking && this.autoReduce) {\n        if (this.maxTracking != null && trackMetric > this.maxTracking) {\n          this.tracking = this.maxTracking;\n        } else {\n          this.tracking = trackMetric;\n        }\n        this.size = this.original.size;\n        return true;\n      }\n    }\n    return true;\n  }\n\n  //place characters in words\n  characterLayout(): boolean {\n    //char layout\n    let len = this.text.length;\n    let char: Character;\n    const defaultStyle = {\n      size: this.size,\n      font: this.font,\n      tracking: this.tracking,\n      characterCase: this.characterCase,\n      fillColor: this.fillColor,\n      strokeColor: this.strokeColor,\n      strokeWidth: this.strokeWidth\n    };\n    let currentStyle = defaultStyle;\n    let hPosition = 0;\n\n    // loop over characters\n    // place into lines\n    for (let i = 0; i < len; i++) {\n      if (this.style !== null && this.style[i] !== undefined) {\n        currentStyle = this.style[i];\n        // make sure style contains properties needed.\n        if (currentStyle.size === undefined)\n          currentStyle.size = defaultStyle.size;\n        if (currentStyle.font === undefined)\n          currentStyle.font = defaultStyle.font;\n        if (currentStyle.tracking === undefined)\n          currentStyle.tracking = defaultStyle.tracking;\n        if (currentStyle.characterCase === undefined)\n          currentStyle.characterCase = defaultStyle.characterCase;\n        if (currentStyle.fillColor === undefined)\n          currentStyle.fillColor = defaultStyle.fillColor;\n        if (currentStyle.strokeColor === undefined)\n          currentStyle.strokeColor = defaultStyle.strokeColor;\n        if (currentStyle.strokeWidth === undefined)\n          currentStyle.strokeWidth = defaultStyle.strokeWidth;\n      }\n\n      // newline\n      if (this.text.charAt(i) == \"\\n\") {\n        continue;\n      }\n\n      //runtime test for font\n      if (FontLoader.isLoaded(currentStyle.font) === false) {\n        FontLoader.load(this, [currentStyle.font]);\n        return false;\n      }\n\n      //initalize with initialTracking and initialOffset;\n      if (hPosition == 0) {\n        hPosition =\n          this.initialOffset +\n          this.trackingOffset(\n            this.initialTracking,\n            currentStyle.size,\n            FontLoader.getFont(currentStyle.font).units\n          );\n      }\n\n      // create character\n      char = new Character(this.text.charAt(i), currentStyle, i);\n      if (this.original.character) {\n        applyShapeEventListeners(this.original.character, char);\n      }\n\n      if (char.missing) {\n        if (this.missingGlyphs == null) {\n          this.missingGlyphs = [];\n        }\n        this.missingGlyphs.push({\n          position: i,\n          character: this.text.charAt(i),\n          font: currentStyle.font\n        });\n      }\n\n      //swap character if ligature\n      //ligatures removed if tracking or this.ligatures is false\n      if (currentStyle.tracking == 0 && this.ligatures == true) {\n        //1 char match\n        const ligTarget = this.text.substr(i, 4);\n        if (char._font.ligatures[ligTarget.charAt(0)]) {\n          //2 char match\n          if (char._font.ligatures[ligTarget.charAt(0)][ligTarget.charAt(1)]) {\n            //3 char match\n            if (\n              char._font.ligatures[ligTarget.charAt(0)][ligTarget.charAt(1)][\n                ligTarget.charAt(2)\n              ]\n            ) {\n              //4 char match\n              if (\n                char._font.ligatures[ligTarget.charAt(0)][ligTarget.charAt(1)][\n                  ligTarget.charAt(2)\n                ][ligTarget.charAt(3)]\n              ) {\n                //swap 4 char ligature\n                char.setGlyph(\n                  char._font.ligatures[ligTarget.charAt(0)][\n                    ligTarget.charAt(1)\n                  ][ligTarget.charAt(2)][ligTarget.charAt(3)].glyph\n                );\n                i = i + 3;\n              } else {\n                //swap 3 char ligature\n                char.setGlyph(\n                  char._font.ligatures[ligTarget.charAt(0)][\n                    ligTarget.charAt(1)\n                  ][ligTarget.charAt(2)].glyph\n                );\n                i = i + 2;\n              }\n            } else {\n              //swap 2 char ligature\n              char.setGlyph(\n                char._font.ligatures[ligTarget.charAt(0)][ligTarget.charAt(1)]\n                  .glyph\n              );\n              i = i + 1;\n            }\n          }\n        }\n      }\n\n      //char.hPosition = hPosition;\n\n      // push character into block\n      //this.characters.push( char );\n      //this.block.addChild( char );\n\n      if (this.overset == true) {\n        break;\n      } else if (\n        this.measured == true &&\n        hPosition + char.measuredWidth > this.getWidth() &&\n        this.oversetPotential == true\n      ) {\n        //char.hPosition = hPosition;\n        //this.characters.push( char );\n        //this.block.addChild( char );\n\n        //this.block.removeChild(this.characters.pop() );\n        this.oversetIndex = i;\n        this.overset = true;\n        break;\n      } else if (\n        this.measured == false &&\n        hPosition + char.measuredWidth > this.getWidth()\n      ) {\n        //char.hPosition = hPosition;\n        //this.characters.push( char );\n        //this.block.addChild( char );\n\n        //this.block.removeChild(this.characters.pop() );\n        this.oversetIndex = i;\n        this.overset = true;\n        break;\n      } else {\n        char.hPosition = hPosition;\n        this.characters.push(char);\n        this.block.addChild(char);\n      }\n\n      //char.x = hPosition;\n      hPosition =\n        hPosition +\n        char._glyph.offset * char.size +\n        char.characterCaseOffset +\n        char.trackingOffset() +\n        char._glyph.getKerning(this.getCharCodeAt(i + 1), char.size);\n    }\n\n    len = this.characters.length;\n    let pathPoint: any;\n    let nextRotation = false;\n    for (let i = 0; i < len; i++) {\n      char = this.characters[i] as Character;\n      pathPoint = this.pathPoints.getPathPoint(\n        char.hPosition,\n        hPosition,\n        char._glyph.offset * char.size\n      );\n      //correct rotation around linesegments\n      if (nextRotation == true) {\n        this.characters[i - 1].parent.rotation = pathPoint.rotation;\n        nextRotation = false;\n      }\n      if (pathPoint.next == true) {\n        nextRotation = true;\n      }\n\n      char.rotation = pathPoint.rotation;\n\n      //Baseline\n      if (this.valign == VerticalAlign.BaseLine) {\n        char.x = pathPoint.x;\n        char.y = pathPoint.y;\n\n        //reparent child into offset container\n        if (pathPoint.offsetX) {\n          const offsetChild = new createjs.Container();\n          offsetChild.x = pathPoint.x;\n          offsetChild.y = pathPoint.y;\n          offsetChild.rotation = pathPoint.rotation;\n          char.parent.removeChild(char);\n          offsetChild.addChild(char);\n          char.x = pathPoint.offsetX;\n          char.y = 0;\n          char.rotation = 0;\n          this.addChild(offsetChild);\n        } else {\n          char.x = pathPoint.x;\n          char.y = pathPoint.y;\n          char.rotation = pathPoint.rotation;\n        }\n      } else {\n        const offsetChild = new createjs.Container();\n        offsetChild.x = pathPoint.x;\n        offsetChild.y = pathPoint.y;\n        offsetChild.rotation = pathPoint.rotation;\n        char.parent.removeChild(char);\n        offsetChild.addChild(char);\n        char.x = 0;\n\n        //vertical alignment\n        if (this.valign == VerticalAlign.Top) {\n          char.y = char.size;\n        } else if (this.valign == VerticalAlign.Bottom) {\n          char.y = (char._font.descent / char._font.units) * char.size;\n        } else if (this.valign == VerticalAlign.CapHeight) {\n          char.y = (char._font[\"cap-height\"] / char._font.units) * char.size;\n        } else if (this.valign == VerticalAlign.XHeight) {\n          char.y = (char._font[\"x-height\"] / char._font.units) * char.size;\n        } else if (this.valign == VerticalAlign.Ascent) {\n          char.y = (char._font.ascent / char._font.units) * char.size;\n        } else if (this.valign == VerticalAlign.Center) {\n          char.y =\n            ((char._font[\"cap-height\"] / char._font.units) * char.size) / 2;\n        } else if (this.valign == VerticalAlign.Percent) {\n          char.y = this.valignPercent * char.size;\n        } else {\n          char.y = 0;\n        }\n        char.rotation = 0;\n        this.addChild(offsetChild);\n      }\n    }\n\n    if (this.original.block) {\n      applyShapeEventListeners(this.original.block, this.block);\n    }\n\n    return true;\n  }\n\n  trackingOffset(tracking: number, size: number, units: number): number {\n    return size * (2.5 / units + 1 / 900 + tracking / 990);\n  }\n\n  offsetTracking(offset: number, size: number, units: number): number {\n    return Math.floor(((offset - 2.5 / units - 1 / 900) * 990) / size);\n  }\n}\n","import \"./GraphicsMixin\";\n\nexport { default as Accessibility } from \"./Accessibility\";\nexport { default as Align } from \"./Align\";\nexport { default as Case } from \"./Case\";\nexport { default as Character } from \"./Character\";\nexport { default as CharacterText } from \"./CharacterText\";\nexport { default as Font } from \"./Font\";\nexport { default as FontLoader } from \"./FontLoader\";\nexport { default as Glyph } from \"./Glyph\";\nexport { default as Graphics } from \"./Graphics\";\nexport { default as Info } from \"./Info\";\nexport { default as Line } from \"./Line\";\nexport { default as Text } from \"./Text\";\nexport { default as Path, PathAlign, PathFit } from \"./Path\";\nexport { default as PathText } from \"./PathText\";\nexport { default as VerticalAlign } from \"./VerticalAlign\";\nexport { default as Word } from \"./Word\";\n\nimport copyEventListeners from \"./utils/apply-shape-event-listeners\";\n\nexport const Util = {\n  copyEventListeners\n};\n"],"names":["SVGArc","v","Math","sqrt","pow","u","dot","mag","angle","cost","cos","sint","sin","c","sign","acos","ratio","x1","rx","ry","phiarg","fA","fS","x2","phi","PI","abs","xPrime","rotClockwise","midPoint","xPrime2","pointMul","rx2","ry2","lambda","t","b","factor","cPrime","scale","sum","rotCounterClockwise","meanVec","x1UnitVector","x2UnitVector","theta","deltaTheta","isNaN","start","end","cx","cy","ctx","lineTo","translate","rotate","arc","parsePathData","data","cs","cc","replace","RegExp","n","length","arr","split","ca","cpx","cpy","arrLength","startPoint","str","charAt","slice","p","shift","pLength","i","parseFloat","cmd","points","startX","startY","prevCmd","ctlPtx","ctlPty","psi","fa","fs","y1","dx","dy","push","command","x","y","Graphics","target","svgpath","G","createjs","append","LineTo","MoveTo","BezierCurveTo","QuadraticCurveTo","ClosePath","applyMixins","derivedCtor","baseCtors","forEach","baseCtor","Object","getOwnPropertyNames","prototype","name","defineProperty","getOwnPropertyDescriptor","GraphicsMixin","init","Accessibility","element","stage","timeout","clearTimeout","accessibilityId","setTimeout","update","sort","a","accessibilityPriority","len","out","currentCanvas","canvas","innerHTML","accessibilityText","text","Align","Case","Font","from","glyphs","undefined","kerning","Glyph","_graphic","_stroke","Stroke","_strokeStyle","StrokeStyle","_fill","Fill","decodeSVGPath","path","draw","characterCode","size","FontLoader","fonts","hasOwnProperty","loaded","loader","loaderId","loaders","_id","_target","fontCount","prop","loadFont","id","isLoaded","window","fontLoaded","fontName","check","targets","font","req","XMLHttpRequest","localStorage","cache","local","JSON","parse","getItem","join","version","cacheResponseText","cacheFont","onload","setItem","stringify","responseText","lines","line","glyph","lineLen","parseInt","offset","units","j","pathLength","ligatures","k","cloneGlyph","top","middle","bottom","lLen","l","open","send","Character","character","style","index","set","upperSmall","characterCase","NORMAL","UPPER","toUpperCase","LOWER","toLowerCase","SMALL_CAPS","charCodeAt","_font","getFont","_glyph","String","fromCharCode","console","log","missing","graphics","graphic","scaleX","characterCaseOffset","scaleY","measuredHeight","ascent","descent","measuredWidth","ha","Shape","beginFill","drawRect","hitArea","tracking","fillColor","matrix","strokeColor","width","strokeWidth","TextContainer","concat","fontsFromCharacterStyles","load","layout","styles","styleFonts","Container","Line","children","EventNames","original","shape","eventName","on","CharacterText","props","TOP_LEFT","loadFonts","addAccessibility","overset","measured","oversetPotential","singleLine","missingGlyphs","removeAllChildren","render","complete","block","addChild","debug","addDebugLayout","autoExpand","autoReduce","measure","renderCycle","characterLayout","lineLayout","s","beginStroke","setStrokeStyle","height","defaultStyle","currentStyle","charCode","charMetrics","largestFontSize","trackingOffset","getKerning","getCharCodeAt","space","metricBaseWidth","metricRealWidth","metricRealWidthTracking","current","minSize","trackMetric","offsetTracking","maxTracking","floor","char","hPosition","vPosition","lineY","firstLine","currentLine","lineHeight","applyShapeEventListeners","position","ligTarget","substr","setGlyph","lastchar","oversetIndex","fnt","lastCharacter","align","TOP_CENTER","TOP_RIGHT","MIDDLE_CENTER","MIDDLE_RIGHT","BOTTOM_CENTER","BOTTOM_RIGHT","MIDDLE_LEFT","BOTTOM_LEFT","Info","Word","Text","Rectangle","words","wordLayout","currentWord","hasNewLine","hasSpace","spaceOffset","hasHyphen","lastHeight","lastLineWord","word","swapWord","lastWord","PathFit","PathAlign","Path","flipped","fit","Rainbow","Center","pathElement","document","createElementNS","setAttributeNS","getTotalLength","closed","indexOf","pointlength","getRealPathPoint","clock","clockwise","realLength","center","distance","getPointAtLength","characterLength","charOffset","point1","point2","direction","realStart","Left","Right","segment","pathSegList","getPathSegAtLength","pathSegType","pp0","pp1","ppc","d0","d1","rot12","atan","rotation","offsetX","VerticalAlign","PathText","BaseLine","pathPoints","characters","endFill","endStroke","pp","drawCircle","getWidth","initialOffset","initialTracking","pathPoint","nextRotation","getPathPoint","parent","next","valign","offsetChild","removeChild","Top","Bottom","CapHeight","XHeight","Ascent","Percent","valignPercent","Util","copyEventListeners"],"mappings":"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"}