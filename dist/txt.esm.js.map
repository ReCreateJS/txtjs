{"version":3,"file":"txt.esm.js","sources":["../src/SVGArc.ts","../src/SVGPath.ts","../src/Graphics.ts","../src/applyMixins.ts","../src/GraphicsMixin.ts","../src/Accessibility.ts","../src/Align.ts","../src/Case.ts","../src/Font.ts","../src/Glyph.ts","../src/FontLoader.ts","../src/Character.ts","../src/Line.ts","../src/CharacterText.ts","../src/Info.ts","../src/Word.ts","../src/Text.ts","../src/Path.ts","../src/VerticalAlign.ts","../src/PathText.ts"],"sourcesContent":["export default class SVGArc {\n  r0: number;\n  r1: number;\n  cx: number;\n  cy: number;\n  phi: number;\n  rx: number;\n  ry: number;\n  start: number;\n  end: number;\n  fS: boolean;\n  x2: number[];\n\n  mag(v) {\n    return Math.sqrt(Math.pow(v[0], 2) + Math.pow(v[1], 2));\n  }\n\n  meanVec(u, v) {\n    return [(u[0] + v[0]) / 2.0, (u[1] + v[1]) / 2.0];\n  }\n\n  dot(u, v) {\n    return u[0] * v[0] + u[1] * v[1];\n  }\n\n  ratio(u, v) {\n    return this.dot(u, v) / (this.mag(u) * this.mag(v));\n  }\n\n  rotClockwise(v, angle) {\n    var cost = Math.cos(angle);\n    var sint = Math.sin(angle);\n    return [cost * v[0] + sint * v[1], -1 * sint * v[0] + cost * v[1]];\n  }\n\n  pointMul(u, v) {\n    return [u[0] * v[0], u[1] * v[1]];\n  }\n\n  scale(c, v) {\n    return [c * v[0], c * v[1]];\n  }\n\n  sum(u, v) {\n    return [u[0] + v[0], u[1] + v[1]];\n  }\n\n  angle(u, v) {\n    var sign = 1.0;\n    if (u[0] * v[1] - u[1] * v[0] < 0) {\n      sign = -1.0;\n    }\n    return sign * Math.acos(this.ratio(u, v));\n  }\n\n  rotCounterClockwise(v, angle) {\n    var cost = Math.cos(angle);\n    var sint = Math.sin(angle);\n    return [cost * v[0] - sint * v[1], sint * v[0] + cost * v[1]];\n  }\n\n  midPoint(u, v) {\n    return [(u[0] - v[0]) / 2.0, (u[1] - v[1]) / 2.0];\n  }\n\n  constructor(\n    x1: number[],\n    rx: number,\n    ry: number,\n    phi: number,\n    fA: boolean,\n    fS: boolean,\n    x2: number[]\n  ) {\n    this.rx = rx;\n    this.ry = ry;\n    this.x2 = x2;\n    if (rx == 0 || ry == 0) {\n      return;\n    }\n    var phi = phi * (Math.PI / 180.0);\n    rx = Math.abs(rx);\n    ry = Math.abs(ry);\n    var xPrime = this.rotClockwise(this.midPoint(x1, x2), phi); // F.6.5.1\n    var xPrime2 = this.pointMul(xPrime, xPrime);\n    var rx2 = Math.pow(rx, 2);\n    var ry2 = Math.pow(ry, 2);\n\n    var lambda = Math.sqrt(xPrime2[0] / rx2 + xPrime2[1] / ry2);\n    if (lambda > 1) {\n      rx *= lambda;\n      ry *= lambda;\n      rx2 = Math.pow(rx, 2);\n      ry2 = Math.pow(ry, 2);\n    }\n    var t = rx2 * ry2 - rx2 * xPrime2[1] - ry2 * xPrime2[0];\n    if (t > -0.000001 && t < 0.000001) {\n      t = 0;\n    }\n    var b = rx2 * xPrime2[1] + ry2 * xPrime2[0];\n    if (b > -0.000001 && b < 0.000001) {\n      b = 0;\n    }\n    var factor = Math.sqrt(t / b);\n    if (fA == fS) {\n      factor *= -1.0;\n    }\n    var cPrime = this.scale(factor, [\n      (rx * xPrime[1]) / ry,\n      (-ry * xPrime[0]) / rx\n    ]);\n    var c = this.sum(\n      this.rotCounterClockwise(cPrime, phi),\n      this.meanVec(x1, x2)\n    );\n    var x1UnitVector = [\n      (xPrime[0] - cPrime[0]) / rx,\n      (xPrime[1] - cPrime[1]) / ry\n    ];\n    var x2UnitVector = [\n      (-1.0 * xPrime[0] - cPrime[0]) / rx,\n      (-1.0 * xPrime[1] - cPrime[1]) / ry\n    ];\n    var theta = this.angle([1, 0], x1UnitVector);\n    var deltaTheta = this.angle(x1UnitVector, x2UnitVector);\n    if (isNaN(deltaTheta)) {\n      deltaTheta = Math.PI;\n    }\n    var start = theta;\n    var end = theta + deltaTheta;\n    this.cx = c[0];\n    this.cy = c[1];\n    this.phi = phi;\n    this.rx = rx;\n    this.ry = ry;\n    this.start = start;\n    this.end = end;\n    this.fS = !fS;\n  }\n\n  exec(ctx: CanvasRenderingContext2D) {\n    if (this.rx == 0 || this.ry == 0) {\n      ctx.lineTo(this.x2[0], this.x2[1]);\n      return;\n    }\n    ctx.translate(this.cx, this.cy);\n    ctx.rotate(this.phi);\n    ctx.scale(this.rx, this.ry);\n    ctx.arc(0, 0, 1, this.start, this.end, this.fS);\n    ctx.scale(1 / this.rx, 1 / this.ry);\n    ctx.rotate(-this.phi);\n    ctx.translate(-this.cx, -this.cy);\n  }\n}\n","export function parsePathData(data) {\n  if (!data) {\n    return [];\n  }\n  var cs = data;\n  var cc = [\n    \"m\",\n    \"M\",\n    \"l\",\n    \"L\",\n    \"v\",\n    \"V\",\n    \"h\",\n    \"H\",\n    \"z\",\n    \"Z\",\n    \"c\",\n    \"C\",\n    \"q\",\n    \"Q\",\n    \"t\",\n    \"T\",\n    \"s\",\n    \"S\",\n    \"a\",\n    \"A\"\n  ];\n  cs = cs.replace(new RegExp(\" \", \"g\"), \",\");\n  for (var n = 0; n < cc.length; n++) {\n    cs = cs.replace(new RegExp(cc[n], \"g\"), \"|\" + cc[n]);\n  }\n  var arr = cs.split(\"|\");\n  var ca = [];\n  var cpx = 0;\n  var cpy = 0;\n  var arrLength = arr.length;\n  var startPoint = null;\n  for (n = 1; n < arrLength; n++) {\n    var str = arr[n];\n    var c = str.charAt(0);\n    str = str.slice(1);\n    str = str.replace(new RegExp(\",-\", \"g\"), \"-\");\n    str = str.replace(new RegExp(\"-\", \"g\"), \",-\");\n    str = str.replace(new RegExp(\"e,-\", \"g\"), \"e-\");\n    var p = str.split(\",\");\n    if (p.length > 0 && p[0] === \"\") {\n      p.shift();\n    }\n    var pLength = p.length;\n    for (var i = 0; i < pLength; i++) {\n      p[i] = parseFloat(p[i]);\n    }\n    if (c === \"z\" || c === \"Z\") {\n      p = [true];\n    }\n\n    while (p.length > 0) {\n      if (isNaN(p[0])) {\n        break;\n      }\n      var cmd = null;\n      var points = [];\n      var startX = cpx,\n        startY = cpy;\n      var prevCmd, ctlPtx, ctlPty;\n      var rx, ry, psi, fa, fs, x1, y1;\n\n      switch (c) {\n        case \"l\":\n          cpx += p.shift();\n          cpy += p.shift();\n          cmd = \"L\";\n          points.push(cpx, cpy);\n          break;\n\n        case \"L\":\n          cpx = p.shift();\n          cpy = p.shift();\n          points.push(cpx, cpy);\n          break;\n\n        case \"m\":\n          var dx = p.shift();\n          var dy = p.shift();\n          cpx += dx;\n          cpy += dy;\n          if (startPoint == null) {\n            startPoint = [cpx, cpy];\n          }\n          cmd = \"M\";\n          points.push(cpx, cpy);\n          c = \"l\";\n          break;\n\n        case \"M\":\n          cpx = p.shift();\n          cpy = p.shift();\n          cmd = \"M\";\n          if (startPoint == null) {\n            startPoint = [cpx, cpy];\n          }\n          points.push(cpx, cpy);\n          c = \"L\";\n          break;\n\n        case \"h\":\n          cpx += p.shift();\n          cmd = \"L\";\n          points.push(cpx, cpy);\n          break;\n\n        case \"H\":\n          cpx = p.shift();\n          cmd = \"L\";\n          points.push(cpx, cpy);\n          break;\n\n        case \"v\":\n          cpy += p.shift();\n          cmd = \"L\";\n          points.push(cpx, cpy);\n          break;\n\n        case \"V\":\n          cpy = p.shift();\n          cmd = \"L\";\n          points.push(cpx, cpy);\n          break;\n\n        case \"C\":\n          points.push(p.shift(), p.shift(), p.shift(), p.shift());\n          cpx = p.shift();\n          cpy = p.shift();\n          points.push(cpx, cpy);\n          break;\n\n        case \"c\":\n          points.push(\n            cpx + p.shift(),\n            cpy + p.shift(),\n            cpx + p.shift(),\n            cpy + p.shift()\n          );\n          cpx += p.shift();\n          cpy += p.shift();\n          cmd = \"C\";\n          points.push(cpx, cpy);\n          break;\n\n        case \"S\":\n          ctlPtx = cpx;\n          ctlPty = cpy;\n          prevCmd = ca[ca.length - 1];\n          if (prevCmd.command === \"C\") {\n            ctlPtx = cpx + (cpx - prevCmd.points[2]);\n            ctlPty = cpy + (cpy - prevCmd.points[3]);\n          }\n          points.push(ctlPtx, ctlPty, p.shift(), p.shift());\n          cpx = p.shift();\n          cpy = p.shift();\n          cmd = \"C\";\n          points.push(cpx, cpy);\n          break;\n\n        case \"s\":\n          ctlPtx = cpx;\n          ctlPty = cpy;\n          prevCmd = ca[ca.length - 1];\n          if (prevCmd.command === \"C\") {\n            ctlPtx = cpx + (cpx - prevCmd.points[2]);\n            ctlPty = cpy + (cpy - prevCmd.points[3]);\n          }\n          points.push(ctlPtx, ctlPty, cpx + p.shift(), cpy + p.shift());\n          cpx += p.shift();\n          cpy += p.shift();\n          cmd = \"C\";\n          points.push(cpx, cpy);\n          break;\n\n        case \"Q\":\n          points.push(p.shift(), p.shift());\n          cpx = p.shift();\n          cpy = p.shift();\n          points.push(cpx, cpy);\n          break;\n\n        case \"q\":\n          points.push(cpx + p.shift(), cpy + p.shift());\n          cpx += p.shift();\n          cpy += p.shift();\n          cmd = \"Q\";\n          points.push(cpx, cpy);\n          break;\n\n        case \"T\":\n          ctlPtx = cpx;\n          ctlPty = cpy;\n          prevCmd = ca[ca.length - 1];\n          if (prevCmd.command === \"Q\") {\n            ctlPtx = cpx + (cpx - prevCmd.points[0]);\n            ctlPty = cpy + (cpy - prevCmd.points[1]);\n          }\n          cpx = p.shift();\n          cpy = p.shift();\n          cmd = \"Q\";\n          points.push(ctlPtx, ctlPty, cpx, cpy);\n          break;\n\n        case \"t\":\n          ctlPtx = cpx;\n          ctlPty = cpy;\n          prevCmd = ca[ca.length - 1];\n          if (prevCmd.command === \"Q\") {\n            ctlPtx = cpx + (cpx - prevCmd.points[0]);\n            ctlPty = cpy + (cpy - prevCmd.points[1]);\n          }\n          cpx += p.shift();\n          cpy += p.shift();\n          cmd = \"Q\";\n          points.push(ctlPtx, ctlPty, cpx, cpy);\n          break;\n\n        case \"A\":\n          rx = p.shift();\n          ry = p.shift();\n          psi = p.shift();\n          fa = p.shift();\n          fs = p.shift();\n          x1 = cpx;\n          y1 = cpy;\n          cpx = p.shift();\n          cpy = p.shift();\n          cmd = \"A\";\n          points = [[x1, y1], rx, ry, psi, fa, fs, [cpx, cpy]];\n          break;\n\n        case \"a\":\n          rx = p.shift();\n          ry = p.shift();\n          psi = p.shift();\n          fa = p.shift();\n          fs = p.shift();\n          x1 = cpx;\n          y1 = cpy;\n          cpx += p.shift();\n          cpy += p.shift();\n          cmd = \"A\";\n          points = [[x1, y1], rx, ry, psi, fa, fs, [cpx, cpy]];\n          break;\n\n        case \"z\":\n          cmd = \"Z\";\n          if (startPoint) {\n            cpx = startPoint[0];\n            cpy = startPoint[1];\n            startPoint = null;\n          } else {\n            cpx = 0;\n            cpy = 0;\n          }\n          p.shift();\n          points = [cpx, cpy];\n          break;\n\n        case \"Z\":\n          cmd = \"Z\";\n          if (startPoint) {\n            cpx = startPoint[0];\n            cpy = startPoint[1];\n            startPoint = null;\n          } else {\n            cpx = 0;\n            cpy = 0;\n          }\n          p.shift();\n          points = [cpx, cpy];\n          break;\n      }\n\n      ca.push({\n        command: cmd || c,\n        points: points,\n        start: {\n          x: startX,\n          y: startY\n        }\n      });\n    }\n  }\n  return ca;\n}\n","import SVGArc from \"./SVGArc\";\nimport { parsePathData } from \"./SVGPath\";\n\nexport default class Graphics {\n  /**\n   * Build up createjs Graphics commands based on path data.\n   */\n  static init(target, svgpath: string) {\n    var ca = parsePathData(svgpath);\n    var G = createjs.Graphics;\n\n    for (var n = 0; n < ca.length; n++) {\n      var c = ca[n].command;\n      var p = ca[n].points;\n      switch (c) {\n        case \"L\":\n          target.append(new G.LineTo(p[0], p[1]));\n          break;\n\n        case \"M\":\n          target.append(new G.MoveTo(p[0], p[1]));\n          break;\n\n        case \"C\":\n          target.append(\n            new G.BezierCurveTo(p[0], p[1], p[2], p[3], p[4], p[5])\n          );\n          break;\n\n        case \"Q\":\n          target.append(new G.QuadraticCurveTo(p[0], p[1], p[2], p[3]));\n          break;\n\n        case \"A\":\n          target.append(new SVGArc(p[0], p[1], p[2], p[3], p[4], p[5], p[6]));\n          break;\n\n        case \"Z\":\n          target.append(new G.ClosePath());\n          target.append(new G.MoveTo(p[0], p[1]));\n          break;\n      }\n    }\n  }\n}\n","export default function applyMixins(derivedCtor: any, baseCtors: any[]) {\n  baseCtors.forEach(baseCtor => {\n    Object.getOwnPropertyNames(baseCtor.prototype).forEach(name => {\n      Object.defineProperty(\n        derivedCtor.prototype,\n        name,\n        Object.getOwnPropertyDescriptor(baseCtor.prototype, name)\n      );\n    });\n  });\n}\n","import Graphics from \"./Graphics\";\nimport applyMixins from \"./applyMixins\";\n\nclass GraphicsMixin {\n  /**\n   * decodeSVGPath intended for createjs.Graphics class\n   */\n  decodeSVGPath(data: string) {\n    Graphics.init(this, data);\n    return this;\n  }\n}\n\napplyMixins(createjs.Graphics, [GraphicsMixin]);\n\ndeclare global {\n  namespace createjs {\n    interface Graphics {\n      decodeSVGPath(data: string): Graphics;\n    }\n  }\n}\n","export default class Accessibility {\n  static data: any = [];\n\n  static timeout: any = null;\n\n  static set(element: any) {\n    //if an element is not on canvas, do not place into accessibility api\n    if (element.stage == null) {\n      return;\n    }\n    //clear timeout if exists\n    if (Accessibility.timeout != null) {\n      clearTimeout(Accessibility.timeout);\n    }\n    // add to accessibility elements\n    if (element.accessibilityId == null) {\n      Accessibility.data.push(element);\n      element.accessibilityId = Accessibility.data.length - 1;\n    }\n    Accessibility.timeout = setTimeout(Accessibility.update, 300);\n  }\n\n  static update() {\n    Accessibility.timeout = null;\n    var data = Accessibility.data.slice(0);\n    data.sort(function(a, b) {\n      return a.accessibilityPriority - b.accessibilityPriority;\n    });\n    var len = data.length;\n    var out = \"\";\n    var currentCanvas = data[0].stage.canvas;\n    for (var i = 0; i < len; i++) {\n      if (data[i].stage == null) {\n        continue;\n      }\n      if (currentCanvas != data[i].stage.canvas) {\n        currentCanvas.innerHTML = out;\n        out = \"\";\n        currentCanvas = data[i].stage.canvas;\n      }\n      if (data[i].accessibilityText == null) {\n        out += \"<p>\" + data[i].text + \"</p>\";\n      } else {\n        out += data[i].accessibilityText;\n      }\n    }\n    currentCanvas.innerHTML = out;\n  }\n\n  static clear() {\n    Accessibility.data = [];\n  }\n}\n","enum Align {\n  TOP_LEFT = 0,\n  TOP_CENTER = 1,\n  TOP_RIGHT = 2,\n  MIDDLE_LEFT = 3,\n  MIDDLE_CENTER = 4,\n  MIDDLE_RIGHT = 5,\n  BOTTOM_LEFT = 6,\n  BOTTOM_CENTER = 7,\n  BOTTOM_RIGHT = 8,\n  TL = 0,\n  TC = 1,\n  TR = 2,\n  ML = 3,\n  MC = 4,\n  MR = 5,\n  BL = 6,\n  BC = 7,\n  BR = 8\n}\n\nexport default Align;\n","enum Case {\n  NORMAL = 0,\n  UPPER = 1,\n  LOWER = 2,\n  SMALL_CAPS = 3\n}\n\nexport default Case;\n","export default class Font {\n  glyphs: any = {};\n  kerning: any = {};\n  missing: number;\n  offset: number;\n  default: number;\n  descent: number;\n  ascent: number;\n  top: number = 0;\n  middle: number = 0;\n  bottom: number = 0;\n  units: number = 1000;\n  id: string;\n  ligatures: any = {};\n  panose: string;\n  alphabetic: string;\n  loaded: boolean = false;\n  targets: number[] = [];\n  loader: XMLHttpRequest;\n\n  cloneGlyph(target: number, from: number) {\n    if (this.glyphs[target] == undefined && this.glyphs[from] != undefined) {\n      this.glyphs[target] = this.glyphs[from];\n      this.kerning[target] = this.kerning[from];\n    }\n  }\n}\n","/**\n * Represents a single Glyph within a Font.\n */\n\nexport default class Glyph {\n  /** SVG path data */\n  path: string = \"\";\n  offset: number;\n  kerning: any = {};\n  private _graphic: createjs.Graphics = null;\n  _fill: createjs.Graphics.Fill;\n  _stroke: createjs.Graphics.Stroke;\n  _strokeStyle: createjs.Graphics.StrokeStyle;\n\n  graphic() {\n    if (this._graphic == null) {\n      this._graphic = new createjs.Graphics();\n\n      //append fill/stroke/stokeStyle\n      //Character instances populate properties before draw\n      this._stroke = new createjs.Graphics.Stroke(null, true);\n\n      this._strokeStyle = new createjs.Graphics.StrokeStyle(\n        0,\n        null,\n        null,\n        null\n      );\n\n      this._fill = new createjs.Graphics.Fill(null);\n\n      //convert SVG to drawing paths\n      this._graphic.decodeSVGPath(this.path);\n\n      this._graphic.append(this._fill);\n      this._graphic.append(this._strokeStyle);\n      this._graphic.append(this._stroke);\n    }\n    return this._graphic;\n  }\n\n  draw(ctx: CanvasRenderingContext2D): boolean {\n    this._graphic.draw(ctx);\n    return true;\n  }\n\n  getKerning(characterCode: number, size: number) {\n    var out = -(this.kerning[characterCode] * size);\n    if (isNaN(out)) {\n      return 0;\n    }\n    if (isNaN(characterCode)) {\n      return 0;\n    }\n    if (isNaN(size)) {\n      return 0;\n    }\n    if (this.kerning[characterCode] != undefined) {\n      return out;\n    }\n    return 0;\n  }\n}\n","import Font from \"./Font\";\nimport Glyph from \"./Glyph\";\n\n/**\n * Fetches font files via AJAX request, and\n * parses the font into glyphs, and stores it.\n * Local storage is optionally used for caching.\n *\n * Font files store font data, grouped by categories:\n *\n *  * `0` = Font properties: `0|property name|property value`\n *  * `1` = Glyph SVG shape data: `1|?|?|SVGPath data`\n *  * `2` = Kerning spacing: `2|?|?|?`\n *  * `3` = Ligatures: `3`\n *\n * Each line in a category of data is delineated with pipe characters \"|\".\n *\n * Partial example:\n *\n * ```txt\n * 0|id|Abel-Regular\n * 0|family|Abel\n * 1|33|428|M250 434h-72l-55 1000h182zM137 0v154h154v-154h-154z\n * 1|34|645|M225 993h-51l-51 441h153zM471 993h-51l-51 441h153z\n * 2|34|197|123\n * 2|47|100|102\n * 3\n * ```\n *\n * @todo This class should be split into FontLoader (AJAX fetch), FontParser (deserialisation), and probably a FontStorage class.\n */\nexport default class FontLoader {\n  /**\n   * Server path to load font files from.\n   */\n  static path: string = \"/font/\";\n\n  static cache: boolean = false;\n\n  static version: number = 0;\n\n  static fonts: any = {};\n\n  static loaders: any = [];\n\n  static isLoaded(name: string): boolean {\n    if (FontLoader.fonts.hasOwnProperty(name)) {\n      return FontLoader.fonts[name].loaded;\n    }\n    return false;\n  }\n\n  static getFont(name: string): Font {\n    if (FontLoader.fonts.hasOwnProperty(name)) {\n      return FontLoader.fonts[name];\n    }\n    return null;\n  }\n\n  static load(target: any, fonts: string[]) {\n    //no loaderId implies no loading for this txt field\n    var loader: any;\n    if (target.loaderId == null) {\n      loader = {};\n      target.loaderId = FontLoader.loaders.push(loader) - 1;\n      loader._id = target.loaderId;\n      loader._target = target;\n    } else {\n      loader = FontLoader.loaders[target.loaderId];\n    }\n    var fontCount = fonts.length;\n    for (var i = 0; i < fontCount; ++i) {\n      //mark loader for font loading\n      loader[fonts[i]] = false;\n    }\n    for (var prop in loader) {\n      if (prop.charAt(0) != \"_\") {\n        FontLoader.loadFont(prop, loader);\n      }\n    }\n  }\n\n  static check(id: number) {\n    var loader = FontLoader.loaders[id];\n    //determine if all fonts are loaded\n    for (var prop in loader) {\n      if (prop.charAt(0) != \"_\") {\n        loader[prop] = FontLoader.isLoaded(prop);\n        if (loader[prop] == false) return;\n      }\n    }\n    window.setTimeout(function() {\n      loader._target.fontLoaded();\n    }, 1);\n  }\n\n  static loadFont(fontName: string, loader: any) {\n    //determine if font exists in memory\n    if (FontLoader.fonts.hasOwnProperty(fontName)) {\n      //loading complete\n      if (FontLoader.fonts[fontName].loaded === true) {\n        FontLoader.check(loader._id);\n\n        //loading not complete\n      } else {\n        //add loader id to font\n        FontLoader.fonts[fontName].targets.push(loader._id);\n      }\n      //load from scratch\n    } else {\n      var font: Font = (FontLoader.fonts[fontName] = new Font());\n      font.targets.push(loader._id);\n\n      //TODO localstorage check & get\n      var req: any = new XMLHttpRequest();\n\n      if (localStorage && FontLoader.cache) {\n        var local = JSON.parse(\n          localStorage.getItem(\"txt_font_\" + fontName.split(\" \").join(\"_\"))\n        );\n        if (local != null) {\n          if (local.version === FontLoader.version) {\n            req.cacheResponseText = local.font;\n            req.cacheFont = true;\n          }\n        }\n      }\n\n      req.onload = function() {\n        //localstorage set\n        if (localStorage && FontLoader.cache && this.cacheFont == undefined) {\n          localStorage.setItem(\n            \"txt_font_\" + fontName.split(\" \").join(\"_\"),\n            JSON.stringify({\n              font: this.responseText,\n              version: FontLoader.version\n            })\n          );\n        }\n\n        var lines = this.responseText.split(\"\\n\");\n        //use cacheResponseText as responseText is readonly via XHR\n        if (this.cacheResponseText) {\n          lines = this.cacheResponseText.split(\"\\n\");\n        }\n        var len = lines.length;\n        var i = 0;\n        var line: string[];\n        var glyph: Glyph;\n        while (i < len) {\n          line = lines[i].split(\"|\");\n          switch (line[0]) {\n            case \"0\":\n              //properties\n              if (\n                line[1] == \"id\" ||\n                line[1] == \"panose\" ||\n                line[1] == \"family\" ||\n                line[1] == \"font-style\" ||\n                line[1] == \"font-stretch\"\n              ) {\n                font[line[1]] = line[2];\n              } else {\n                font[line[1]] = parseInt(line[2]);\n              }\n              break;\n\n            case \"1\":\n              //glyphs\n\n              glyph = new Glyph();\n              glyph.offset = parseInt(line[2]) / font.units;\n              glyph.path = line[3];\n              font.glyphs[line[1]] = glyph;\n              break;\n\n            case \"2\":\n              //kerning\n              if (font.kerning[line[1]] == undefined) {\n                font.kerning[line[1]] = {};\n              }\n              if (font.glyphs[line[1]] == undefined) {\n                glyph = new Glyph();\n                glyph.offset = font.default / font.units;\n                glyph.path = \"\";\n                font.glyphs[line[1]] = glyph;\n              }\n              font.glyphs[line[1]].kerning[line[2]] =\n                parseInt(line[3]) / font.units;\n              font.kerning[line[1]][line[2]] = parseInt(line[3]) / font.units;\n              break;\n\n            case \"3\":\n              line.shift();\n              var lineLen = line.length;\n              for (var j = 0; j < lineLen; j++) {\n                var path = line[j].split(\"\");\n                var pathLength = path.length;\n                var target = font.ligatures;\n                for (var k = 0; k < pathLength; k++) {\n                  if (target[path[k]] == undefined) {\n                    target[path[k]] = {};\n                  }\n                  if (k == pathLength - 1) {\n                    target[path[k]].glyph = font.glyphs[line[j]];\n                  }\n\n                  target = target[path[k]];\n                }\n                //font.ligatures[ line[ j ] ] = font.glyphs[ line[j] ]\n              }\n              break;\n          }\n          i++;\n        }\n        //character cloning\n        //clone bullet into multiple areas\n        font.cloneGlyph(183, 8226);\n        font.cloneGlyph(8729, 8226);\n        font.cloneGlyph(12539, 8226);\n        font.cloneGlyph(9702, 8226);\n        font.cloneGlyph(9679, 8226);\n        font.cloneGlyph(9675, 8226);\n\n        //define font adjustment values for font.top, font.middle, font.bottom\n        if (font.top == undefined) {\n          font.top = 0;\n        }\n        if (font.middle == undefined) {\n          font.middle = 0;\n        }\n        if (font.bottom == undefined) {\n          font.bottom = 0;\n        }\n\n        //level the font metadata\n        var lLen = font.targets.length;\n        font.loaded = true;\n        for (var l = 0; l < lLen; ++l) {\n          FontLoader.check(font.targets[l]);\n        }\n        font.targets = [];\n      };\n      //check if cached\n      if (req.cacheFont == true) {\n        req.onload();\n      } else {\n        req.open(\n          \"get\",\n          FontLoader.path + fontName.split(\" \").join(\"_\") + \".txt\",\n          true\n        );\n        req.send();\n      }\n    }\n  }\n}\n","import Case from \"./Case\";\nimport Glyph from \"./Glyph\";\nimport FontLoader from \"./FontLoader\";\nimport Font from \"./Font\";\n\n/**\n * Represents a styled character\n */\nexport default class Character extends createjs.Shape {\n  character: string = \"\";\n  characterCode: number = null;\n  font: string = null;\n  tracking: number = null;\n  characterCase: Case = null;\n  characterCaseOffset: number = 0;\n  index: number = null;\n  size: number = null;\n  fillColor: string = null;\n  strokeColor: string = null;\n  strokeWidth: number = null;\n  measuredWidth: number = null;\n  measuredHeight: number = null;\n  hPosition: number = null;\n  missing: boolean = false;\n\n  _glyph: Glyph;\n  _font: Font;\n\n  constructor(\n    character: string,\n    style: {},\n    index: number = null,\n    glyph: Glyph = null\n  ) {\n    super();\n    this.set(style);\n    this.index = index;\n\n    // flip case depending on characterCase property\n    if (this.characterCase == Case.NORMAL) {\n      this.character = character;\n    } else if (this.characterCase == Case.UPPER) {\n      this.character = character.toUpperCase();\n    } else if (this.characterCase == Case.LOWER) {\n      this.character = character.toLowerCase();\n    } else if (this.characterCase == Case.SMALL_CAPS) {\n      this.character = character.toUpperCase();\n      var upperSmall = !(character === this.character);\n    } else {\n      //fallback case for unknown.\n      this.character = character;\n    }\n    this.characterCode = this.character.charCodeAt(0);\n\n    this._font = FontLoader.getFont(this.font);\n\n    if (this._font.glyphs[this.characterCode]) {\n      this._glyph = this._font.glyphs[this.characterCode];\n\n      //flip lower\n    } else if (\n      this._font.glyphs[\n        String.fromCharCode(this.characterCode)\n          .toLowerCase()\n          .charCodeAt(0)\n      ]\n    ) {\n      this._glyph = this._font.glyphs[\n        String.fromCharCode(this.characterCode)\n          .toLowerCase()\n          .charCodeAt(0)\n      ];\n\n      //flip upper\n    } else if (\n      this._font.glyphs[\n        String.fromCharCode(this.characterCode)\n          .toUpperCase()\n          .charCodeAt(0)\n      ]\n    ) {\n      this._glyph = this._font.glyphs[\n        String.fromCharCode(this.characterCode)\n          .toUpperCase()\n          .charCodeAt(0)\n      ];\n    }\n\n    //missing glyph\n    if (this._glyph === undefined) {\n      console.log(\"MISSING GLYPH:\" + this.character);\n      this._glyph = this._font.glyphs[42];\n      this.missing = true;\n    }\n    this.graphics = this._glyph.graphic();\n\n    // scale x\n    if (this.characterCase === Case.SMALL_CAPS) {\n      if (upperSmall) {\n        this.scaleX = (this.size / this._font.units) * 0.8;\n        this.characterCaseOffset = -0.2 * (this._glyph.offset * this.size);\n      } else {\n        this.scaleX = this.size / this._font.units;\n      }\n    } else {\n      this.scaleX = this.size / this._font.units;\n    }\n\n    this.scaleY = -this.scaleX;\n\n    this.measuredHeight =\n      (this._font.ascent - this._font.descent) * this.scaleX;\n    this.measuredWidth = this.scaleX * this._glyph.offset * this._font.units;\n\n    var ha = new createjs.Shape();\n    ha.graphics\n      .beginFill(\"#000\")\n      .drawRect(\n        0,\n        this._font.descent,\n        this._glyph.offset * this._font.units,\n        this._font.ascent - this._font.descent\n      );\n    this.hitArea = ha;\n  }\n\n  setGlyph(glyph: Glyph) {\n    this._glyph = glyph;\n    this.graphics = this._glyph.graphic();\n  }\n\n  trackingOffset(): number {\n    return this.size * (2.5 / this._font.units + 1 / 900 + this.tracking / 990);\n  }\n\n  draw(ctx: CanvasRenderingContext2D): boolean {\n    this._glyph._fill.style = this.fillColor;\n    this._glyph._fill.matrix = null;\n    this._glyph._stroke.style = this.strokeColor;\n    this._glyph._strokeStyle.width = this.strokeWidth;\n    return this._glyph.draw(ctx);\n  }\n\n  getWidth() {\n    return this.size * this._glyph.offset;\n  }\n}\n","import Word from \"./Word\";\nimport Character from \"./Character\";\n\nexport default class Line extends createjs.Container {\n  measuredWidth: number;\n  measuredHeight: number;\n\n  constructor() {\n    super();\n  }\n\n  //Text support\n  lastWord(): Word {\n    return <Word>this.children[this.children.length - 1];\n  }\n\n  //CharacterText support\n  lastCharacter(): Character {\n    return <Character>this.children[this.children.length - 1];\n  }\n}\n","import Align from \"./Align\";\nimport Case from \"./Case\";\nimport FontLoader from \"./FontLoader\";\nimport { ConstructObj, Style } from \"./Interfaces\";\nimport Accessibility from \"./Accessibility\";\nimport Font from \"./Font\";\nimport Character from \"./Character\";\nimport Line from \"./Line\";\n\nexport default class CharacterText extends createjs.Container {\n  text: string = \"\";\n  lineHeight: number = null;\n  width: number = 100;\n  height: number = 20;\n  align: number = Align.TOP_LEFT;\n  characterCase: Case = Case.NORMAL;\n  size: number = 12;\n  minSize: number = null;\n  maxTracking: number = null;\n  font: string = \"belinda\";\n  tracking: number = 0;\n  ligatures: boolean = false;\n  fillColor: string = \"#000\";\n  strokeColor: string = null;\n  strokeWidth: number = null;\n  singleLine: boolean = false;\n  autoExpand: boolean = false;\n  autoReduce: boolean = false;\n  overset: boolean = false;\n  oversetIndex: number = null;\n  loaderId: number = null;\n  style: Style[] = null;\n  debug: boolean = false;\n  original: ConstructObj = null;\n  lines: Line[] = [];\n  block: createjs.Container;\n  missingGlyphs: any[] = null;\n  renderCycle: boolean = true;\n  measured: boolean = false;\n  oversetPotential: boolean = false;\n\n  //accessibility\n  accessibilityText: string = null;\n  accessibilityPriority: number = 2;\n  accessibilityId: number = null;\n\n  constructor(props: ConstructObj = null) {\n    super();\n\n    if (props) {\n      this.original = props;\n      this.set(props);\n      this.original.tracking = this.tracking;\n    }\n    if (this.style == null) {\n      FontLoader.load(this, [this.font]);\n    } else {\n      var fonts = [this.font];\n      var styleLength = this.style.length;\n      for (var i = 0; i < styleLength; ++i) {\n        if (this.style[i] != undefined) {\n          if (this.style[i].font != undefined) {\n            fonts.push(this.style[i].font);\n          }\n        }\n      }\n      FontLoader.load(this, fonts);\n    }\n  }\n\n  //called when text is rendered\n  complete() {}\n\n  //called when font has loaded\n  fontLoaded() {\n    this.layout();\n  }\n\n  //call stage.update to render canvas\n  //overload to support deferred rendering\n  render() {\n    this.stage.update();\n  }\n\n  //layout text\n  layout() {\n    //accessibility api\n    Accessibility.set(this);\n\n    this.overset = false;\n    this.measured = false;\n    this.oversetPotential = false;\n\n    if (this.original.size) {\n      this.size = this.original.size;\n    }\n    if (this.original.tracking) {\n      this.tracking = this.original.tracking;\n    }\n    this.text = this.text.replace(/([\\n][ \\t]+)/g, \"\\n\");\n\n    if (this.singleLine === true) {\n      this.text = this.text.split(\"\\n\").join(\"\");\n      this.text = this.text.split(\"\\r\").join(\"\");\n    }\n\n    this.lines = [];\n    this.missingGlyphs = null;\n    this.removeAllChildren();\n\n    if (this.text === \"\" || this.text === undefined) {\n      this.render();\n      this.complete();\n      return;\n    }\n\n    this.block = new createjs.Container();\n    this.addChild(this.block);\n\n    //debug\n    //draw baseline, ascent, ascender, descender lines\n    if (this.debug == true) {\n      var font: Font = FontLoader.getFont(this.font);\n      //outline\n      var s = new createjs.Shape();\n      s.graphics.beginStroke(\"#FF0000\");\n      s.graphics.setStrokeStyle(1.2);\n      s.graphics.drawRect(0, 0, this.width, this.height);\n      this.addChild(s);\n\n      //baseline\n      s = new createjs.Shape();\n      s.graphics.beginFill(\"#000\");\n      s.graphics.drawRect(0, 0, this.width, 0.2);\n      s.x = 0;\n      s.y = 0;\n      this.block.addChild(s);\n\n      s = new createjs.Shape();\n      s.graphics.beginFill(\"#F00\");\n      s.graphics.drawRect(0, 0, this.width, 0.2);\n      s.x = 0;\n      s.y = (-font[\"cap-height\"] / font.units) * this.size;\n      this.block.addChild(s);\n\n      s = new createjs.Shape();\n      s.graphics.beginFill(\"#0F0\");\n      s.graphics.drawRect(0, 0, this.width, 0.2);\n      s.x = 0;\n      s.y = (-font.ascent / font.units) * this.size;\n      this.block.addChild(s);\n\n      s = new createjs.Shape();\n      s.graphics.beginFill(\"#00F\");\n      s.graphics.drawRect(0, 0, this.width, 0.2);\n      s.x = 0;\n      s.y = (-font.descent / font.units) * this.size;\n      this.block.addChild(s);\n    }\n    if (\n      this.singleLine === true &&\n      (this.autoExpand === true || this.autoReduce === true)\n    ) {\n      this.measure();\n    }\n\n    if (this.renderCycle === false) {\n      this.removeAllChildren();\n      this.complete();\n      return;\n    }\n\n    if (this.characterLayout() === false) {\n      this.removeAllChildren();\n      return;\n    }\n    this.lineLayout();\n    this.render();\n    this.complete();\n  }\n\n  measure(): boolean {\n    this.measured = true;\n    //Extract origin sizing from this.original to preserve\n    //metrics. autoMeasure will change style properties\n    //directly. Change this.original to re-render.\n\n    var size = this.original.size;\n    var len = this.text.length;\n    var width = this.getWidth();\n    var defaultStyle = {\n      size: this.original.size,\n      font: this.original.font,\n      tracking: this.original.tracking,\n      characterCase: this.original.characterCase\n    };\n    var currentStyle: any;\n    var charCode: number = null;\n    var font: Font;\n    var charMetrics = [];\n    var largestFontSize = defaultStyle.size;\n    //console.log( \"LOOPCHAR===============\" );\n    //console.log( \" len: \" + len );\n    for (var i = 0; i < len; i++) {\n      charCode = this.text.charCodeAt(i);\n\n      currentStyle = defaultStyle;\n      if (\n        this.original.style !== undefined &&\n        this.original.style[i] !== undefined\n      ) {\n        currentStyle = this.original.style[i];\n        // make sure style contains properties needed.\n        if (currentStyle.size === undefined)\n          currentStyle.size = defaultStyle.size;\n        if (currentStyle.font === undefined)\n          currentStyle.font = defaultStyle.font;\n        if (currentStyle.tracking === undefined)\n          currentStyle.tracking = defaultStyle.tracking;\n      }\n      if (currentStyle.size > largestFontSize) {\n        largestFontSize = currentStyle.size;\n      }\n      font = FontLoader.fonts[currentStyle.font];\n\n      //console.log( currentStyle.tracking , font.units );\n\n      charMetrics.push({\n        char: this.text[i],\n        size: currentStyle.size,\n        charCode: charCode,\n        font: currentStyle.font,\n        offset: font.glyphs[charCode].offset,\n        units: font.units,\n        tracking: this.trackingOffset(\n          currentStyle.tracking,\n          currentStyle.size,\n          font.units\n        ),\n        kerning: font.glyphs[charCode].getKerning(this.getCharCodeAt(i + 1), 1)\n      });\n      //console.log( this.text[i] );\n    }\n\n    //save space char using last known width/height\n    var space: any = {\n      char: \" \",\n      size: currentStyle.size,\n      charCode: 32,\n      font: currentStyle.font,\n      offset: font.glyphs[32].offset,\n      units: font.units,\n      tracking: 0,\n      kerning: 0\n    };\n\n    charMetrics[charMetrics.length - 1].tracking = 0;\n    //charMetrics[ charMetrics.length-1 ].kerning=0;\n\n    len = charMetrics.length;\n\n    //measured without size\n    var metricBaseWidth = 0;\n    //measured at size\n    var metricRealWidth = 0;\n    //measured at size with tracking\n    var metricRealWidthTracking = 0;\n\n    var current = null;\n    //console.log( \" len: \" + len );\n    //console.log( \"LOOPMETRICS===============\" );\n    for (var i = 0; i < len; i++) {\n      current = charMetrics[i];\n      metricBaseWidth = metricBaseWidth + current.offset + current.kerning;\n      metricRealWidth =\n        metricRealWidth + (current.offset + current.kerning) * current.size;\n      metricRealWidthTracking =\n        metricRealWidthTracking +\n        (current.offset + current.kerning + current.tracking) * current.size;\n      //console.log( current.char );\n    }\n\n    //size cases\n    if (metricRealWidth > this.width) {\n      if (this.autoReduce === true) {\n        this.tracking = 0;\n        this.size =\n          (this.original.size * this.width) /\n          (metricRealWidth + space.offset * space.size);\n        if (this.minSize != null && this.size < this.minSize) {\n          this.size = this.minSize;\n          this.oversetPotential = true;\n        }\n        //console.log( \"REDUCE SIZE\")\n        return true;\n      }\n      //tracking cases\n    } else {\n      var trackMetric = this.offsetTracking(\n        (this.width - metricRealWidth) / len,\n        current.size,\n        current.units\n      );\n      if (trackMetric < 0) {\n        trackMetric = 0;\n      }\n      //auto expand case\n      if (trackMetric > this.original.tracking && this.autoExpand) {\n        if (this.maxTracking != null && trackMetric > this.maxTracking) {\n          this.tracking = this.maxTracking;\n        } else {\n          this.tracking = trackMetric;\n        }\n        this.size = this.original.size;\n        //console.log( \"EXPAND TRACKING\")\n        return true;\n      }\n      //auto reduce tracking case\n      if (trackMetric < this.original.tracking && this.autoReduce) {\n        if (this.maxTracking != null && trackMetric > this.maxTracking) {\n          this.tracking = this.maxTracking;\n        } else {\n          this.tracking = trackMetric;\n        }\n        this.size = this.original.size;\n        //console.log( \"REDUCE TRACKING\")\n        return true;\n      }\n    }\n    return true;\n  }\n\n  trackingOffset(tracking: number, size: number, units: number): number {\n    return size * (2.5 / units + 1 / 900 + tracking / 990);\n  }\n\n  offsetTracking(offset: number, size: number, units: number): number {\n    return Math.floor(((offset - 2.5 / units - 1 / 900) * 990) / size);\n  }\n\n  getWidth(): number {\n    return this.width;\n  }\n\n  /**\n   * Place characters in lines\n   * adds Characters to lines. LineHeight IS a factor given lack of Words.\n   */\n  characterLayout(): boolean {\n    //char layout\n    var len = this.text.length;\n    var char: Character;\n    var defaultStyle = {\n      size: this.size,\n      font: this.font,\n      tracking: this.tracking,\n      characterCase: this.characterCase,\n      fillColor: this.fillColor,\n      strokeColor: this.strokeColor,\n      strokeWidth: this.strokeWidth\n    };\n    var currentStyle = defaultStyle;\n    var hPosition: number = 0;\n    var vPosition: number = 0;\n    var charKern: number;\n    var tracking: number;\n    var lineY: number = 0;\n    var firstLine = true;\n\n    var currentLine: Line = new Line();\n\n    this.lines.push(currentLine);\n    this.block.addChild(currentLine);\n\n    // loop over characters\n    // place into lines\n    for (var i = 0; i < len; i++) {\n      if (this.style !== null && this.style[i] !== undefined) {\n        currentStyle = this.style[i];\n        // make sure style contains properties needed.\n        if (currentStyle.size === undefined)\n          currentStyle.size = defaultStyle.size;\n        if (currentStyle.font === undefined)\n          currentStyle.font = defaultStyle.font;\n        if (currentStyle.tracking === undefined)\n          currentStyle.tracking = defaultStyle.tracking;\n        if (currentStyle.characterCase === undefined)\n          currentStyle.characterCase = defaultStyle.characterCase;\n        if (currentStyle.fillColor === undefined)\n          currentStyle.fillColor = defaultStyle.fillColor;\n        if (currentStyle.strokeColor === undefined)\n          currentStyle.strokeColor = defaultStyle.strokeColor;\n        if (currentStyle.strokeWidth === undefined)\n          currentStyle.strokeWidth = defaultStyle.strokeWidth;\n      }\n\n      // newline\n      // mark word as having newline\n      // create new word\n      // new line has no character\n      if (this.text.charAt(i) == \"\\n\" || this.text.charAt(i) == \"\\r\") {\n        //only if not last char\n        if (i < len - 1) {\n          if (firstLine === true) {\n            vPosition = currentStyle.size;\n            currentLine.measuredHeight = currentStyle.size;\n            currentLine.measuredWidth = hPosition;\n            lineY = 0;\n            currentLine.y = 0;\n          } else if (this.lineHeight != undefined) {\n            vPosition = this.lineHeight;\n            currentLine.measuredHeight = vPosition;\n            currentLine.measuredWidth = hPosition;\n            lineY = lineY + vPosition;\n            currentLine.y = lineY;\n          } else {\n            vPosition = char.measuredHeight;\n            currentLine.measuredHeight = vPosition;\n            currentLine.measuredWidth = hPosition;\n            lineY = lineY + vPosition;\n            currentLine.y = lineY;\n          }\n\n          firstLine = false;\n          currentLine = new Line();\n          currentLine.measuredHeight = currentStyle.size;\n          currentLine.measuredWidth = 0;\n          this.lines.push(currentLine);\n          this.block.addChild(currentLine);\n          vPosition = 0;\n          hPosition = 0;\n        }\n\n        if (this.text.charAt(i) == \"\\r\" && this.text.charAt(i + 1) == \"\\n\") {\n          i++;\n        }\n\n        continue;\n      }\n\n      //runtime test for font\n      if (FontLoader.isLoaded(currentStyle.font) === false) {\n        FontLoader.load(this, [currentStyle.font]);\n        return false;\n      }\n\n      // create character\n      char = new Character(this.text.charAt(i), currentStyle, i);\n\n      if (this.original.character) {\n        if (this.original.character.added) {\n          char.on(\"added\", this.original.character.added);\n        }\n        if (this.original.character.click) {\n          char.on(\"click\", this.original.character.click);\n        }\n        if (this.original.character.dblclick) {\n          char.on(\"dblclick\", this.original.character.dblclick);\n        }\n        if (this.original.character.mousedown) {\n          char.on(\"mousedown\", this.original.character.mousedown);\n        }\n        if (this.original.character.mouseout) {\n          char.on(\"mouseout\", this.original.character.mouseout);\n        }\n        if (this.original.character.mouseover) {\n          char.on(\"mouseover\", this.original.character.mouseover);\n        }\n        if (this.original.character.pressmove) {\n          char.on(\"pressmove\", this.original.character.pressmove);\n        }\n        if (this.original.character.pressup) {\n          char.on(\"pressup\", this.original.character.pressup);\n        }\n        if (this.original.character.removed) {\n          char.on(\"removed\", this.original.character.removed);\n        }\n        if (this.original.character.rollout) {\n          char.on(\"rollout\", this.original.character.rollout);\n        }\n        if (this.original.character.rollover) {\n          char.on(\"rollover\", this.original.character.rollover);\n        }\n        if (this.original.character.tick) {\n          char.on(\"tick\", this.original.character.tick);\n        }\n      }\n\n      if (char.missing) {\n        if (this.missingGlyphs == null) {\n          this.missingGlyphs = [];\n        }\n        this.missingGlyphs.push({\n          position: i,\n          character: this.text.charAt(i),\n          font: currentStyle.font\n        });\n      }\n\n      if (firstLine === true) {\n        if (vPosition < char.size) {\n          vPosition = char.size;\n        }\n      } else if (this.lineHeight != undefined && this.lineHeight > 0) {\n        if (vPosition < this.lineHeight) {\n          vPosition = this.lineHeight;\n        }\n      } else if (char.measuredHeight > vPosition) {\n        vPosition = char.measuredHeight;\n      }\n\n      //swap character if ligature\n      //ligatures removed if tracking or this.ligatures is false\n      if (currentStyle.tracking == 0 && this.ligatures == true) {\n        //1 char match\n        var ligTarget = this.text.substr(i, 4);\n        if (char._font.ligatures[ligTarget.charAt(0)]) {\n          //2 char match\n          if (char._font.ligatures[ligTarget.charAt(0)][ligTarget.charAt(1)]) {\n            //3 char match\n            if (\n              char._font.ligatures[ligTarget.charAt(0)][ligTarget.charAt(1)][\n                ligTarget.charAt(2)\n              ]\n            ) {\n              //4 char match\n              if (\n                char._font.ligatures[ligTarget.charAt(0)][ligTarget.charAt(1)][\n                  ligTarget.charAt(2)\n                ][ligTarget.charAt(3)]\n              ) {\n                //swap 4 char ligature\n                char.setGlyph(\n                  char._font.ligatures[ligTarget.charAt(0)][\n                    ligTarget.charAt(1)\n                  ][ligTarget.charAt(2)][ligTarget.charAt(3)].glyph\n                );\n                i = i + 3;\n              } else {\n                //swap 3 char ligature\n                char.setGlyph(\n                  char._font.ligatures[ligTarget.charAt(0)][\n                    ligTarget.charAt(1)\n                  ][ligTarget.charAt(2)].glyph\n                );\n                i = i + 2;\n              }\n            } else {\n              //swap 2 char ligature\n              char.setGlyph(\n                char._font.ligatures[ligTarget.charAt(0)][ligTarget.charAt(1)]\n                  .glyph\n              );\n              i = i + 1;\n            }\n          }\n        }\n      }\n\n      if (this.overset == true) {\n        break;\n      } else if (\n        this.singleLine === false &&\n        hPosition + char.measuredWidth > this.width\n      ) {\n        var lastchar: Character = <Character>(\n          currentLine.children[currentLine.children.length - 1]\n        );\n        if (lastchar.characterCode == 32) {\n          currentLine.measuredWidth =\n            hPosition -\n            lastchar.measuredWidth -\n            lastchar.trackingOffset() -\n            lastchar._glyph.getKerning(this.getCharCodeAt(i), lastchar.size);\n        } else {\n          currentLine.measuredWidth =\n            hPosition -\n            lastchar.trackingOffset() -\n            lastchar._glyph.getKerning(this.getCharCodeAt(i), lastchar.size);\n        }\n        if (firstLine === true) {\n          currentLine.measuredHeight = vPosition;\n          currentLine.y = 0;\n          lineY = 0;\n        } else {\n          currentLine.measuredHeight = vPosition;\n          lineY = lineY + vPosition;\n          currentLine.y = lineY;\n        }\n        firstLine = false;\n        currentLine = new Line();\n        currentLine.addChild(char);\n\n        if (char.characterCode == 32) {\n          hPosition = 0;\n        } else {\n          hPosition =\n            char.x +\n            char._glyph.offset * char.size +\n            char.characterCaseOffset +\n            char.trackingOffset();\n        }\n\n        this.lines.push(currentLine);\n        this.block.addChild(currentLine);\n        vPosition = 0;\n\n        //measured case\n      } else if (\n        this.measured == true &&\n        this.singleLine === true &&\n        hPosition + char.measuredWidth > this.width &&\n        this.oversetPotential == true\n      ) {\n        //char.x = hPosition;\n        //currentLine.addChild( char );\n        this.oversetIndex = i;\n        this.overset = true;\n        //hPosition = char.x + ( char._glyph.offset * char.size ) + char.characterCaseOffset + char.trackingOffset() + char._glyph.getKerning( this.getCharCodeAt( i + 1 ) , char.size );\n\n        //not measured\n      } else if (\n        this.measured == false &&\n        this.singleLine === true &&\n        hPosition + char.measuredWidth > this.width\n      ) {\n        //char.x = hPosition;\n        //currentLine.addChild( char );\n        this.oversetIndex = i;\n        this.overset = true;\n        //hPosition = char.x + ( char._glyph.offset * char.size ) + char.characterCaseOffset + char.trackingOffset() + char._glyph.getKerning( this.getCharCodeAt( i + 1 ) , char.size );\n      } else {\n        char.x = hPosition;\n        // push character into word\n        currentLine.addChild(char);\n        hPosition =\n          char.x +\n          char._glyph.offset * char.size +\n          char.characterCaseOffset +\n          char.trackingOffset() +\n          char._glyph.getKerning(this.getCharCodeAt(i + 1), char.size);\n      }\n    }\n    //case of empty word at end.\n    if (currentLine.children.length == 0) {\n      var lw = this.lines.pop();\n      currentLine = this.lines[this.lines.length - 1];\n      hPosition = currentLine.measuredWidth;\n      vPosition = currentLine.measuredHeight;\n    }\n    if (firstLine === true) {\n      currentLine.measuredWidth = hPosition;\n      currentLine.measuredHeight = vPosition;\n      currentLine.y = 0;\n    } else {\n      currentLine.measuredWidth = hPosition;\n      currentLine.measuredHeight = vPosition;\n      if (vPosition == 0) {\n        if (this.lineHeight) {\n          vPosition = this.lineHeight;\n        } else {\n          vPosition = currentStyle.size;\n        }\n      }\n      currentLine.y = lineY + vPosition;\n    }\n    return true;\n  }\n\n  getCharCodeAt(index: number): number {\n    if (this.characterCase == Case.NORMAL) {\n      return this.text.charAt(index).charCodeAt(0);\n    } else if (this.characterCase == Case.UPPER) {\n      return this.text\n        .charAt(index)\n        .toUpperCase()\n        .charCodeAt(0);\n    } else if (this.characterCase == Case.LOWER) {\n      return this.text\n        .charAt(index)\n        .toLowerCase()\n        .charCodeAt(0);\n    } else if (this.characterCase == Case.SMALL_CAPS) {\n      return this.text\n        .charAt(index)\n        .toUpperCase()\n        .charCodeAt(0);\n    } else {\n      return this.text.charAt(index).charCodeAt(0);\n    }\n  }\n\n  lineLayout() {\n    // loop over lines\n    // place into text\n    var blockHeight = 0;\n    var measuredWidth = 0;\n    var measuredHeight = 0;\n    var line;\n    var a = Align;\n    var fnt: Font = FontLoader.getFont(this.font);\n    var aHeight = (this.size * fnt.ascent) / fnt.units;\n    var cHeight = (this.size * fnt[\"cap-height\"]) / fnt.units;\n    var xHeight = (this.size * fnt[\"x-height\"]) / fnt.units;\n    var dHeight = (this.size * fnt.descent) / fnt.units;\n\n    var len = this.lines.length;\n    for (var i = 0; i < len; i++) {\n      line = this.lines[i];\n\n      //correct measuredWidth if last line character contains tracking\n      if (line.lastCharacter()) {\n        line.measuredWidth -= line.lastCharacter().trackingOffset();\n      }\n\n      if (this.original.line) {\n        if (this.original.line.added) {\n          line.on(\"added\", this.original.line.added);\n        }\n        if (this.original.line.click) {\n          line.on(\"click\", this.original.line.click);\n        }\n        if (this.original.line.dblclick) {\n          line.on(\"dblclick\", this.original.line.dblclick);\n        }\n        if (this.original.line.mousedown) {\n          line.on(\"mousedown\", this.original.line.mousedown);\n        }\n        if (this.original.line.mouseout) {\n          line.on(\"mouseout\", this.original.line.mouseout);\n        }\n        if (this.original.line.mouseover) {\n          line.on(\"mouseover\", this.original.line.mouseover);\n        }\n        if (this.original.line.pressmove) {\n          line.on(\"pressmove\", this.original.line.pressmove);\n        }\n        if (this.original.line.pressup) {\n          line.on(\"pressup\", this.original.line.pressup);\n        }\n        if (this.original.line.removed) {\n          line.on(\"removed\", this.original.line.removed);\n        }\n        if (this.original.line.rollout) {\n          line.on(\"rollout\", this.original.line.rollout);\n        }\n        if (this.original.line.rollover) {\n          line.on(\"rollover\", this.original.line.rollover);\n        }\n        if (this.original.line.tick) {\n          line.on(\"tick\", this.original.line.tick);\n        }\n      }\n\n      measuredHeight += line.measuredHeight;\n\n      if (this.align === a.TOP_CENTER) {\n        //move to center\n        line.x = (this.width - line.measuredWidth) / 2;\n      } else if (this.align === a.TOP_RIGHT) {\n        //move to right\n        line.x = this.width - line.measuredWidth;\n      } else if (this.align === a.MIDDLE_CENTER) {\n        //move to center\n        line.x = (this.width - line.measuredWidth) / 2;\n      } else if (this.align === a.MIDDLE_RIGHT) {\n        //move to right\n        line.x = this.width - line.measuredWidth;\n      } else if (this.align === a.BOTTOM_CENTER) {\n        //move to center\n        line.x = (this.width - line.measuredWidth) / 2;\n      } else if (this.align === a.BOTTOM_RIGHT) {\n        //move to right\n        line.x = this.width - line.measuredWidth;\n      }\n    }\n\n    //TOP ALIGNED\n    if (\n      this.align === a.TOP_LEFT ||\n      this.align === a.TOP_CENTER ||\n      this.align === a.TOP_RIGHT\n    ) {\n      if (fnt.top == 0) {\n        this.block.y = (this.lines[0].measuredHeight * fnt.ascent) / fnt.units;\n      } else {\n        this.block.y =\n          (this.lines[0].measuredHeight * fnt.ascent) / fnt.units +\n          (this.lines[0].measuredHeight * fnt.top) / fnt.units;\n      }\n\n      //MIDDLE ALIGNED\n    } else if (\n      this.align === a.MIDDLE_LEFT ||\n      this.align === a.MIDDLE_CENTER ||\n      this.align === a.MIDDLE_RIGHT\n    ) {\n      this.block.y =\n        this.lines[0].measuredHeight +\n        (this.height - measuredHeight) / 2 +\n        (this.lines[0].measuredHeight * fnt.middle) / fnt.units;\n\n      //BOTTOM ALIGNED\n    } else if (\n      this.align === a.BOTTOM_LEFT ||\n      this.align === a.BOTTOM_CENTER ||\n      this.align === a.BOTTOM_RIGHT\n    ) {\n      this.block.y =\n        this.height -\n        this.lines[this.lines.length - 1].y +\n        (this.lines[0].measuredHeight * fnt.bottom) / fnt.units;\n    }\n\n    if (this.original.block) {\n      if (this.original.block.added) {\n        this.block.on(\"added\", this.original.block.added);\n      }\n      if (this.original.block.click) {\n        this.block.on(\"click\", this.original.block.click);\n      }\n      if (this.original.block.dblclick) {\n        this.block.on(\"dblclick\", this.original.block.dblclick);\n      }\n      if (this.original.block.mousedown) {\n        this.block.on(\"mousedown\", this.original.block.mousedown);\n      }\n      if (this.original.block.mouseout) {\n        this.block.on(\"mouseout\", this.original.block.mouseout);\n      }\n      if (this.original.block.mouseover) {\n        this.block.on(\"mouseover\", this.original.block.mouseover);\n      }\n      if (this.original.block.pressmove) {\n        this.block.on(\"pressmove\", this.original.block.pressmove);\n      }\n      if (this.original.block.pressup) {\n        this.block.on(\"pressup\", this.original.block.pressup);\n      }\n      if (this.original.block.removed) {\n        this.block.on(\"removed\", this.original.block.removed);\n      }\n      if (this.original.block.rollout) {\n        this.block.on(\"rollout\", this.original.block.rollout);\n      }\n      if (this.original.block.rollover) {\n        this.block.on(\"rollover\", this.original.block.rollover);\n      }\n      if (this.original.block.tick) {\n        this.block.on(\"tick\", this.original.block.tick);\n      }\n    }\n  }\n}\n","export default class Info {\n  static VERSION: string = \"0.9.5\";\n  static LICENSE: string = \"BSD-2-Clause\";\n  static CONTACT: string = \"ted@light.ly\";\n}\n","import Character from \"./Character\";\n\nexport default class Word extends createjs.Container {\n  hasNewLine: boolean = false;\n  hasHyphen: boolean = false;\n  hasSpace: boolean = false;\n  measuredWidth: number;\n  measuredHeight: number;\n  spaceOffset: number = 0;\n\n  constructor() {\n    super();\n  }\n\n  //CharacterText support\n  lastCharacter(): Character {\n    return <Character>this.children[this.children.length - 1];\n  }\n}\n","import Case from \"./Case\";\nimport Align from \"./Align\";\nimport FontLoader from \"./FontLoader\";\nimport Word from \"./Word\";\nimport Line from \"./Line\";\nimport Font from \"./Font\";\nimport Accessibility from \"./Accessibility\";\nimport { Style, ConstructObj } from \"./Interfaces\";\nimport Character from \"./Character\";\n\nexport default class Text extends createjs.Container {\n  text: string = \"\";\n  lineHeight: number = null;\n  width: number = 100;\n  height: number = 20;\n  align: number = Align.TOP_LEFT;\n  characterCase: Case = Case.NORMAL;\n  size: number = 12;\n  font: string = \"belinda\";\n  tracking: number = 0;\n  ligatures: boolean = false;\n  fillColor: string = \"#000\";\n  strokeColor: string = null;\n  strokeWidth: number = null;\n  loaderId: number = null;\n  style: Style[] = null;\n  debug: boolean = false;\n  original: ConstructObj = null;\n  words: Word[] = [];\n  lines: Line[] = [];\n  block: createjs.Container;\n  missingGlyphs: any[] = null;\n  renderCycle: boolean = true;\n\n  //accessibility\n  accessibilityText: string = null;\n  accessibilityPriority: number = 2;\n  accessibilityId: number = null;\n\n  constructor(props: ConstructObj = null) {\n    super();\n    if (props) {\n      this.original = props;\n      this.set(props);\n    }\n    if (this.style == null) {\n      FontLoader.load(this, [this.font]);\n    } else {\n      var fonts = [this.font];\n      var styleLength = this.style.length;\n      for (var i = 0; i < styleLength; ++i) {\n        if (this.style[i] != undefined) {\n          if (this.style[i].font != undefined) {\n            fonts.push(this.style[i].font);\n          }\n        }\n      }\n      FontLoader.load(this, fonts);\n    }\n  }\n\n  render() {\n    this.stage.update();\n  }\n\n  complete() {}\n\n  fontLoaded(font) {\n    this.layout();\n  }\n\n  getBounds(): createjs.Rectangle {\n    // TODO: obtain intersected bounds of the characters/words in here\n\n    return new createjs.Rectangle(this.x, this.y, this.width, this.height);\n  }\n\n  layout() {\n    //accessibility api\n    Accessibility.set(this);\n\n    this.text = this.text.replace(/([\\n][ \\t]+)/g, \"\\n\");\n    this.words = [];\n    this.lines = [];\n    this.missingGlyphs = null;\n    // TODO - remove composite layout\n    this.removeAllChildren();\n\n    this.block = new createjs.Container();\n    this.addChild(this.block);\n\n    //debug\n    //draw baseline, ascent, ascender, descender lines\n    if (this.debug == true) {\n      var font: Font = FontLoader.getFont(this.font);\n\n      //outline\n      var s = new createjs.Shape();\n      s.graphics.beginStroke(\"#FF0000\");\n      s.graphics.setStrokeStyle(1.2);\n      s.graphics.drawRect(0, 0, this.width, this.height);\n      this.addChild(s);\n\n      //baseline\n      s = new createjs.Shape();\n      s.graphics.beginFill(\"#000\");\n      s.graphics.drawRect(0, 0, this.width, 0.2);\n      s.x = 0;\n      s.y = 0;\n      this.block.addChild(s);\n\n      s = new createjs.Shape();\n      s.graphics.beginFill(\"#F00\");\n      s.graphics.drawRect(0, 0, this.width, 0.2);\n      s.x = 0;\n      s.y = (-font[\"cap-height\"] / font.units) * this.size;\n      this.block.addChild(s);\n\n      s = new createjs.Shape();\n      s.graphics.beginFill(\"#0F0\");\n      s.graphics.drawRect(0, 0, this.width, 0.2);\n      s.x = 0;\n      s.y = (-font.ascent / font.units) * this.size;\n      this.block.addChild(s);\n\n      s = new createjs.Shape();\n      s.graphics.beginFill(\"#00F\");\n      s.graphics.drawRect(0, 0, this.width, 0.2);\n      s.x = 0;\n      s.y = (-font.descent / font.units) * this.size;\n      this.block.addChild(s);\n    }\n\n    if (this.text === \"\" || this.text === undefined) {\n      this.render();\n      this.complete();\n      return;\n    }\n\n    if (this.characterLayout() === false) {\n      this.removeAllChildren();\n      return;\n    }\n\n    if (this.renderCycle === false) {\n      this.removeAllChildren();\n      this.complete();\n      return;\n    }\n\n    this.wordLayout();\n    this.lineLayout();\n\n    this.render();\n    this.complete();\n  }\n\n  //place characters in words\n  characterLayout(): boolean {\n    //characterlayout adds Charcters to words and measures true height. LineHeight is not a factor til Line layout.\n\n    //char layout\n    var len = this.text.length;\n    var char: Character;\n    var defaultStyle = {\n      size: this.size,\n      font: this.font,\n      tracking: this.tracking,\n      characterCase: this.characterCase,\n      fillColor: this.fillColor,\n      strokeColor: this.strokeColor,\n      strokeWidth: this.strokeWidth\n    };\n    var currentStyle = defaultStyle;\n    var hPosition: number = 0;\n    var vPosition: number = 0;\n    var charKern: number;\n    var tracking: number;\n\n    var currentWord: Word = new Word();\n    // push a new word to capture characters\n    this.words.push(currentWord);\n\n    // loop over characters\n    // place into words\n    for (var i = 0; i < len; i++) {\n      if (this.style !== null && this.style[i] !== undefined) {\n        currentStyle = this.style[i];\n        // make sure style contains properties needed.\n        if (currentStyle.size === undefined)\n          currentStyle.size = defaultStyle.size;\n        if (currentStyle.font === undefined)\n          currentStyle.font = defaultStyle.font;\n        if (currentStyle.tracking === undefined)\n          currentStyle.tracking = defaultStyle.tracking;\n        if (currentStyle.characterCase === undefined)\n          currentStyle.characterCase = defaultStyle.characterCase;\n        if (currentStyle.fillColor === undefined)\n          currentStyle.fillColor = defaultStyle.fillColor;\n        if (currentStyle.strokeColor === undefined)\n          currentStyle.strokeColor = defaultStyle.strokeColor;\n        if (currentStyle.strokeWidth === undefined)\n          currentStyle.strokeWidth = defaultStyle.strokeWidth;\n      }\n\n      // newline\n      // mark word as having newline\n      // create new word\n      // new line has no character\n      if (this.text.charAt(i) == \"\\n\") {\n        //only if not last char\n        if (i < len - 1) {\n          currentWord.measuredWidth = hPosition;\n          currentWord.measuredHeight = vPosition;\n          if (currentWord.measuredHeight == 0) {\n            currentWord.measuredHeight = currentStyle.size;\n          }\n          currentWord.hasNewLine = true;\n          currentWord = new Word();\n          this.words.push(currentWord);\n          vPosition = 0;\n          hPosition = 0;\n        }\n\n        continue;\n      }\n\n      //runtime test for font\n      if (FontLoader.isLoaded(currentStyle.font) === false) {\n        FontLoader.load(this, [currentStyle.font]);\n        return false;\n      }\n\n      // create character\n      char = new Character(this.text.charAt(i), currentStyle, i);\n\n      if (this.original.character) {\n        if (this.original.character.added) {\n          char.on(\"added\", this.original.character.added);\n        }\n        if (this.original.character.click) {\n          char.on(\"click\", this.original.character.click);\n        }\n        if (this.original.character.dblclick) {\n          char.on(\"dblclick\", this.original.character.dblclick);\n        }\n        if (this.original.character.mousedown) {\n          char.on(\"mousedown\", this.original.character.mousedown);\n        }\n        if (this.original.character.mouseout) {\n          char.on(\"mouseout\", this.original.character.mouseout);\n        }\n        if (this.original.character.mouseover) {\n          char.on(\"mouseover\", this.original.character.mouseover);\n        }\n        if (this.original.character.pressmove) {\n          char.on(\"pressmove\", this.original.character.pressmove);\n        }\n        if (this.original.character.pressup) {\n          char.on(\"pressup\", this.original.character.pressup);\n        }\n        if (this.original.character.removed) {\n          char.on(\"removed\", this.original.character.removed);\n        }\n        if (this.original.character.rollout) {\n          char.on(\"rollout\", this.original.character.rollout);\n        }\n        if (this.original.character.rollover) {\n          char.on(\"rollover\", this.original.character.rollover);\n        }\n        if (this.original.character.tick) {\n          char.on(\"tick\", this.original.character.tick);\n        }\n      }\n\n      if (char.missing) {\n        if (this.missingGlyphs == null) {\n          this.missingGlyphs = [];\n        }\n        this.missingGlyphs.push({\n          position: i,\n          character: this.text.charAt(i),\n          font: currentStyle.font\n        });\n      }\n\n      if (char.measuredHeight > vPosition) {\n        vPosition = char.measuredHeight;\n      }\n\n      //swap character if ligature\n      //ligatures removed if tracking or this.ligatures is false\n      if (currentStyle.tracking == 0 && this.ligatures == true) {\n        //1 char match\n        var ligTarget = this.text.substr(i, 4);\n        if (char._font.ligatures[ligTarget.charAt(0)]) {\n          //2 char match\n          if (char._font.ligatures[ligTarget.charAt(0)][ligTarget.charAt(1)]) {\n            //3 char match\n            if (\n              char._font.ligatures[ligTarget.charAt(0)][ligTarget.charAt(1)][\n                ligTarget.charAt(2)\n              ]\n            ) {\n              //4 char match\n              if (\n                char._font.ligatures[ligTarget.charAt(0)][ligTarget.charAt(1)][\n                  ligTarget.charAt(2)\n                ][ligTarget.charAt(3)]\n              ) {\n                //swap 4 char ligature\n                char.setGlyph(\n                  char._font.ligatures[ligTarget.charAt(0)][\n                    ligTarget.charAt(1)\n                  ][ligTarget.charAt(2)][ligTarget.charAt(3)].glyph\n                );\n                i = i + 3;\n              } else {\n                //swap 3 char ligature\n                char.setGlyph(\n                  char._font.ligatures[ligTarget.charAt(0)][\n                    ligTarget.charAt(1)\n                  ][ligTarget.charAt(2)].glyph\n                );\n                i = i + 2;\n              }\n            } else {\n              //swap 2 char ligature\n              char.setGlyph(\n                char._font.ligatures[ligTarget.charAt(0)][ligTarget.charAt(1)]\n                  .glyph\n              );\n              i = i + 1;\n            }\n          }\n        }\n      }\n\n      char.x = hPosition;\n\n      // push character into word\n      currentWord.addChild(char);\n\n      // space\n      // mark word as having space\n      // create new word\n      // space character\n      if (this.text.charAt(i) == \" \") {\n        currentWord.hasSpace = true;\n        currentWord.spaceOffset = char._glyph.offset * char.size;\n        hPosition =\n          char.x +\n          char._glyph.offset * char.size +\n          char.characterCaseOffset +\n          char.trackingOffset() +\n          char._glyph.getKerning(this.text.charCodeAt(i + 1), char.size);\n        currentWord.measuredWidth = hPosition;\n        currentWord.measuredHeight = vPosition;\n        hPosition = 0;\n        vPosition = 0;\n        currentWord = new Word();\n        this.words.push(currentWord);\n        continue;\n      }\n\n      // hyphen\n      // mark word as having hyphen\n      // create new word\n      // space character\n      if (this.text.charAt(i) == \"-\") {\n        currentWord.hasHyphen = true;\n      }\n\n      hPosition =\n        char.x +\n        char._glyph.offset * char.size +\n        char.characterCaseOffset +\n        char.trackingOffset() +\n        char._glyph.getKerning(this.text.charCodeAt(i + 1), char.size);\n    }\n    //case of empty word at end.\n    if (currentWord.children.length == 0) {\n      var lw = this.words.pop();\n      currentWord = this.words[this.words.length - 1];\n      hPosition = currentWord.measuredWidth;\n      vPosition = currentWord.measuredHeight;\n    }\n    currentWord.measuredWidth = hPosition;\n    currentWord.measuredHeight = vPosition;\n\n    return true;\n  }\n\n  //place words in lines\n  wordLayout() {\n    // loop over words\n    // place into lines\n    var len = this.words.length;\n    var currentLine = new Line();\n    this.lines.push(currentLine);\n\n    currentLine.y = 0;\n\n    var currentWord: Word;\n    var lastHeight: number;\n\n    this.block.addChild(currentLine);\n    var hPosition = 0;\n    var vPosition = 0;\n    var firstLine = true;\n\n    var lastLineWord: Word;\n\n    for (var i = 0; i < len; i++) {\n      currentWord = this.words[i];\n      currentWord.x = hPosition;\n\n      if (this.original.word) {\n        if (this.original.word.added) {\n          currentWord.on(\"added\", this.original.word.added);\n        }\n        if (this.original.word.click) {\n          currentWord.on(\"click\", this.original.word.click);\n        }\n        if (this.original.word.dblclick) {\n          currentWord.on(\"dblclick\", this.original.word.dblclick);\n        }\n        if (this.original.word.mousedown) {\n          currentWord.on(\"mousedown\", this.original.word.mousedown);\n        }\n        if (this.original.word.mouseout) {\n          currentWord.on(\"mouseout\", this.original.word.mouseout);\n        }\n        if (this.original.word.mouseover) {\n          currentWord.on(\"mouseover\", this.original.word.mouseover);\n        }\n        if (this.original.word.pressmove) {\n          currentWord.on(\"pressmove\", this.original.word.pressmove);\n        }\n        if (this.original.word.pressup) {\n          currentWord.on(\"pressup\", this.original.word.pressup);\n        }\n        if (this.original.word.removed) {\n          currentWord.on(\"removed\", this.original.word.removed);\n        }\n        if (this.original.word.rollout) {\n          currentWord.on(\"rollout\", this.original.word.rollout);\n        }\n        if (this.original.word.rollover) {\n          currentWord.on(\"rollover\", this.original.word.rollover);\n        }\n        if (this.original.word.tick) {\n          currentWord.on(\"tick\", this.original.word.tick);\n        }\n      }\n\n      if (firstLine) {\n        vPosition = currentWord.measuredHeight;\n      } else if (this.lineHeight != null) {\n        vPosition = this.lineHeight;\n      } else if (currentWord.measuredHeight > vPosition) {\n        vPosition = currentWord.measuredHeight;\n      }\n\n      //exceeds line width && has new line\n      if (\n        hPosition + currentWord.measuredWidth > this.width &&\n        currentWord.hasNewLine == true &&\n        currentLine.children.length > 0\n      ) {\n        if (this.lineHeight != null) {\n          lastHeight = currentLine.y + this.lineHeight;\n        } else {\n          lastHeight = currentLine.y + vPosition;\n        }\n\n        currentLine.measuredWidth = hPosition;\n        lastLineWord = this.words[i - 1];\n\n        if (lastLineWord != undefined && lastLineWord.hasSpace) {\n          currentLine.measuredWidth -= lastLineWord.spaceOffset;\n        }\n        if (firstLine == false && this.lineHeight != null) {\n          currentLine.measuredHeight = this.lineHeight;\n        } else {\n          currentLine.measuredHeight = vPosition;\n        }\n\n        firstLine = false;\n        currentLine = new Line();\n        this.lines.push(currentLine);\n        currentLine.y = lastHeight;\n        hPosition = 0;\n        currentWord.x = 0;\n        this.block.addChild(currentLine);\n        //add word\n        var swapWord = this.words[i];\n        currentLine.addChild(swapWord);\n        if (this.lineHeight != null) {\n          currentLine.measuredHeight = this.lineHeight;\n        } else {\n          currentLine.measuredHeight = swapWord.measuredHeight;\n        }\n        currentLine.measuredWidth = swapWord.measuredWidth;\n\n        //add new line\n        currentLine = new Line();\n        this.lines.push(currentLine);\n        if (this.lineHeight != null) {\n          currentLine.y = lastHeight + this.lineHeight;\n        } else {\n          currentLine.y = lastHeight + vPosition;\n        }\n        this.block.addChild(currentLine);\n        if (i < len - 1) {\n          vPosition = 0;\n        }\n\n        continue;\n      }\n\n      //wrap word to new line if length\n      else if (\n        hPosition + currentWord.measuredWidth > this.width &&\n        i > 0 &&\n        currentLine.children.length > 0\n      ) {\n        if (this.lineHeight != null) {\n          lastHeight = currentLine.y + this.lineHeight;\n        } else {\n          lastHeight = currentLine.y + vPosition;\n        }\n        currentLine.measuredWidth = hPosition;\n        lastLineWord = this.words[i - 1];\n        if (lastLineWord != undefined && lastLineWord.hasSpace) {\n          currentLine.measuredWidth -= lastLineWord.spaceOffset;\n        }\n        if (firstLine == false && this.lineHeight != null) {\n          currentLine.measuredHeight = this.lineHeight;\n        } else {\n          currentLine.measuredHeight = vPosition;\n        }\n\n        firstLine = false;\n        currentLine = new Line();\n        this.lines.push(currentLine);\n        currentLine.y = lastHeight;\n        if (i < len - 1) {\n          vPosition = 0;\n        }\n        hPosition = 0;\n        currentWord.x = hPosition;\n        this.block.addChild(currentLine);\n      }\n\n      //wrap word to new line if newline\n      else if (currentWord.hasNewLine == true) {\n        if (this.lineHeight != null) {\n          lastHeight = currentLine.y + this.lineHeight;\n        } else {\n          lastHeight = currentLine.y + vPosition;\n        }\n        currentLine.measuredWidth = hPosition + currentWord.measuredWidth;\n        if (firstLine == false && this.lineHeight != null) {\n          currentLine.measuredHeight = this.lineHeight;\n        } else {\n          currentLine.measuredHeight = vPosition;\n        }\n        currentLine.addChild(this.words[i]);\n\n        firstLine = false;\n        currentLine = new Line();\n        this.lines.push(currentLine);\n        currentLine.y = lastHeight;\n        if (i < len - 1) {\n          vPosition = 0;\n        }\n        hPosition = 0;\n\n        this.block.addChild(currentLine);\n\n        continue;\n      }\n\n      hPosition = hPosition + currentWord.measuredWidth;\n      currentLine.addChild(this.words[i]);\n    }\n\n    //case of empty word at end.\n    if (currentLine.children.length == 0) {\n      var lw = this.lines.pop();\n      currentLine = this.lines[this.lines.length - 1];\n    }\n\n    currentLine.measuredWidth = hPosition;\n    currentLine.measuredHeight = vPosition;\n  }\n\n  lineLayout() {\n    // loop over lines\n    // place into text\n    var blockHeight = 0;\n    var measuredWidth = 0;\n    var measuredHeight = 0;\n    var line;\n    var a = Align;\n    var fnt: Font = FontLoader.getFont(this.font);\n    var aHeight = (this.size * fnt.ascent) / fnt.units;\n    var cHeight = (this.size * fnt[\"cap-height\"]) / fnt.units;\n    var xHeight = (this.size * fnt[\"x-height\"]) / fnt.units;\n    var dHeight = (this.size * fnt.descent) / fnt.units;\n\n    var len = this.lines.length;\n    for (var i = 0; i < len; i++) {\n      line = this.lines[i];\n\n      if (this.original.line) {\n        if (this.original.line.added) {\n          line.on(\"added\", this.original.line.added);\n        }\n        if (this.original.line.click) {\n          line.on(\"click\", this.original.line.click);\n        }\n        if (this.original.line.dblclick) {\n          line.on(\"dblclick\", this.original.line.dblclick);\n        }\n        if (this.original.line.mousedown) {\n          line.on(\"mousedown\", this.original.line.mousedown);\n        }\n        if (this.original.line.mouseout) {\n          line.on(\"mouseout\", this.original.line.mouseout);\n        }\n        if (this.original.line.mouseover) {\n          line.on(\"mouseover\", this.original.line.mouseover);\n        }\n        if (this.original.line.pressmove) {\n          line.on(\"pressmove\", this.original.line.pressmove);\n        }\n        if (this.original.line.pressup) {\n          line.on(\"pressup\", this.original.line.pressup);\n        }\n        if (this.original.line.removed) {\n          line.on(\"removed\", this.original.line.removed);\n        }\n        if (this.original.line.rollout) {\n          line.on(\"rollout\", this.original.line.rollout);\n        }\n        if (this.original.line.rollover) {\n          line.on(\"rollover\", this.original.line.rollover);\n        }\n        if (this.original.line.tick) {\n          line.on(\"tick\", this.original.line.tick);\n        }\n      }\n\n      //correct measuredWidth if last line character contains tracking\n      if (line.lastWord() != undefined && line.lastWord().lastCharacter()) {\n        line.measuredWidth -= line\n          .lastWord()\n          .lastCharacter()\n          .trackingOffset();\n      }\n\n      measuredHeight += line.measuredHeight;\n      if (this.align === a.TOP_CENTER) {\n        //move to center\n        line.x = (this.width - line.measuredWidth) / 2;\n      } else if (this.align === a.TOP_RIGHT) {\n        //move to right\n        line.x = this.width - line.measuredWidth;\n      } else if (this.align === a.MIDDLE_CENTER) {\n        //move to center\n        line.x = (this.width - line.measuredWidth) / 2;\n      } else if (this.align === a.MIDDLE_RIGHT) {\n        //move to right\n        line.x = this.width - line.measuredWidth;\n      } else if (this.align === a.BOTTOM_CENTER) {\n        //move to center\n        line.x = (this.width - line.measuredWidth) / 2;\n      } else if (this.align === a.BOTTOM_RIGHT) {\n        //move to right\n        line.x = this.width - line.measuredWidth;\n      }\n    }\n\n    //TOP ALIGNED\n    if (\n      this.align === a.TOP_LEFT ||\n      this.align === a.TOP_CENTER ||\n      this.align === a.TOP_RIGHT\n    ) {\n      this.block.y =\n        (this.lines[0].measuredHeight * fnt.ascent) / fnt.units +\n        (this.lines[0].measuredHeight * fnt.top) / fnt.units;\n\n      //MIDDLE ALIGNED\n    } else if (\n      this.align === a.MIDDLE_LEFT ||\n      this.align === a.MIDDLE_CENTER ||\n      this.align === a.MIDDLE_RIGHT\n    ) {\n      this.block.y =\n        this.lines[0].measuredHeight +\n        (this.height - measuredHeight) / 2 +\n        (this.lines[0].measuredHeight * fnt.middle) / fnt.units;\n\n      //BOTTOM ALIGNED\n    } else if (\n      this.align === a.BOTTOM_LEFT ||\n      this.align === a.BOTTOM_CENTER ||\n      this.align === a.BOTTOM_RIGHT\n    ) {\n      this.block.y =\n        this.height -\n        this.lines[this.lines.length - 1].y +\n        (this.lines[0].measuredHeight * fnt.bottom) / fnt.units;\n    }\n\n    if (this.original.block) {\n      if (this.original.block.added) {\n        this.block.on(\"added\", this.original.block.added);\n      }\n      if (this.original.block.click) {\n        this.block.on(\"click\", this.original.block.click);\n      }\n      if (this.original.block.dblclick) {\n        this.block.on(\"dblclick\", this.original.block.dblclick);\n      }\n      if (this.original.block.mousedown) {\n        this.block.on(\"mousedown\", this.original.block.mousedown);\n      }\n      if (this.original.block.mouseout) {\n        this.block.on(\"mouseout\", this.original.block.mouseout);\n      }\n      if (this.original.block.mouseover) {\n        this.block.on(\"mouseover\", this.original.block.mouseover);\n      }\n      if (this.original.block.pressmove) {\n        this.block.on(\"pressmove\", this.original.block.pressmove);\n      }\n      if (this.original.block.pressup) {\n        this.block.on(\"pressup\", this.original.block.pressup);\n      }\n      if (this.original.block.removed) {\n        this.block.on(\"removed\", this.original.block.removed);\n      }\n      if (this.original.block.rollout) {\n        this.block.on(\"rollout\", this.original.block.rollout);\n      }\n      if (this.original.block.rollover) {\n        this.block.on(\"rollover\", this.original.block.rollover);\n      }\n      if (this.original.block.tick) {\n        this.block.on(\"tick\", this.original.block.tick);\n      }\n    }\n  }\n}\n","export enum PathFit {\n  Rainbow,\n  Stairstep\n}\n\nexport interface PathPoint {\n  x: number;\n  y: number;\n  rotation?: number;\n  offsetX?: number;\n}\n\nexport enum PathAlign {\n  Center,\n  Right,\n  Left\n}\n\nexport default class Path {\n  private pathElement: SVGPathElement = null;\n  path: string = null;\n  start: number = 0;\n  center: number = null;\n  end: number = null;\n  angles: any[] = null;\n  flipped: boolean = false;\n  fit: PathFit = PathFit.Rainbow;\n  align: PathAlign = PathAlign.Center;\n  length: number = null;\n  realLength: number = null;\n  closed: boolean = false;\n  clockwise: boolean = true;\n\n  constructor(\n    path: string,\n    start: number = 0,\n    end: number = null,\n    flipped: boolean = false,\n    fit: PathFit = PathFit.Rainbow,\n    align: PathAlign = PathAlign.Center\n  ) {\n    this.path = path;\n    this.start = start;\n    this.align = align;\n    this.end = end;\n    this.flipped = flipped;\n    this.fit = fit;\n    this.update();\n  }\n\n  update() {\n    this.pathElement = <SVGPathElement>(\n      document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\")\n    );\n    this.pathElement.setAttributeNS(null, \"d\", this.path);\n    this.length = this.pathElement.getTotalLength();\n    this.closed = this.path.toLowerCase().indexOf(\"z\") != -1;\n    var pointlength = this.length / 10;\n    var points = [];\n\n    //console.log( this.pathElement );\n    points.push(this.getRealPathPoint(0));\n    points.push(this.getRealPathPoint(pointlength));\n    points.push(this.getRealPathPoint(pointlength * 2));\n    points.push(this.getRealPathPoint(pointlength * 3));\n    points.push(this.getRealPathPoint(pointlength * 4));\n    points.push(this.getRealPathPoint(pointlength * 5));\n    points.push(this.getRealPathPoint(pointlength * 6));\n    points.push(this.getRealPathPoint(pointlength * 7));\n    points.push(this.getRealPathPoint(pointlength * 8));\n    points.push(this.getRealPathPoint(pointlength * 9));\n    points.push(this.getRealPathPoint(pointlength * 10));\n\n    var clock =\n      (points[1].x - points[0].x) * (points[1].y + points[0].y) +\n      (points[2].x - points[1].x) * (points[2].y + points[1].y) +\n      (points[3].x - points[2].x) * (points[3].y + points[2].y) +\n      (points[4].x - points[3].x) * (points[4].y + points[3].y) +\n      (points[5].x - points[4].x) * (points[5].y + points[4].y) +\n      (points[6].x - points[5].x) * (points[6].y + points[5].y) +\n      (points[7].x - points[6].x) * (points[7].y + points[6].y) +\n      (points[8].x - points[7].x) * (points[8].y + points[7].y) +\n      (points[9].x - points[8].x) * (points[9].y + points[8].y) +\n      (points[10].x - points[9].x) * (points[10].y + points[9].y);\n    //console.log( clock );\n    if (clock > 0) {\n      this.clockwise = false;\n    } else {\n      this.clockwise = true;\n    }\n\n    if (this.end == null) {\n      this.end = this.length;\n    }\n    if (this.closed == false) {\n      if (this.flipped == false) {\n        if (this.start > this.end) {\n          this.realLength = this.start - this.end;\n          this.center = this.start - this.realLength / 2;\n        } else {\n          this.realLength = this.end - this.start;\n          this.center = this.start + this.realLength / 2;\n        }\n      } else {\n        if (this.start > this.end) {\n          this.realLength = this.start - this.end;\n          this.center = this.start - this.realLength / 2;\n        } else {\n          this.realLength = this.end - this.start;\n          this.center = this.start + this.realLength / 2;\n        }\n      }\n    } else if (this.clockwise == false) {\n      if (this.flipped == false) {\n        if (this.start > this.end) {\n          this.realLength = this.start - this.end;\n          this.center = this.end + this.realLength / 2;\n        } else {\n          this.realLength = this.start + this.length - this.end;\n          this.center = this.end + this.realLength / 2;\n          if (this.center > this.length) {\n            this.center = this.center - this.length;\n          }\n        }\n      } else {\n        if (this.start > this.end) {\n          this.realLength = this.end + this.length - this.start;\n          this.center = this.start + this.realLength / 2;\n          if (this.center > this.length) {\n            this.center = this.center - this.length;\n          }\n        } else {\n          this.realLength = this.end - this.start;\n          this.center = this.start + this.realLength / 2;\n        }\n      }\n    } else {\n      if (this.flipped == false) {\n        if (this.start > this.end) {\n          this.realLength = this.end + this.length - this.start;\n          this.center = this.start + this.realLength / 2;\n          if (this.center > this.length) {\n            this.center = this.center - this.length;\n          }\n        } else {\n          this.realLength = this.end - this.start;\n          this.center = this.start + this.realLength / 2;\n        }\n      } else {\n        if (this.start > this.end) {\n          this.realLength = this.start - this.end;\n          this.center = this.end + this.realLength / 2;\n        } else {\n          this.realLength = this.start + this.length - this.end;\n          this.center = this.end + this.realLength / 2;\n          if (this.center > this.length) {\n            this.center = this.center - this.length;\n          }\n        }\n      }\n    }\n  }\n\n  getRealPathPoint(distance: number): PathPoint {\n    if (distance > this.length) {\n      return this.pathElement.getPointAtLength(distance - this.length);\n    } else if (distance < 0) {\n      return this.pathElement.getPointAtLength(distance + this.length);\n    } else {\n      return this.pathElement.getPointAtLength(distance);\n    }\n  }\n\n  getPathPoint(\n    distance: number,\n    characterLength: number = 0,\n    charOffset: number = 0\n  ): PathPoint {\n    distance = distance * 0.99;\n    characterLength = characterLength * 0.99;\n\n    //console.log( characterLength );\n    var point0: PathPoint;\n    var point1: PathPoint;\n    var point2: PathPoint;\n    var position: number;\n    var direction: boolean = true;\n    var realStart: number = 0;\n\n    if (this.closed == false) {\n      if (this.flipped == false) {\n        if (this.start > this.end) {\n          if (this.align == PathAlign.Left) {\n            realStart = this.start;\n          } else if (this.align == PathAlign.Center) {\n            realStart = this.start - (this.realLength - characterLength) / 2;\n          } else if (this.align == PathAlign.Right) {\n            realStart = this.start - this.realLength - characterLength;\n          }\n          position = realStart - distance;\n          direction = false;\n        } else {\n          if (this.align == PathAlign.Left) {\n            realStart = this.start;\n          } else if (this.align == PathAlign.Center) {\n            realStart = this.start + (this.realLength - characterLength) / 2;\n          } else if (this.align == PathAlign.Right) {\n            realStart = this.start + this.realLength - characterLength;\n          }\n          position = realStart + distance;\n        }\n      } else {\n        if (this.start > this.end) {\n          if (this.align == PathAlign.Left) {\n            realStart = this.start;\n          } else if (this.align == PathAlign.Center) {\n            realStart = this.start - (this.realLength - characterLength) / 2;\n          } else if (this.align == PathAlign.Right) {\n            realStart = this.start - this.realLength - characterLength;\n          }\n          position = realStart - distance;\n          direction = false;\n        } else {\n          if (this.align == PathAlign.Left) {\n            realStart = this.start;\n          } else if (this.align == PathAlign.Center) {\n            realStart = this.start + (this.realLength - characterLength) / 2;\n          } else if (this.align == PathAlign.Right) {\n            realStart = this.start + this.realLength - characterLength;\n          }\n          position = realStart - distance;\n        }\n      }\n    } else if (this.clockwise == false) {\n      if (this.flipped == false) {\n        if (this.start > this.end) {\n          if (this.align == PathAlign.Left) {\n            realStart = this.start;\n          } else if (this.align == PathAlign.Center) {\n            realStart = this.start - (this.realLength - characterLength) / 2;\n          } else if (this.align == PathAlign.Right) {\n            realStart = this.start - this.realLength - characterLength;\n          }\n\n          position = realStart - distance;\n          direction = false;\n        } else {\n          if (this.align == PathAlign.Left) {\n            realStart = this.start;\n            position = realStart - distance;\n          } else if (this.align == PathAlign.Center) {\n            realStart = this.start - (this.realLength - characterLength) / 2;\n            position = realStart - distance;\n          } else if (this.align == PathAlign.Right) {\n            realStart = this.start - this.realLength - characterLength;\n            position = realStart - distance;\n          }\n\n          if (position < 0) {\n            position = position + this.length;\n          }\n          direction = false;\n        }\n      } else {\n        if (this.start > this.end) {\n          if (this.align == PathAlign.Left) {\n            realStart = this.start;\n            position = realStart + distance;\n          } else if (this.align == PathAlign.Center) {\n            realStart = this.start + (this.realLength - characterLength) / 2;\n            position = realStart + distance;\n          } else if (this.align == PathAlign.Right) {\n            realStart = this.start + this.realLength - characterLength;\n            position = realStart + distance;\n          }\n\n          if (position > this.length) {\n            position = position - this.length;\n          }\n        } else {\n          if (this.align == PathAlign.Left) {\n            realStart = this.start;\n          } else if (this.align == PathAlign.Center) {\n            realStart = this.start + (this.realLength - characterLength) / 2;\n          } else if (this.align == PathAlign.Right) {\n            realStart = this.start + this.realLength - characterLength;\n          }\n          position = realStart + distance;\n        }\n      }\n    } else {\n      if (this.flipped == false) {\n        if (this.start > this.end) {\n          if (this.align == PathAlign.Left) {\n            realStart = this.start;\n            position = realStart - distance;\n          } else if (this.align == PathAlign.Center) {\n            realStart = this.start - (this.realLength - characterLength) / 2;\n            position = realStart - distance;\n          } else if (this.align == PathAlign.Right) {\n            realStart = this.start - this.realLength - characterLength;\n            position = realStart - distance;\n          }\n\n          if (position < 0) {\n            position = position + this.length;\n          }\n          direction = false;\n        } else {\n          if (this.align == PathAlign.Left) {\n            realStart = this.start;\n          } else if (this.align == PathAlign.Center) {\n            realStart = this.start - (this.realLength - characterLength) / 2;\n          } else if (this.align == PathAlign.Right) {\n            realStart = this.start - this.realLength - characterLength;\n          }\n          position = realStart - distance;\n          direction = false;\n        }\n      } else {\n        if (this.start > this.end) {\n          if (this.align == PathAlign.Left) {\n            realStart = this.start;\n          } else if (this.align == PathAlign.Center) {\n            realStart = this.start + (this.realLength - characterLength) / 2;\n          } else if (this.align == PathAlign.Right) {\n            realStart = this.start + this.realLength - characterLength;\n          }\n          position = realStart + distance;\n        } else {\n          if (this.align == PathAlign.Left) {\n            realStart = this.start;\n            position = realStart + distance;\n          } else if (this.align == PathAlign.Center) {\n            realStart = this.start + (this.realLength - characterLength) / 2;\n            position = realStart + distance;\n          } else if (this.align == PathAlign.Right) {\n            realStart = this.start + this.realLength - characterLength;\n            position = realStart + distance;\n          }\n\n          if (position > this.length) {\n            position = position - this.length;\n          }\n        }\n      }\n    }\n\n    point1 = this.getRealPathPoint(position);\n    var segment = this.pathElement.pathSegList.getItem(\n      this.pathElement.getPathSegAtLength(position)\n    ).pathSegType;\n\n    if (segment == 4) {\n      if (direction) {\n      } else {\n        if (\n          this.pathElement.getPathSegAtLength(position) !=\n          this.pathElement.getPathSegAtLength(position - charOffset)\n        ) {\n          var pp0 = this.getRealPathPoint(position);\n          var pp1 = this.getRealPathPoint(position - charOffset);\n          var ppc = this.pathElement.pathSegList.getItem(\n            this.pathElement.getPathSegAtLength(position) - 1\n          );\n          var d0 = Math.sqrt(\n            Math.pow(pp0.x - ppc[\"x\"], 2) + Math.pow(pp0.y - ppc[\"y\"], 2)\n          );\n\n          var d1 = Math.sqrt(\n            Math.pow(pp1.x - ppc[\"x\"], 2) + Math.pow(pp1.y - ppc[\"y\"], 2)\n          );\n\n          if (d0 > d1) {\n            point1 = pp0;\n            point2 = { x: ppc[\"x\"], y: ppc[\"y\"] };\n\n            var rot12 =\n              (Math.atan((point2.y - point1.y) / (point2.x - point1.x)) * 180) /\n              Math.PI;\n            if (point1.x > point2.x) {\n              rot12 = rot12 + 180;\n            }\n\n            if (rot12 < 0) {\n              rot12 = rot12 + 360;\n            }\n            if (rot12 > 360) {\n              rot12 = rot12 - 360;\n            }\n\n            point1.rotation = rot12;\n            return point1;\n          } else {\n            point1 = { x: ppc[\"x\"], y: ppc[\"y\"] };\n            point1.offsetX = -d0;\n            point1[\"next\"] = true;\n            return point1;\n          }\n        }\n      }\n    }\n\n    if (direction) {\n      point2 = this.getRealPathPoint(position + charOffset);\n      //console.log( direction , position + charOffset , this.realLength );\n    } else {\n      point2 = this.getRealPathPoint(position - charOffset);\n      //console.log( direction , position - charOffset , this.realLength );\n    }\n\n    var rot12 =\n      (Math.atan((point2.y - point1.y) / (point2.x - point1.x)) * 180) /\n      Math.PI;\n\n    if (point1.x > point2.x) {\n      rot12 = rot12 + 180;\n    }\n\n    if (rot12 < 0) {\n      rot12 = rot12 + 360;\n    }\n    if (rot12 > 360) {\n      rot12 = rot12 - 360;\n    }\n\n    point1.rotation = rot12;\n    return point1;\n  }\n}\n","enum VerticalAlign {\n  Top,\n  CapHeight,\n  Center,\n  BaseLine,\n  Bottom,\n  XHeight,\n  Ascent,\n  Percent\n}\n\nexport default VerticalAlign;\n","import Case from \"./Case\";\nimport { Style, ConstructObj } from \"./Interfaces\";\nimport Path, { PathFit, PathAlign } from \"./Path\";\nimport VerticalAlign from \"./VerticalAlign\";\nimport FontLoader from \"./FontLoader\";\nimport Character from \"./Character\";\nimport Accessibility from \"./Accessibility\";\nimport Font from \"./Font\";\n\nexport default class PathText extends createjs.Container {\n  text: string = \"\";\n  characterCase: Case = Case.NORMAL;\n  size: number = 12;\n  font: string = \"belinda\";\n  tracking: number = 0;\n  ligatures: boolean = false;\n  minSize: number = null;\n  maxTracking: number = null;\n  fillColor: string = \"#000\";\n  strokeColor: string = null;\n  strokeWidth: number = null;\n  style: Style[] = null;\n  debug: boolean = false;\n  characters: Character[];\n  block: createjs.Container;\n  original: ConstructObj = null;\n  autoExpand: boolean = false;\n  autoReduce: boolean = false;\n  overset: boolean = false;\n  oversetIndex: number = null;\n  pathPoints: Path = null;\n  path: string = \"\";\n  start: number = 0;\n  end: number = null;\n  flipped: boolean = false;\n  fit: PathFit = PathFit.Rainbow;\n  align: PathAlign = PathAlign.Center;\n  valign: VerticalAlign = VerticalAlign.BaseLine;\n  missingGlyphs: any[] = null;\n  renderCycle: boolean = true;\n  valignPercent: number = 1;\n  initialTracking: number = 0;\n  initialOffset: number = 0;\n  measured: boolean = false;\n  oversetPotential: boolean = false;\n\n  //accessibility\n  accessibilityText: string = null;\n  accessibilityPriority: number = 2;\n  accessibilityId: number = null;\n\n  constructor(props: ConstructObj = null) {\n    super();\n\n    if (props) {\n      this.original = props;\n      this.set(props);\n      this.original.tracking = this.tracking;\n    }\n    if (this.style == null) {\n      FontLoader.load(this, [this.font]);\n    } else {\n      var fonts = [this.font];\n      var styleLength = this.style.length;\n      for (var i = 0; i < styleLength; ++i) {\n        if (this.style[i] != undefined) {\n          if (this.style[i].font != undefined) {\n            fonts.push(this.style[i].font);\n          }\n        }\n      }\n      FontLoader.load(this, fonts);\n    }\n    this.pathPoints = new Path(\n      this.path,\n      this.start,\n      this.end,\n      this.flipped,\n      this.fit,\n      this.align\n    );\n    //console.log( this );\n  }\n\n  complete() {}\n\n  setPath(path: string) {\n    this.path = path;\n    this.pathPoints.path = this.path;\n    this.pathPoints.update();\n  }\n\n  setStart(start: number) {\n    this.start = start;\n    this.pathPoints.start = this.start;\n    this.pathPoints.update();\n  }\n\n  setEnd(end: number) {\n    this.end = end;\n    this.pathPoints.end = this.end;\n    this.pathPoints.update();\n  }\n\n  setFlipped(flipped: boolean) {\n    this.flipped = flipped;\n    this.pathPoints.flipped = this.flipped;\n    this.pathPoints.update();\n  }\n\n  setFit(fit: PathFit = PathFit.Rainbow) {\n    this.fit = fit;\n    this.pathPoints.fit = this.fit;\n    this.pathPoints.update();\n  }\n\n  setAlign(align: PathAlign = PathAlign.Center) {\n    this.align = align;\n    this.pathPoints.align = this.align;\n    this.pathPoints.update();\n  }\n\n  fontLoaded() {\n    this.layout();\n  }\n\n  render() {\n    this.stage.update();\n  }\n\n  getWidth(): number {\n    return this.pathPoints.realLength;\n  }\n\n  layout() {\n    //accessibility api\n    Accessibility.set(this);\n    this.overset = false;\n    this.oversetIndex = null;\n    this.removeAllChildren();\n    this.characters = [];\n    this.missingGlyphs = null;\n    this.measured = false;\n    this.oversetPotential = false;\n    if (this.debug == true) {\n      var s = new createjs.Shape();\n      s.graphics.beginStroke(\"#FF0000\");\n      s.graphics.setStrokeStyle(0.1);\n      s.graphics.decodeSVGPath(this.path);\n      s.graphics.endFill();\n      s.graphics.endStroke();\n      this.addChild(s);\n\n      s = new createjs.Shape();\n      var pp = this.pathPoints.getRealPathPoint(0);\n      s.x = pp.x;\n      s.y = pp.y;\n      s.graphics.beginFill(\"black\");\n      s.graphics.drawCircle(0, 0, 2);\n      this.addChild(s);\n\n      s = new createjs.Shape();\n      var pp = this.pathPoints.getRealPathPoint(this.pathPoints.start);\n      s.x = pp.x;\n      s.y = pp.y;\n      s.graphics.beginFill(\"green\");\n      s.graphics.drawCircle(0, 0, 2);\n      this.addChild(s);\n\n      s = new createjs.Shape();\n      pp = this.pathPoints.getRealPathPoint(this.pathPoints.end);\n      s.x = pp.x;\n      s.y = pp.y;\n      s.graphics.beginFill(\"red\");\n      s.graphics.drawCircle(0, 0, 2);\n      this.addChild(s);\n\n      s = new createjs.Shape();\n      pp = this.pathPoints.getRealPathPoint(this.pathPoints.center);\n      s.x = pp.x;\n      s.y = pp.y;\n      s.graphics.beginFill(\"blue\");\n      s.graphics.drawCircle(0, 0, 2);\n      this.addChild(s);\n    }\n\n    if (this.text === \"\" || this.text === undefined) {\n      this.render();\n      return;\n    }\n\n    this.block = new createjs.Container();\n    this.addChild(this.block);\n\n    if (this.autoExpand === true || this.autoReduce === true) {\n      if (this.measure() === false) {\n        this.removeAllChildren();\n        return;\n      }\n    }\n\n    if (this.renderCycle === false) {\n      this.removeAllChildren();\n      this.complete();\n      return;\n    }\n\n    if (this.characterLayout() === false) {\n      this.removeAllChildren();\n      return;\n    }\n    this.render();\n    this.complete();\n  }\n\n  measure(): boolean {\n    this.measured = true;\n    //Extract orgin sizing from this.original to preserve\n    //metrics. autoMeasure will change style properties\n    //directly. Change this.original to rerender.\n\n    var size = this.original.size;\n    var len = this.text.length;\n    var width = this.getWidth();\n    var defaultStyle = {\n      size: this.original.size,\n      font: this.original.font,\n      tracking: this.original.tracking,\n      characterCase: this.original.characterCase\n    };\n    var currentStyle: any;\n    var charCode: number = null;\n    var font: Font;\n    var charMetrics = [];\n    var largestFontSize = defaultStyle.size;\n    //console.log( \"LOOPCHAR===============\" );\n    //console.log( \" len: \" + len );\n    for (var i = 0; i < len; i++) {\n      charCode = this.text.charCodeAt(i);\n\n      currentStyle = defaultStyle;\n      if (\n        this.original.style !== undefined &&\n        this.original.style[i] !== undefined\n      ) {\n        currentStyle = this.original.style[i];\n        // make sure style contains properties needed.\n        if (currentStyle.size === undefined)\n          currentStyle.size = defaultStyle.size;\n        if (currentStyle.font === undefined)\n          currentStyle.font = defaultStyle.font;\n        if (currentStyle.tracking === undefined)\n          currentStyle.tracking = defaultStyle.tracking;\n      }\n      if (currentStyle.size > largestFontSize) {\n        largestFontSize = currentStyle.size;\n      }\n      font = FontLoader.fonts[currentStyle.font];\n\n      //console.log( currentStyle.tracking , font.units );\n\n      charMetrics.push({\n        char: this.text[i],\n        size: currentStyle.size,\n        charCode: charCode,\n        font: currentStyle.font,\n        offset: font.glyphs[charCode].offset,\n        units: font.units,\n        tracking: this.trackingOffset(\n          currentStyle.tracking,\n          currentStyle.size,\n          font.units\n        ),\n        kerning: font.glyphs[charCode].getKerning(this.getCharCodeAt(i + 1), 1)\n      });\n      //console.log( this.text[i] );\n    }\n\n    //save space char using last known width/height\n    var space: any = {\n      char: \" \",\n      size: currentStyle.size,\n      charCode: 32,\n      font: currentStyle.font,\n      offset: font.glyphs[32].offset,\n      units: font.units,\n      tracking: 0,\n      kerning: 0\n    };\n\n    charMetrics[charMetrics.length - 1].tracking = 0;\n    //charMetrics[ charMetrics.length-1 ].kerning=0;\n\n    len = charMetrics.length;\n\n    //measured without size\n    var metricBaseWidth = 0;\n    //measured at size\n    var metricRealWidth = 0;\n    //measured at size with tracking\n    var metricRealWidthTracking = 0;\n\n    var current = null;\n    //console.log( \" len: \" + len );\n    //console.log( \"LOOPMETRICS===============\" );\n    for (var i = 0; i < len; i++) {\n      current = charMetrics[i];\n      metricBaseWidth = metricBaseWidth + current.offset + current.kerning;\n      metricRealWidth =\n        metricRealWidth + (current.offset + current.kerning) * current.size;\n      metricRealWidthTracking =\n        metricRealWidthTracking +\n        (current.offset + current.kerning + current.tracking) * current.size;\n      //console.log( current.char );\n    }\n    //console.log( \"METRICS===============\" );\n    //console.log( \"mbw:  \" + metricBaseWidth );\n    //console.log( \"mrw:  \" + metricRealWidth );\n    //console.log( \"mrwt: \" + metricRealWidthTracking );\n    //console.log( \"widt4: \" + this.getWidth() );\n    //console.log( \" len: \" + len );\n    //console.log( charMetrics );\n    //console.log( \"======================\" );\n\n    //size cases\n    if (metricRealWidth > width) {\n      if (this.autoReduce === true) {\n        this.tracking = 0;\n        this.size =\n          (this.original.size * width) /\n          (metricRealWidth + space.offset * space.size);\n        if (this.minSize != null && this.size < this.minSize) {\n          this.size = this.minSize;\n          if (this.renderCycle === false) {\n            this.overset = true;\n          } else {\n            this.oversetPotential = true;\n          }\n        }\n        //console.log( \"REDUCE SIZE\")\n        return true;\n      }\n      //tracking cases\n    } else {\n      var trackMetric = this.offsetTracking(\n        (width - metricRealWidth) / len,\n        current.size,\n        current.units\n      );\n      if (trackMetric < 0) {\n        trackMetric = 0;\n      }\n      //autoexpand case\n      if (trackMetric > this.original.tracking && this.autoExpand) {\n        if (this.maxTracking != null && trackMetric > this.maxTracking) {\n          this.tracking = this.maxTracking;\n        } else {\n          this.tracking = trackMetric;\n        }\n        this.size = this.original.size;\n        //console.log( \"EXPAND TRACKING\")\n        return true;\n      }\n      //autoreduce tracking case\n      if (trackMetric < this.original.tracking && this.autoReduce) {\n        if (this.maxTracking != null && trackMetric > this.maxTracking) {\n          this.tracking = this.maxTracking;\n        } else {\n          this.tracking = trackMetric;\n        }\n        this.size = this.original.size;\n        //console.log( \"REDUCE TRACKING\")\n        return true;\n      }\n    }\n    return true;\n  }\n\n  //place characters in words\n  characterLayout(): boolean {\n    //char layout\n    var len = this.text.length;\n    var char: Character;\n    var defaultStyle = {\n      size: this.size,\n      font: this.font,\n      tracking: this.tracking,\n      characterCase: this.characterCase,\n      fillColor: this.fillColor,\n      strokeColor: this.strokeColor,\n      strokeWidth: this.strokeWidth\n    };\n    var currentStyle = defaultStyle;\n    var hPosition: number = 0;\n    var charKern: number;\n    var tracking: number;\n    var angle: number;\n\n    // loop over characters\n    // place into lines\n    for (var i = 0; i < len; i++) {\n      if (this.style !== null && this.style[i] !== undefined) {\n        currentStyle = this.style[i];\n        // make sure style contains properties needed.\n        if (currentStyle.size === undefined)\n          currentStyle.size = defaultStyle.size;\n        if (currentStyle.font === undefined)\n          currentStyle.font = defaultStyle.font;\n        if (currentStyle.tracking === undefined)\n          currentStyle.tracking = defaultStyle.tracking;\n        if (currentStyle.characterCase === undefined)\n          currentStyle.characterCase = defaultStyle.characterCase;\n        if (currentStyle.fillColor === undefined)\n          currentStyle.fillColor = defaultStyle.fillColor;\n        if (currentStyle.strokeColor === undefined)\n          currentStyle.strokeColor = defaultStyle.strokeColor;\n        if (currentStyle.strokeWidth === undefined)\n          currentStyle.strokeWidth = defaultStyle.strokeWidth;\n      }\n\n      // newline\n      if (this.text.charAt(i) == \"\\n\") {\n        continue;\n      }\n\n      //runtime test for font\n      if (FontLoader.isLoaded(currentStyle.font) === false) {\n        FontLoader.load(this, [currentStyle.font]);\n        return false;\n      }\n\n      //initalize with initialTracking and initialOffset;\n      if (hPosition == 0) {\n        hPosition =\n          this.initialOffset +\n          this.trackingOffset(\n            this.initialTracking,\n            currentStyle.size,\n            FontLoader.getFont(currentStyle.font).units\n          );\n      }\n\n      // create character\n      char = new Character(this.text.charAt(i), currentStyle, i);\n      if (this.original.character) {\n        if (this.original.character.added) {\n          char.on(\"added\", this.original.character.added);\n        }\n        if (this.original.character.click) {\n          char.on(\"click\", this.original.character.click);\n        }\n        if (this.original.character.dblclick) {\n          char.on(\"dblclick\", this.original.character.dblclick);\n        }\n        if (this.original.character.mousedown) {\n          char.on(\"mousedown\", this.original.character.mousedown);\n        }\n        if (this.original.character.mouseout) {\n          char.on(\"mouseout\", this.original.character.mouseout);\n        }\n        if (this.original.character.mouseover) {\n          char.on(\"mouseover\", this.original.character.mouseover);\n        }\n        if (this.original.character.pressmove) {\n          char.on(\"pressmove\", this.original.character.pressmove);\n        }\n        if (this.original.character.pressup) {\n          char.on(\"pressup\", this.original.character.pressup);\n        }\n        if (this.original.character.removed) {\n          char.on(\"removed\", this.original.character.removed);\n        }\n        if (this.original.character.rollout) {\n          char.on(\"rollout\", this.original.character.rollout);\n        }\n        if (this.original.character.rollover) {\n          char.on(\"rollover\", this.original.character.rollover);\n        }\n        if (this.original.character.tick) {\n          char.on(\"tick\", this.original.character.tick);\n        }\n      }\n\n      if (char.missing) {\n        if (this.missingGlyphs == null) {\n          this.missingGlyphs = [];\n        }\n        this.missingGlyphs.push({\n          position: i,\n          character: this.text.charAt(i),\n          font: currentStyle.font\n        });\n      }\n\n      //swap character if ligature\n      //ligatures removed if tracking or this.ligatures is false\n      if (currentStyle.tracking == 0 && this.ligatures == true) {\n        //1 char match\n        var ligTarget = this.text.substr(i, 4);\n        if (char._font.ligatures[ligTarget.charAt(0)]) {\n          //2 char match\n          if (char._font.ligatures[ligTarget.charAt(0)][ligTarget.charAt(1)]) {\n            //3 char match\n            if (\n              char._font.ligatures[ligTarget.charAt(0)][ligTarget.charAt(1)][\n                ligTarget.charAt(2)\n              ]\n            ) {\n              //4 char match\n              if (\n                char._font.ligatures[ligTarget.charAt(0)][ligTarget.charAt(1)][\n                  ligTarget.charAt(2)\n                ][ligTarget.charAt(3)]\n              ) {\n                //swap 4 char ligature\n                char.setGlyph(\n                  char._font.ligatures[ligTarget.charAt(0)][\n                    ligTarget.charAt(1)\n                  ][ligTarget.charAt(2)][ligTarget.charAt(3)].glyph\n                );\n                i = i + 3;\n              } else {\n                //swap 3 char ligature\n                char.setGlyph(\n                  char._font.ligatures[ligTarget.charAt(0)][\n                    ligTarget.charAt(1)\n                  ][ligTarget.charAt(2)].glyph\n                );\n                i = i + 2;\n              }\n            } else {\n              //swap 2 char ligature\n              char.setGlyph(\n                char._font.ligatures[ligTarget.charAt(0)][ligTarget.charAt(1)]\n                  .glyph\n              );\n              i = i + 1;\n            }\n          }\n        }\n      }\n\n      //char.hPosition = hPosition;\n\n      // push character into block\n      //this.characters.push( char );\n      //this.block.addChild( char );\n\n      if (this.overset == true) {\n        break;\n      } else if (\n        this.measured == true &&\n        hPosition + char.measuredWidth > this.getWidth() &&\n        this.oversetPotential == true\n      ) {\n        //char.hPosition = hPosition;\n        //this.characters.push( char );\n        //this.block.addChild( char );\n\n        //this.block.removeChild(this.characters.pop() );\n        this.oversetIndex = i;\n        this.overset = true;\n        break;\n      } else if (\n        this.measured == false &&\n        hPosition + char.measuredWidth > this.getWidth()\n      ) {\n        //char.hPosition = hPosition;\n        //this.characters.push( char );\n        //this.block.addChild( char );\n\n        //this.block.removeChild(this.characters.pop() );\n        this.oversetIndex = i;\n        this.overset = true;\n        break;\n      } else {\n        char.hPosition = hPosition;\n        this.characters.push(char);\n        this.block.addChild(char);\n      }\n\n      //char.x = hPosition;\n      hPosition =\n        hPosition +\n        char._glyph.offset * char.size +\n        char.characterCaseOffset +\n        char.trackingOffset() +\n        char._glyph.getKerning(this.getCharCodeAt(i + 1), char.size);\n    }\n\n    len = this.characters.length;\n    var pathPoint: any;\n    var nextRotation = false;\n    for (i = 0; i < len; i++) {\n      char = <Character>this.characters[i];\n      //console.log( this.getWidth() );\n      pathPoint = this.pathPoints.getPathPoint(\n        char.hPosition,\n        hPosition,\n        char._glyph.offset * char.size\n      );\n      //console.log( pathPoint )\n      //correct rotation around linesegments\n      if (nextRotation == true) {\n        this.characters[i - 1].parent.rotation = pathPoint.rotation;\n        nextRotation = false;\n      }\n      if (pathPoint.next == true) {\n        nextRotation = true;\n      }\n\n      char.rotation = pathPoint.rotation;\n\n      //Baseline\n      if (this.valign == VerticalAlign.BaseLine) {\n        char.x = pathPoint.x;\n        char.y = pathPoint.y;\n\n        //reparent child into offset container\n        if (pathPoint.offsetX) {\n          var offsetChild = new createjs.Container();\n          offsetChild.x = pathPoint.x;\n          offsetChild.y = pathPoint.y;\n          offsetChild.rotation = pathPoint.rotation;\n          char.parent.removeChild(char);\n          offsetChild.addChild(char);\n          char.x = pathPoint.offsetX;\n          char.y = 0;\n          char.rotation = 0;\n          this.addChild(offsetChild);\n        } else {\n          char.x = pathPoint.x;\n          char.y = pathPoint.y;\n          char.rotation = pathPoint.rotation;\n        }\n      } else {\n        var offsetChild = new createjs.Container();\n        offsetChild.x = pathPoint.x;\n        offsetChild.y = pathPoint.y;\n        offsetChild.rotation = pathPoint.rotation;\n        char.parent.removeChild(char);\n        offsetChild.addChild(char);\n        char.x = 0;\n\n        //vertical alignment\n        if (this.valign == VerticalAlign.Top) {\n          char.y = char.size;\n        } else if (this.valign == VerticalAlign.Bottom) {\n          char.y = (char._font.descent / char._font.units) * char.size;\n        } else if (this.valign == VerticalAlign.CapHeight) {\n          char.y = (char._font[\"cap-height\"] / char._font.units) * char.size;\n        } else if (this.valign == VerticalAlign.XHeight) {\n          char.y = (char._font[\"x-height\"] / char._font.units) * char.size;\n        } else if (this.valign == VerticalAlign.Ascent) {\n          char.y = (char._font.ascent / char._font.units) * char.size;\n        } else if (this.valign == VerticalAlign.Center) {\n          char.y =\n            ((char._font[\"cap-height\"] / char._font.units) * char.size) / 2;\n        } else if (this.valign == VerticalAlign.Percent) {\n          char.y = this.valignPercent * char.size;\n        } else {\n          char.y = 0;\n        }\n        char.rotation = 0;\n        this.addChild(offsetChild);\n      }\n    }\n\n    if (this.original.block) {\n      if (this.original.block.added) {\n        this.block.on(\"added\", this.original.block.added);\n      }\n      if (this.original.block.click) {\n        this.block.on(\"click\", this.original.block.click);\n      }\n      if (this.original.block.dblclick) {\n        this.block.on(\"dblclick\", this.original.block.dblclick);\n      }\n      if (this.original.block.mousedown) {\n        this.block.on(\"mousedown\", this.original.block.mousedown);\n      }\n      if (this.original.block.mouseout) {\n        this.block.on(\"mouseout\", this.original.block.mouseout);\n      }\n      if (this.original.block.mouseover) {\n        this.block.on(\"mouseover\", this.original.block.mouseover);\n      }\n      if (this.original.block.pressmove) {\n        this.block.on(\"pressmove\", this.original.block.pressmove);\n      }\n      if (this.original.block.pressup) {\n        this.block.on(\"pressup\", this.original.block.pressup);\n      }\n      if (this.original.block.removed) {\n        this.block.on(\"removed\", this.original.block.removed);\n      }\n      if (this.original.block.rollout) {\n        this.block.on(\"rollout\", this.original.block.rollout);\n      }\n      if (this.original.block.rollover) {\n        this.block.on(\"rollover\", this.original.block.rollover);\n      }\n      if (this.original.block.tick) {\n        this.block.on(\"tick\", this.original.block.tick);\n      }\n    }\n\n    return true;\n  }\n\n  trackingOffset(tracking: number, size: number, units: number): number {\n    return size * (2.5 / units + 1 / 900 + tracking / 990);\n  }\n\n  offsetTracking(offset: number, size: number, units: number): number {\n    return Math.floor(((offset - 2.5 / units - 1 / 900) * 990) / size);\n  }\n\n  getCharCodeAt(index: number): number {\n    if (this.characterCase == Case.NORMAL) {\n      return this.text.charAt(index).charCodeAt(0);\n    } else if (this.characterCase == Case.UPPER) {\n      return this.text\n        .charAt(index)\n        .toUpperCase()\n        .charCodeAt(0);\n    } else if (this.characterCase == Case.LOWER) {\n      return this.text\n        .charAt(index)\n        .toLowerCase()\n        .charCodeAt(0);\n    } else if (this.characterCase == Case.SMALL_CAPS) {\n      return this.text\n        .charAt(index)\n        .toUpperCase()\n        .charCodeAt(0);\n    } else {\n      //fallback case for unknown.\n      return this.text.charAt(index).charCodeAt(0);\n    }\n  }\n}\n"],"names":["SVGArc","v","Math","sqrt","pow","u","dot","mag","angle","cost","cos","sint","sin","c","sign","acos","ratio","x1","rx","ry","phi","fA","fS","x2","PI","abs","xPrime","rotClockwise","midPoint","xPrime2","pointMul","rx2","ry2","lambda","t","b","factor","cPrime","scale","sum","rotCounterClockwise","meanVec","x1UnitVector","x2UnitVector","theta","deltaTheta","isNaN","start","end","cx","cy","ctx","lineTo","translate","rotate","arc","parsePathData","data","cs","cc","replace","RegExp","n","length","arr","split","ca","cpx","cpy","arrLength","startPoint","str","charAt","slice","p","shift","pLength","i","parseFloat","cmd","points","startX","startY","prevCmd","ctlPtx","ctlPty","psi","fa","fs","y1","push","dx","dy","command","x","y","Graphics","target","svgpath","G","createjs","append","LineTo","MoveTo","BezierCurveTo","QuadraticCurveTo","ClosePath","applyMixins","derivedCtor","baseCtors","forEach","baseCtor","Object","getOwnPropertyNames","prototype","name","defineProperty","getOwnPropertyDescriptor","GraphicsMixin","init","Accessibility","element","stage","timeout","clearTimeout","accessibilityId","setTimeout","update","sort","a","accessibilityPriority","len","out","currentCanvas","canvas","innerHTML","accessibilityText","text","Align","Case","Font","from","glyphs","undefined","kerning","Glyph","_graphic","_stroke","Stroke","_strokeStyle","StrokeStyle","_fill","Fill","decodeSVGPath","path","draw","characterCode","size","FontLoader","fonts","hasOwnProperty","loaded","loader","loaderId","loaders","_id","_target","fontCount","prop","loadFont","id","isLoaded","window","fontLoaded","fontName","check","targets","font","req","XMLHttpRequest","localStorage","cache","local","JSON","parse","getItem","join","version","cacheResponseText","cacheFont","onload","setItem","stringify","responseText","lines","line","glyph","parseInt","offset","units","lineLen","j","pathLength","ligatures","k","cloneGlyph","top","middle","bottom","lLen","l","open","send","Character","character","style","index","set","characterCase","NORMAL","UPPER","toUpperCase","LOWER","toLowerCase","SMALL_CAPS","upperSmall","charCodeAt","_font","getFont","_glyph","String","fromCharCode","console","log","missing","graphics","graphic","scaleX","characterCaseOffset","scaleY","measuredHeight","ascent","descent","measuredWidth","ha","Shape","beginFill","drawRect","hitArea","tracking","fillColor","matrix","strokeColor","width","strokeWidth","Line","children","Container","CharacterText","props","TOP_LEFT","original","load","styleLength","layout","overset","measured","oversetPotential","singleLine","missingGlyphs","removeAllChildren","render","complete","block","addChild","debug","s","beginStroke","setStrokeStyle","height","autoExpand","autoReduce","measure","renderCycle","characterLayout","lineLayout","getWidth","defaultStyle","currentStyle","charCode","charMetrics","largestFontSize","trackingOffset","getKerning","getCharCodeAt","space","metricBaseWidth","metricRealWidth","metricRealWidthTracking","current","minSize","trackMetric","offsetTracking","maxTracking","floor","char","hPosition","vPosition","lineY","firstLine","currentLine","lineHeight","added","on","click","dblclick","mousedown","mouseout","mouseover","pressmove","pressup","removed","rollout","rollover","tick","position","ligTarget","substr","setGlyph","lastchar","oversetIndex","lw","pop","fnt","aHeight","cHeight","xHeight","dHeight","lastCharacter","align","TOP_CENTER","TOP_RIGHT","MIDDLE_CENTER","MIDDLE_RIGHT","BOTTOM_CENTER","BOTTOM_RIGHT","MIDDLE_LEFT","BOTTOM_LEFT","Info","Word","Text","Rectangle","words","wordLayout","currentWord","hasNewLine","hasSpace","spaceOffset","hasHyphen","lastHeight","lastLineWord","word","swapWord","lastWord","PathFit","PathAlign","Path","flipped","fit","Rainbow","Center","pathElement","document","createElementNS","setAttributeNS","getTotalLength","closed","indexOf","pointlength","getRealPathPoint","clock","clockwise","realLength","center","distance","getPointAtLength","characterLength","charOffset","point1","point2","direction","realStart","Left","Right","segment","pathSegList","getPathSegAtLength","pathSegType","pp0","pp1","ppc","d0","d1","rot12","atan","rotation","offsetX","VerticalAlign","PathText","BaseLine","pathPoints","characters","endFill","endStroke","pp","drawCircle","initialOffset","initialTracking","pathPoint","nextRotation","getPathPoint","parent","next","valign","offsetChild","removeChild","Top","Bottom","CapHeight","XHeight","Ascent","Percent","valignPercent"],"mappings":"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"}