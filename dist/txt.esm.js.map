{"version":3,"file":"txt.esm.js","sources":["../src/SVGArc.ts","../src/SVGPath.ts","../src/Graphics.ts","../src/applyMixins.ts","../src/GraphicsMixin.ts","../src/Accessibility.ts","../src/Align.ts","../src/Case.ts","../src/Font.ts","../src/Glyph.ts","../src/FontLoader.ts","../src/Character.ts","../src/TextContainer.ts","../src/Line.ts","../src/utils/apply-shape-event-listeners.ts","../src/CharacterText.ts","../src/Info.ts","../src/Word.ts","../src/Text.ts","../src/Path.ts","../src/VerticalAlign.ts","../src/PathText.ts","../src/index.ts"],"sourcesContent":["export default class SVGArc {\n  r0: number;\n  r1: number;\n  cx: number;\n  cy: number;\n  phi: number;\n  rx: number;\n  ry: number;\n  start: number;\n  end: number;\n  fS: boolean;\n  x2: number[];\n\n  mag(v) {\n    return Math.sqrt(Math.pow(v[0], 2) + Math.pow(v[1], 2));\n  }\n\n  meanVec(u, v) {\n    return [(u[0] + v[0]) / 2.0, (u[1] + v[1]) / 2.0];\n  }\n\n  dot(u, v) {\n    return u[0] * v[0] + u[1] * v[1];\n  }\n\n  ratio(u, v) {\n    return this.dot(u, v) / (this.mag(u) * this.mag(v));\n  }\n\n  rotClockwise(v, angle) {\n    const cost = Math.cos(angle);\n    const sint = Math.sin(angle);\n    return [cost * v[0] + sint * v[1], -1 * sint * v[0] + cost * v[1]];\n  }\n\n  pointMul(u, v) {\n    return [u[0] * v[0], u[1] * v[1]];\n  }\n\n  scale(c, v) {\n    return [c * v[0], c * v[1]];\n  }\n\n  sum(u, v) {\n    return [u[0] + v[0], u[1] + v[1]];\n  }\n\n  angle(u, v) {\n    let sign = 1.0;\n    if (u[0] * v[1] - u[1] * v[0] < 0) {\n      sign = -1.0;\n    }\n    return sign * Math.acos(this.ratio(u, v));\n  }\n\n  rotCounterClockwise(v, angle) {\n    const cost = Math.cos(angle);\n    const sint = Math.sin(angle);\n    return [cost * v[0] - sint * v[1], sint * v[0] + cost * v[1]];\n  }\n\n  midPoint(u, v) {\n    return [(u[0] - v[0]) / 2.0, (u[1] - v[1]) / 2.0];\n  }\n\n  constructor(\n    x1: number[],\n    rx: number,\n    ry: number,\n    phiarg: number,\n    fA: boolean,\n    fS: boolean,\n    x2: number[]\n  ) {\n    this.rx = rx;\n    this.ry = ry;\n    this.x2 = x2;\n    if (rx == 0 || ry == 0) {\n      return;\n    }\n    const phi = phiarg * (Math.PI / 180.0);\n    rx = Math.abs(rx);\n    ry = Math.abs(ry);\n    const xPrime = this.rotClockwise(this.midPoint(x1, x2), phi); // F.6.5.1\n    const xPrime2 = this.pointMul(xPrime, xPrime);\n    let rx2 = Math.pow(rx, 2);\n    let ry2 = Math.pow(ry, 2);\n\n    const lambda = Math.sqrt(xPrime2[0] / rx2 + xPrime2[1] / ry2);\n    if (lambda > 1) {\n      rx *= lambda;\n      ry *= lambda;\n      rx2 = Math.pow(rx, 2);\n      ry2 = Math.pow(ry, 2);\n    }\n    let t = rx2 * ry2 - rx2 * xPrime2[1] - ry2 * xPrime2[0];\n    if (t > -0.000001 && t < 0.000001) {\n      t = 0;\n    }\n    let b = rx2 * xPrime2[1] + ry2 * xPrime2[0];\n    if (b > -0.000001 && b < 0.000001) {\n      b = 0;\n    }\n    let factor = Math.sqrt(t / b);\n    if (fA == fS) {\n      factor *= -1.0;\n    }\n    const cPrime = this.scale(factor, [\n      (rx * xPrime[1]) / ry,\n      (-ry * xPrime[0]) / rx\n    ]);\n    const c = this.sum(\n      this.rotCounterClockwise(cPrime, phi),\n      this.meanVec(x1, x2)\n    );\n    const x1UnitVector = [\n      (xPrime[0] - cPrime[0]) / rx,\n      (xPrime[1] - cPrime[1]) / ry\n    ];\n    const x2UnitVector = [\n      (-1.0 * xPrime[0] - cPrime[0]) / rx,\n      (-1.0 * xPrime[1] - cPrime[1]) / ry\n    ];\n    const theta = this.angle([1, 0], x1UnitVector);\n    let deltaTheta = this.angle(x1UnitVector, x2UnitVector);\n    if (isNaN(deltaTheta)) {\n      deltaTheta = Math.PI;\n    }\n    const start = theta;\n    const end = theta + deltaTheta;\n    this.cx = c[0];\n    this.cy = c[1];\n    this.phi = phi;\n    this.rx = rx;\n    this.ry = ry;\n    this.start = start;\n    this.end = end;\n    this.fS = !fS;\n  }\n\n  exec(ctx: CanvasRenderingContext2D) {\n    if (this.rx == 0 || this.ry == 0) {\n      ctx.lineTo(this.x2[0], this.x2[1]);\n      return;\n    }\n    ctx.translate(this.cx, this.cy);\n    ctx.rotate(this.phi);\n    ctx.scale(this.rx, this.ry);\n    ctx.arc(0, 0, 1, this.start, this.end, this.fS);\n    ctx.scale(1 / this.rx, 1 / this.ry);\n    ctx.rotate(-this.phi);\n    ctx.translate(-this.cx, -this.cy);\n  }\n}\n","export function parsePathData(data) {\n  if (!data) {\n    return [];\n  }\n  let cs = data;\n  const cc = [\n    \"m\",\n    \"M\",\n    \"l\",\n    \"L\",\n    \"v\",\n    \"V\",\n    \"h\",\n    \"H\",\n    \"z\",\n    \"Z\",\n    \"c\",\n    \"C\",\n    \"q\",\n    \"Q\",\n    \"t\",\n    \"T\",\n    \"s\",\n    \"S\",\n    \"a\",\n    \"A\"\n  ];\n  cs = cs.replace(new RegExp(\" \", \"g\"), \",\");\n  for (let n = 0; n < cc.length; n++) {\n    cs = cs.replace(new RegExp(cc[n], \"g\"), \"|\" + cc[n]);\n  }\n  const arr = cs.split(\"|\");\n  const ca = [];\n  let cpx = 0;\n  let cpy = 0;\n  const arrLength = arr.length;\n  let startPoint = null;\n  for (let n = 1; n < arrLength; n++) {\n    let str = arr[n];\n    let c = str.charAt(0);\n    str = str.slice(1);\n    str = str.replace(new RegExp(\",-\", \"g\"), \"-\");\n    str = str.replace(new RegExp(\"-\", \"g\"), \",-\");\n    str = str.replace(new RegExp(\"e,-\", \"g\"), \"e-\");\n    let p = str.split(\",\");\n    if (p.length > 0 && p[0] === \"\") {\n      p.shift();\n    }\n    const pLength = p.length;\n    for (let i = 0; i < pLength; i++) {\n      p[i] = parseFloat(p[i]);\n    }\n    if (c === \"z\" || c === \"Z\") {\n      p = [true];\n    }\n\n    while (p.length > 0) {\n      if (isNaN(p[0])) {\n        break;\n      }\n      let cmd = null;\n      let points = [];\n      const startX = cpx,\n        startY = cpy;\n      let prevCmd, ctlPtx, ctlPty;\n      let rx, ry, psi, fa, fs, x1, y1;\n      let dx, dy;\n\n      switch (c) {\n        case \"l\":\n          cpx += p.shift();\n          cpy += p.shift();\n          cmd = \"L\";\n          points.push(cpx, cpy);\n          break;\n\n        case \"L\":\n          cpx = p.shift();\n          cpy = p.shift();\n          points.push(cpx, cpy);\n          break;\n\n        case \"m\":\n          dx = p.shift();\n          dy = p.shift();\n          cpx += dx;\n          cpy += dy;\n          if (startPoint == null) {\n            startPoint = [cpx, cpy];\n          }\n          cmd = \"M\";\n          points.push(cpx, cpy);\n          c = \"l\";\n          break;\n\n        case \"M\":\n          cpx = p.shift();\n          cpy = p.shift();\n          cmd = \"M\";\n          if (startPoint == null) {\n            startPoint = [cpx, cpy];\n          }\n          points.push(cpx, cpy);\n          c = \"L\";\n          break;\n\n        case \"h\":\n          cpx += p.shift();\n          cmd = \"L\";\n          points.push(cpx, cpy);\n          break;\n\n        case \"H\":\n          cpx = p.shift();\n          cmd = \"L\";\n          points.push(cpx, cpy);\n          break;\n\n        case \"v\":\n          cpy += p.shift();\n          cmd = \"L\";\n          points.push(cpx, cpy);\n          break;\n\n        case \"V\":\n          cpy = p.shift();\n          cmd = \"L\";\n          points.push(cpx, cpy);\n          break;\n\n        case \"C\":\n          points.push(p.shift(), p.shift(), p.shift(), p.shift());\n          cpx = p.shift();\n          cpy = p.shift();\n          points.push(cpx, cpy);\n          break;\n\n        case \"c\":\n          points.push(\n            cpx + p.shift(),\n            cpy + p.shift(),\n            cpx + p.shift(),\n            cpy + p.shift()\n          );\n          cpx += p.shift();\n          cpy += p.shift();\n          cmd = \"C\";\n          points.push(cpx, cpy);\n          break;\n\n        case \"S\":\n          ctlPtx = cpx;\n          ctlPty = cpy;\n          prevCmd = ca[ca.length - 1];\n          if (prevCmd.command === \"C\") {\n            ctlPtx = cpx + (cpx - prevCmd.points[2]);\n            ctlPty = cpy + (cpy - prevCmd.points[3]);\n          }\n          points.push(ctlPtx, ctlPty, p.shift(), p.shift());\n          cpx = p.shift();\n          cpy = p.shift();\n          cmd = \"C\";\n          points.push(cpx, cpy);\n          break;\n\n        case \"s\":\n          ctlPtx = cpx;\n          ctlPty = cpy;\n          prevCmd = ca[ca.length - 1];\n          if (prevCmd.command === \"C\") {\n            ctlPtx = cpx + (cpx - prevCmd.points[2]);\n            ctlPty = cpy + (cpy - prevCmd.points[3]);\n          }\n          points.push(ctlPtx, ctlPty, cpx + p.shift(), cpy + p.shift());\n          cpx += p.shift();\n          cpy += p.shift();\n          cmd = \"C\";\n          points.push(cpx, cpy);\n          break;\n\n        case \"Q\":\n          points.push(p.shift(), p.shift());\n          cpx = p.shift();\n          cpy = p.shift();\n          points.push(cpx, cpy);\n          break;\n\n        case \"q\":\n          points.push(cpx + p.shift(), cpy + p.shift());\n          cpx += p.shift();\n          cpy += p.shift();\n          cmd = \"Q\";\n          points.push(cpx, cpy);\n          break;\n\n        case \"T\":\n          ctlPtx = cpx;\n          ctlPty = cpy;\n          prevCmd = ca[ca.length - 1];\n          if (prevCmd.command === \"Q\") {\n            ctlPtx = cpx + (cpx - prevCmd.points[0]);\n            ctlPty = cpy + (cpy - prevCmd.points[1]);\n          }\n          cpx = p.shift();\n          cpy = p.shift();\n          cmd = \"Q\";\n          points.push(ctlPtx, ctlPty, cpx, cpy);\n          break;\n\n        case \"t\":\n          ctlPtx = cpx;\n          ctlPty = cpy;\n          prevCmd = ca[ca.length - 1];\n          if (prevCmd.command === \"Q\") {\n            ctlPtx = cpx + (cpx - prevCmd.points[0]);\n            ctlPty = cpy + (cpy - prevCmd.points[1]);\n          }\n          cpx += p.shift();\n          cpy += p.shift();\n          cmd = \"Q\";\n          points.push(ctlPtx, ctlPty, cpx, cpy);\n          break;\n\n        case \"A\":\n          rx = p.shift();\n          ry = p.shift();\n          psi = p.shift();\n          fa = p.shift();\n          fs = p.shift();\n          x1 = cpx;\n          y1 = cpy;\n          cpx = p.shift();\n          cpy = p.shift();\n          cmd = \"A\";\n          points = [[x1, y1], rx, ry, psi, fa, fs, [cpx, cpy]];\n          break;\n\n        case \"a\":\n          rx = p.shift();\n          ry = p.shift();\n          psi = p.shift();\n          fa = p.shift();\n          fs = p.shift();\n          x1 = cpx;\n          y1 = cpy;\n          cpx += p.shift();\n          cpy += p.shift();\n          cmd = \"A\";\n          points = [[x1, y1], rx, ry, psi, fa, fs, [cpx, cpy]];\n          break;\n\n        case \"z\":\n          cmd = \"Z\";\n          if (startPoint) {\n            cpx = startPoint[0];\n            cpy = startPoint[1];\n            startPoint = null;\n          } else {\n            cpx = 0;\n            cpy = 0;\n          }\n          p.shift();\n          points = [cpx, cpy];\n          break;\n\n        case \"Z\":\n          cmd = \"Z\";\n          if (startPoint) {\n            cpx = startPoint[0];\n            cpy = startPoint[1];\n            startPoint = null;\n          } else {\n            cpx = 0;\n            cpy = 0;\n          }\n          p.shift();\n          points = [cpx, cpy];\n          break;\n      }\n\n      ca.push({\n        command: cmd || c,\n        points: points,\n        start: {\n          x: startX,\n          y: startY\n        }\n      });\n    }\n  }\n  return ca;\n}\n","import SVGArc from \"./SVGArc\";\nimport { parsePathData } from \"./SVGPath\";\n\nexport default class Graphics {\n  /**\n   * Build up createjs Graphics commands based on path data.\n   */\n  static init(target, svgpath: string) {\n    const ca = parsePathData(svgpath);\n    const G = createjs.Graphics;\n\n    for (let n = 0; n < ca.length; n++) {\n      const c = ca[n].command;\n      const p = ca[n].points;\n      switch (c) {\n        case \"L\":\n          target.append(new G.LineTo(p[0], p[1]));\n          break;\n\n        case \"M\":\n          target.append(new G.MoveTo(p[0], p[1]));\n          break;\n\n        case \"C\":\n          target.append(\n            new G.BezierCurveTo(p[0], p[1], p[2], p[3], p[4], p[5])\n          );\n          break;\n\n        case \"Q\":\n          target.append(new G.QuadraticCurveTo(p[0], p[1], p[2], p[3]));\n          break;\n\n        case \"A\":\n          target.append(new SVGArc(p[0], p[1], p[2], p[3], p[4], p[5], p[6]));\n          break;\n\n        case \"Z\":\n          target.append(new G.ClosePath());\n          target.append(new G.MoveTo(p[0], p[1]));\n          break;\n      }\n    }\n  }\n}\n","export default function applyMixins(derivedCtor: any, baseCtors: any[]) {\n  baseCtors.forEach(baseCtor => {\n    Object.getOwnPropertyNames(baseCtor.prototype).forEach(name => {\n      Object.defineProperty(\n        derivedCtor.prototype,\n        name,\n        Object.getOwnPropertyDescriptor(baseCtor.prototype, name)\n      );\n    });\n  });\n}\n","import Graphics from \"./Graphics\";\nimport applyMixins from \"./applyMixins\";\n\nclass GraphicsMixin {\n  /**\n   * decodeSVGPath intended for createjs.Graphics class\n   */\n  decodeSVGPath(data: string) {\n    Graphics.init(this, data);\n    return this;\n  }\n}\n\napplyMixins(createjs.Graphics, [GraphicsMixin]);\n\ndeclare global {\n  namespace createjs {\n    interface Graphics {\n      decodeSVGPath(data: string): Graphics;\n    }\n  }\n}\n","export default class Accessibility {\n  static data: any = [];\n\n  static timeout: any = null;\n\n  static set(element: any) {\n    //if an element is not on canvas, do not place into accessibility api\n    if (element.stage == null) {\n      return;\n    }\n    //clear timeout if exists\n    if (Accessibility.timeout != null) {\n      clearTimeout(Accessibility.timeout);\n    }\n    // add to accessibility elements\n    if (element.accessibilityId == null) {\n      Accessibility.data.push(element);\n      element.accessibilityId = Accessibility.data.length - 1;\n    }\n    Accessibility.timeout = setTimeout(Accessibility.update, 300);\n  }\n\n  static update() {\n    Accessibility.timeout = null;\n    const data = Accessibility.data.slice(0);\n    data.sort(function(a, b) {\n      return a.accessibilityPriority - b.accessibilityPriority;\n    });\n    const len = data.length;\n    let out = \"\";\n    let currentCanvas = data[0].stage.canvas;\n    for (let i = 0; i < len; i++) {\n      if (data[i].stage == null) {\n        continue;\n      }\n      if (currentCanvas != data[i].stage.canvas) {\n        currentCanvas.innerHTML = out;\n        out = \"\";\n        currentCanvas = data[i].stage.canvas;\n      }\n      if (data[i].accessibilityText == null) {\n        out += \"<p>\" + data[i].text + \"</p>\";\n      } else {\n        out += data[i].accessibilityText;\n      }\n    }\n    currentCanvas.innerHTML = out;\n  }\n\n  static clear() {\n    Accessibility.data = [];\n  }\n}\n","enum Align {\n  TOP_LEFT = 0,\n  TOP_CENTER = 1,\n  TOP_RIGHT = 2,\n  MIDDLE_LEFT = 3,\n  MIDDLE_CENTER = 4,\n  MIDDLE_RIGHT = 5,\n  BOTTOM_LEFT = 6,\n  BOTTOM_CENTER = 7,\n  BOTTOM_RIGHT = 8,\n  TL = 0,\n  TC = 1,\n  TR = 2,\n  ML = 3,\n  MC = 4,\n  MR = 5,\n  BL = 6,\n  BC = 7,\n  BR = 8\n}\n\nexport default Align;\n","enum Case {\n  NORMAL = 0,\n  UPPER = 1,\n  LOWER = 2,\n  SMALL_CAPS = 3\n}\n\nexport default Case;\n","export default class Font {\n  glyphs: any = {};\n  kerning: any = {};\n  missing: number;\n  offset: number;\n  default: number;\n  descent: number;\n  ascent: number;\n  top = 0;\n  middle = 0;\n  bottom = 0;\n  units = 1000;\n  id: string;\n  ligatures: any = {};\n  panose: string;\n  alphabetic: string;\n  loaded = false;\n  targets: number[] = [];\n  loader: XMLHttpRequest;\n\n  cloneGlyph(target: number, from: number) {\n    if (this.glyphs[target] == undefined && this.glyphs[from] != undefined) {\n      this.glyphs[target] = this.glyphs[from];\n      this.kerning[target] = this.kerning[from];\n    }\n  }\n}\n","/**\n * Represents a single Glyph within a Font.\n */\n\nexport default class Glyph {\n  /** SVG path data */\n  path = \"\";\n  offset: number;\n  kerning: any = {};\n  private _graphic: createjs.Graphics = null;\n  _fill: createjs.Graphics.Fill;\n  _stroke: createjs.Graphics.Stroke;\n  _strokeStyle: createjs.Graphics.StrokeStyle;\n\n  graphic() {\n    if (this._graphic == null) {\n      this._graphic = new createjs.Graphics();\n\n      //append fill/stroke/stokeStyle\n      //Character instances populate properties before draw\n      this._stroke = new createjs.Graphics.Stroke(null, true);\n\n      this._strokeStyle = new createjs.Graphics.StrokeStyle(\n        0,\n        null,\n        null,\n        null\n      );\n\n      this._fill = new createjs.Graphics.Fill(null);\n\n      //convert SVG to drawing paths\n      this._graphic.decodeSVGPath(this.path);\n\n      this._graphic.append(this._fill);\n      this._graphic.append(this._strokeStyle);\n      this._graphic.append(this._stroke);\n    }\n    return this._graphic;\n  }\n\n  draw(ctx: CanvasRenderingContext2D): boolean {\n    this._graphic.draw(ctx);\n    return true;\n  }\n\n  getKerning(characterCode: number, size: number) {\n    const out = -(this.kerning[characterCode] * size);\n    if (isNaN(out)) {\n      return 0;\n    }\n    if (isNaN(characterCode)) {\n      return 0;\n    }\n    if (isNaN(size)) {\n      return 0;\n    }\n    if (this.kerning[characterCode] != undefined) {\n      return out;\n    }\n    return 0;\n  }\n}\n","import Font from \"./Font\";\nimport Glyph from \"./Glyph\";\n\n/**\n * Fetches font files via AJAX request, and\n * parses the font into glyphs, and stores it.\n * Local storage is optionally used for caching.\n *\n * Font files store font data, grouped by categories:\n *\n *  * `0` = Font properties: `0|property name|property value`\n *  * `1` = Glyph SVG shape data: `1|?|?|SVGPath data`\n *  * `2` = Kerning spacing: `2|?|?|?`\n *  * `3` = Ligatures: `3`\n *\n * Each line in a category of data is delineated with pipe characters \"|\".\n *\n * Partial example:\n *\n * ```\n * 0|id|Abel-Regular\n * 0|family|Abel\n * 1|33|428|M250 434h-72l-55 1000h182zM137 0v154h154v-154h-154z\n * 1|34|645|M225 993h-51l-51 441h153zM471 993h-51l-51 441h153z\n * 2|34|197|123\n * 2|47|100|102\n * 3\n * ```\n *\n * @todo This class should be split into FontLoader (AJAX fetch), FontParser (deserialisation), and probably a FontStorage class.\n */\nexport default class FontLoader {\n  /**\n   * Server path to load font files from.\n   */\n  static path = \"/font/\";\n\n  static cache = false;\n\n  static version = 0;\n\n  static fonts: any = {};\n\n  static loaders: any = [];\n\n  static isLoaded(name: string): boolean {\n    if (FontLoader.fonts.hasOwnProperty(name)) {\n      return FontLoader.fonts[name].loaded;\n    }\n    return false;\n  }\n\n  static getFont(name: string): Font {\n    if (FontLoader.fonts.hasOwnProperty(name)) {\n      return FontLoader.fonts[name];\n    }\n    return null;\n  }\n\n  static load(target: any, fonts: string[]) {\n    //no loaderId implies no loading for this txt field\n    let loader: any;\n    if (target.loaderId == null) {\n      loader = {};\n      target.loaderId = FontLoader.loaders.push(loader) - 1;\n      loader._id = target.loaderId;\n      loader._target = target;\n    } else {\n      loader = FontLoader.loaders[target.loaderId];\n    }\n    const fontCount = fonts.length;\n    for (let i = 0; i < fontCount; ++i) {\n      //mark loader for font loading\n      loader[fonts[i]] = false;\n    }\n    for (const prop in loader) {\n      if (prop.charAt(0) != \"_\") {\n        FontLoader.loadFont(prop, loader);\n      }\n    }\n  }\n\n  static check(id: number) {\n    const loader = FontLoader.loaders[id];\n    //determine if all fonts are loaded\n    for (const prop in loader) {\n      if (prop.charAt(0) != \"_\") {\n        loader[prop] = FontLoader.isLoaded(prop);\n        if (loader[prop] == false) return;\n      }\n    }\n    window.setTimeout(function() {\n      loader._target.fontLoaded();\n    }, 1);\n  }\n\n  static loadFont(fontName: string, loader: any) {\n    //determine if font exists in memory\n    if (FontLoader.fonts.hasOwnProperty(fontName)) {\n      //loading complete\n      if (FontLoader.fonts[fontName].loaded === true) {\n        FontLoader.check(loader._id);\n\n        //loading not complete\n      } else {\n        //add loader id to font\n        FontLoader.fonts[fontName].targets.push(loader._id);\n      }\n      //load from scratch\n    } else {\n      const font: Font = (FontLoader.fonts[fontName] = new Font());\n      font.targets.push(loader._id);\n\n      //TODO localstorage check & get\n      const req: any = new XMLHttpRequest();\n\n      if (localStorage && FontLoader.cache) {\n        const local = JSON.parse(\n          localStorage.getItem(\"txt_font_\" + fontName.split(\" \").join(\"_\"))\n        );\n        if (local != null) {\n          if (local.version === FontLoader.version) {\n            req.cacheResponseText = local.font;\n            req.cacheFont = true;\n          }\n        }\n      }\n\n      req.onload = function() {\n        //localstorage set\n        if (localStorage && FontLoader.cache && this.cacheFont == undefined) {\n          localStorage.setItem(\n            \"txt_font_\" + fontName.split(\" \").join(\"_\"),\n            JSON.stringify({\n              font: this.responseText,\n              version: FontLoader.version\n            })\n          );\n        }\n\n        let lines = this.responseText.split(\"\\n\");\n        //use cacheResponseText as responseText is readonly via XHR\n        if (this.cacheResponseText) {\n          lines = this.cacheResponseText.split(\"\\n\");\n        }\n        const len = lines.length;\n        let i = 0;\n        let line: string[];\n        let glyph: Glyph;\n        let lineLen;\n        while (i < len) {\n          line = lines[i].split(\"|\");\n          switch (line[0]) {\n            case \"0\":\n              //properties\n              if (\n                line[1] == \"id\" ||\n                line[1] == \"panose\" ||\n                line[1] == \"family\" ||\n                line[1] == \"font-style\" ||\n                line[1] == \"font-stretch\"\n              ) {\n                font[line[1]] = line[2];\n              } else {\n                font[line[1]] = parseInt(line[2]);\n              }\n              break;\n\n            case \"1\":\n              //glyphs\n\n              glyph = new Glyph();\n              glyph.offset = parseInt(line[2]) / font.units;\n              glyph.path = line[3];\n              font.glyphs[line[1]] = glyph;\n              break;\n\n            case \"2\":\n              //kerning\n              if (font.kerning[line[1]] == undefined) {\n                font.kerning[line[1]] = {};\n              }\n              if (font.glyphs[line[1]] == undefined) {\n                glyph = new Glyph();\n                glyph.offset = font.default / font.units;\n                glyph.path = \"\";\n                font.glyphs[line[1]] = glyph;\n              }\n              font.glyphs[line[1]].kerning[line[2]] =\n                parseInt(line[3]) / font.units;\n              font.kerning[line[1]][line[2]] = parseInt(line[3]) / font.units;\n              break;\n\n            case \"3\":\n              line.shift();\n              lineLen = line.length;\n              for (let j = 0; j < lineLen; j++) {\n                const path = line[j].split(\"\");\n                const pathLength = path.length;\n                let target = font.ligatures;\n                for (let k = 0; k < pathLength; k++) {\n                  if (target[path[k]] == undefined) {\n                    target[path[k]] = {};\n                  }\n                  if (k == pathLength - 1) {\n                    target[path[k]].glyph = font.glyphs[line[j]];\n                  }\n\n                  target = target[path[k]];\n                }\n                //font.ligatures[ line[ j ] ] = font.glyphs[ line[j] ]\n              }\n              break;\n          }\n          i++;\n        }\n        //character cloning\n        //clone bullet into multiple areas\n        font.cloneGlyph(183, 8226);\n        font.cloneGlyph(8729, 8226);\n        font.cloneGlyph(12539, 8226);\n        font.cloneGlyph(9702, 8226);\n        font.cloneGlyph(9679, 8226);\n        font.cloneGlyph(9675, 8226);\n\n        //define font adjustment values for font.top, font.middle, font.bottom\n        if (font.top == undefined) {\n          font.top = 0;\n        }\n        if (font.middle == undefined) {\n          font.middle = 0;\n        }\n        if (font.bottom == undefined) {\n          font.bottom = 0;\n        }\n\n        //level the font metadata\n        const lLen = font.targets.length;\n        font.loaded = true;\n        for (let l = 0; l < lLen; ++l) {\n          FontLoader.check(font.targets[l]);\n        }\n        font.targets = [];\n      };\n      //check if cached\n      if (req.cacheFont == true) {\n        req.onload();\n      } else {\n        req.open(\n          \"get\",\n          FontLoader.path + fontName.split(\" \").join(\"_\") + \".txt\",\n          true\n        );\n        req.send();\n      }\n    }\n  }\n}\n","import Case from \"./Case\";\nimport Glyph from \"./Glyph\";\nimport FontLoader from \"./FontLoader\";\nimport Font from \"./Font\";\n\n/**\n * Represents a styled character\n */\nexport default class Character extends createjs.Shape {\n  character = \"\";\n  characterCode: number = null;\n  font: string = null;\n  tracking: number = null;\n  characterCase: Case = null;\n  characterCaseOffset = 0;\n  index: number = null;\n  size: number = null;\n  fillColor: string = null;\n  strokeColor: string = null;\n  strokeWidth: number = null;\n  measuredWidth: number = null;\n  measuredHeight: number = null;\n  hPosition: number = null;\n  missing = false;\n\n  _glyph: Glyph;\n  _font: Font;\n\n  constructor(character: string, style: {}, index: number = null) {\n    super();\n    this.set(style);\n    this.index = index;\n\n    let upperSmall;\n\n    // flip case depending on characterCase property\n    if (this.characterCase == Case.NORMAL) {\n      this.character = character;\n    } else if (this.characterCase == Case.UPPER) {\n      this.character = character.toUpperCase();\n    } else if (this.characterCase == Case.LOWER) {\n      this.character = character.toLowerCase();\n    } else if (this.characterCase == Case.SMALL_CAPS) {\n      this.character = character.toUpperCase();\n      upperSmall = !(character === this.character);\n    } else {\n      //fallback case for unknown.\n      this.character = character;\n    }\n    this.characterCode = this.character.charCodeAt(0);\n\n    this._font = FontLoader.getFont(this.font);\n\n    if (this._font.glyphs[this.characterCode]) {\n      this._glyph = this._font.glyphs[this.characterCode];\n\n      //flip lower\n    } else if (\n      this._font.glyphs[\n        String.fromCharCode(this.characterCode)\n          .toLowerCase()\n          .charCodeAt(0)\n      ]\n    ) {\n      this._glyph = this._font.glyphs[\n        String.fromCharCode(this.characterCode)\n          .toLowerCase()\n          .charCodeAt(0)\n      ];\n\n      //flip upper\n    } else if (\n      this._font.glyphs[\n        String.fromCharCode(this.characterCode)\n          .toUpperCase()\n          .charCodeAt(0)\n      ]\n    ) {\n      this._glyph = this._font.glyphs[\n        String.fromCharCode(this.characterCode)\n          .toUpperCase()\n          .charCodeAt(0)\n      ];\n    }\n\n    //missing glyph\n    if (this._glyph === undefined) {\n      console.log(\"MISSING GLYPH:\" + this.character);\n      this._glyph = this._font.glyphs[42];\n      this.missing = true;\n    }\n    this.graphics = this._glyph.graphic();\n\n    // scale x\n    if (this.characterCase === Case.SMALL_CAPS) {\n      if (upperSmall) {\n        this.scaleX = (this.size / this._font.units) * 0.8;\n        this.characterCaseOffset = -0.2 * (this._glyph.offset * this.size);\n      } else {\n        this.scaleX = this.size / this._font.units;\n      }\n    } else {\n      this.scaleX = this.size / this._font.units;\n    }\n\n    this.scaleY = -this.scaleX;\n\n    this.measuredHeight =\n      (this._font.ascent - this._font.descent) * this.scaleX;\n    this.measuredWidth = this.scaleX * this._glyph.offset * this._font.units;\n\n    const ha = new createjs.Shape();\n    ha.graphics\n      .beginFill(\"#000\")\n      .drawRect(\n        0,\n        this._font.descent,\n        this._glyph.offset * this._font.units,\n        this._font.ascent - this._font.descent\n      );\n    this.hitArea = ha;\n  }\n\n  setGlyph(glyph: Glyph) {\n    this._glyph = glyph;\n    this.graphics = this._glyph.graphic();\n  }\n\n  trackingOffset(): number {\n    return this.size * (2.5 / this._font.units + 1 / 900 + this.tracking / 990);\n  }\n\n  draw(ctx: CanvasRenderingContext2D): boolean {\n    this._glyph._fill.style = this.fillColor;\n    this._glyph._fill.matrix = null;\n    this._glyph._stroke.style = this.strokeColor;\n    this._glyph._strokeStyle.width = this.strokeWidth;\n    return this._glyph.draw(ctx);\n  }\n\n  getWidth() {\n    return this.size * this._glyph.offset;\n  }\n}\n","import FontLoader from \"./FontLoader\";\nimport Case from \"./Case\";\nimport { ConstructObj, Style } from \"./Interfaces\";\nimport Accessibility from \"./Accessibility\";\n\n/**\n * Common aspects of top-level Text classes\n */\nexport default abstract class TextContainer extends createjs.Container {\n  text = \"\";\n  original: ConstructObj = null;\n  style: Style[] = null;\n  font = \"belinda\";\n  characterCase: Case = Case.NORMAL;\n\n  //accessibility\n  accessibilityText: string = null;\n  accessibilityPriority = 2;\n  accessibilityId: number = null;\n\n  protected loadFonts() {\n    const fonts = [this.font].concat(this.fontsFromCharacterStyles(this.style));\n    FontLoader.load(this, fonts);\n  }\n\n  //called when text is rendered\n  complete() {\n    //placeholder\n  }\n\n  //called when font has loaded\n  fontLoaded() {\n    this.layout();\n  }\n\n  //call stage.update to render canvas\n  //overload to support deferred rendering\n  render() {\n    this.stage.update();\n  }\n\n  abstract layout();\n\n  addAccessibility() {\n    Accessibility.set(this);\n  }\n\n  private fontsFromCharacterStyles(styles) {\n    const styleFonts = [];\n    if (styles) {\n      for (let i = 0; i < styles.length; ++i) {\n        if (styles[i] != undefined && styles[i].font != undefined) {\n          styleFonts.push(styles[i].font);\n        }\n      }\n    }\n    return styleFonts;\n  }\n\n  getCharCodeAt(index: number): number {\n    if (this.characterCase == Case.NORMAL) {\n      return this.text.charAt(index).charCodeAt(0);\n    } else if (this.characterCase == Case.UPPER) {\n      return this.text\n        .charAt(index)\n        .toUpperCase()\n        .charCodeAt(0);\n    } else if (this.characterCase == Case.LOWER) {\n      return this.text\n        .charAt(index)\n        .toLowerCase()\n        .charCodeAt(0);\n    } else if (this.characterCase == Case.SMALL_CAPS) {\n      return this.text\n        .charAt(index)\n        .toUpperCase()\n        .charCodeAt(0);\n    } else {\n      //fallback case for unknown.\n      return this.text.charAt(index).charCodeAt(0);\n    }\n  }\n}\n","import Word from \"./Word\";\nimport Character from \"./Character\";\n\nexport default class Line extends createjs.Container {\n  measuredWidth: number;\n  measuredHeight: number;\n\n  constructor() {\n    super();\n  }\n\n  //Text support\n  lastWord(): Word {\n    return this.children[this.children.length - 1] as Word;\n  }\n\n  //CharacterText support\n  lastCharacter(): Character {\n    return this.children[this.children.length - 1] as Character;\n  }\n}\n","import { ShapeEvents } from \"../Interfaces\";\n\nexport const EventNames = [\n  \"click\",\n  \"dblclick\",\n  \"mousedown\",\n  \"mouseout\",\n  \"mouseover\",\n  \"pressmove\",\n  \"pressup\",\n  \"rollout\",\n  \"rollover\",\n  \"added\",\n  \"removed\",\n  \"tick\"\n];\n\n/**\n *\n * @param source\n * @param shape\n *\n * @todo: simplify with a loop\n */\nexport default function(\n  original: ShapeEvents,\n  shape: createjs.EventDispatcher\n) {\n  EventNames.forEach(eventName => {\n    if (original[eventName]) {\n      shape.on(eventName, original[eventName]);\n    }\n  });\n}\n","import TextContainer from \"./TextContainer\";\nimport Align from \"./Align\";\nimport FontLoader from \"./FontLoader\";\nimport { ConstructObj } from \"./Interfaces\";\nimport Font from \"./Font\";\nimport Character from \"./Character\";\nimport Line from \"./Line\";\nimport applyShapeEventListeners from \"./utils/apply-shape-event-listeners\";\n\nexport default class CharacterText extends TextContainer {\n  lineHeight: number = null;\n  width = 100;\n  height = 20;\n  align: number = Align.TOP_LEFT;\n  size = 12;\n  minSize: number = null;\n  maxTracking: number = null;\n  tracking = 0;\n  ligatures = false;\n  fillColor = \"#000\";\n  strokeColor: string = null;\n  strokeWidth: number = null;\n  singleLine = false;\n  autoExpand = false;\n  autoReduce = false;\n  overset = false;\n  oversetIndex: number = null;\n  loaderId: number = null;\n  debug = false;\n  lines: Line[] = [];\n  block: createjs.Container;\n  missingGlyphs: any[] = null;\n  renderCycle = true;\n  measured = false;\n  oversetPotential = false;\n\n  constructor(props: ConstructObj = null) {\n    super();\n\n    if (props) {\n      this.original = props;\n      this.set(props);\n      this.original.tracking = this.tracking;\n    }\n    this.loadFonts();\n  }\n\n  //layout text\n  layout() {\n    this.addAccessibility();\n\n    this.overset = false;\n    this.measured = false;\n    this.oversetPotential = false;\n\n    if (this.original.size) {\n      this.size = this.original.size;\n    }\n    if (this.original.tracking) {\n      this.tracking = this.original.tracking;\n    }\n    this.text = this.text.replace(/([\\n][ \\t]+)/g, \"\\n\");\n\n    if (this.singleLine === true) {\n      this.text = this.text.split(\"\\n\").join(\"\");\n      this.text = this.text.split(\"\\r\").join(\"\");\n    }\n\n    this.lines = [];\n    this.missingGlyphs = null;\n    this.removeAllChildren();\n\n    if (this.text === \"\" || this.text === undefined) {\n      this.render();\n      this.complete();\n      return;\n    }\n\n    this.block = new createjs.Container();\n    this.addChild(this.block);\n\n    if (this.debug == true) {\n      this.addDebugLayout();\n    }\n    if (\n      this.singleLine === true &&\n      (this.autoExpand === true || this.autoReduce === true)\n    ) {\n      this.measure();\n    }\n\n    if (this.renderCycle === false) {\n      this.removeAllChildren();\n      this.complete();\n      return;\n    }\n\n    if (this.characterLayout() === false) {\n      this.removeAllChildren();\n      return;\n    }\n    this.lineLayout();\n    this.render();\n    this.complete();\n  }\n\n  /**\n   * Draw baseline, ascent, ascender, and descender lines\n   */\n  private addDebugLayout() {\n    const font: Font = FontLoader.getFont(this.font);\n    //outline\n    let s = new createjs.Shape();\n    s.graphics.beginStroke(\"#FF0000\");\n    s.graphics.setStrokeStyle(1.2);\n    s.graphics.drawRect(0, 0, this.width, this.height);\n    this.addChild(s);\n    //baseline\n    s = new createjs.Shape();\n    s.graphics.beginFill(\"#000\");\n    s.graphics.drawRect(0, 0, this.width, 0.2);\n    s.x = 0;\n    s.y = 0;\n    this.block.addChild(s);\n    s = new createjs.Shape();\n    s.graphics.beginFill(\"#F00\");\n    s.graphics.drawRect(0, 0, this.width, 0.2);\n    s.x = 0;\n    s.y = (-font[\"cap-height\"] / font.units) * this.size;\n    this.block.addChild(s);\n    s = new createjs.Shape();\n    s.graphics.beginFill(\"#0F0\");\n    s.graphics.drawRect(0, 0, this.width, 0.2);\n    s.x = 0;\n    s.y = (-font.ascent / font.units) * this.size;\n    this.block.addChild(s);\n    s = new createjs.Shape();\n    s.graphics.beginFill(\"#00F\");\n    s.graphics.drawRect(0, 0, this.width, 0.2);\n    s.x = 0;\n    s.y = (-font.descent / font.units) * this.size;\n    this.block.addChild(s);\n  }\n\n  measure(): boolean {\n    this.measured = true;\n    //Extract origin sizing from this.original to preserve\n    //metrics. autoMeasure will change style properties\n    //directly. Change this.original to re-render.\n\n    let len = this.text.length;\n    const defaultStyle = {\n      size: this.original.size,\n      font: this.original.font,\n      tracking: this.original.tracking,\n      characterCase: this.original.characterCase\n    };\n    let currentStyle: any;\n    let charCode: number = null;\n    let font: Font;\n    const charMetrics = [];\n    let largestFontSize = defaultStyle.size;\n    for (let i = 0; i < len; i++) {\n      charCode = this.text.charCodeAt(i);\n\n      currentStyle = defaultStyle;\n      if (\n        this.original.style !== undefined &&\n        this.original.style[i] !== undefined\n      ) {\n        currentStyle = this.original.style[i];\n        // make sure style contains properties needed.\n        if (currentStyle.size === undefined)\n          currentStyle.size = defaultStyle.size;\n        if (currentStyle.font === undefined)\n          currentStyle.font = defaultStyle.font;\n        if (currentStyle.tracking === undefined)\n          currentStyle.tracking = defaultStyle.tracking;\n      }\n      if (currentStyle.size > largestFontSize) {\n        largestFontSize = currentStyle.size;\n      }\n      font = FontLoader.fonts[currentStyle.font];\n\n      charMetrics.push({\n        char: this.text[i],\n        size: currentStyle.size,\n        charCode: charCode,\n        font: currentStyle.font,\n        offset: font.glyphs[charCode].offset,\n        units: font.units,\n        tracking: this.trackingOffset(\n          currentStyle.tracking,\n          currentStyle.size,\n          font.units\n        ),\n        kerning: font.glyphs[charCode].getKerning(this.getCharCodeAt(i + 1), 1)\n      });\n    }\n\n    //save space char using last known width/height\n    const space: any = {\n      char: \" \",\n      size: currentStyle.size,\n      charCode: 32,\n      font: currentStyle.font,\n      offset: font.glyphs[32].offset,\n      units: font.units,\n      tracking: 0,\n      kerning: 0\n    };\n\n    charMetrics[charMetrics.length - 1].tracking = 0;\n    //charMetrics[ charMetrics.length-1 ].kerning=0;\n\n    len = charMetrics.length;\n\n    //measured without size\n    let metricBaseWidth = 0;\n    //measured at size\n    let metricRealWidth = 0;\n    //measured at size with tracking\n    let metricRealWidthTracking = 0;\n\n    let current = null;\n    for (let i = 0; i < len; i++) {\n      current = charMetrics[i];\n      metricBaseWidth = metricBaseWidth + current.offset + current.kerning;\n      metricRealWidth =\n        metricRealWidth + (current.offset + current.kerning) * current.size;\n      metricRealWidthTracking =\n        metricRealWidthTracking +\n        (current.offset + current.kerning + current.tracking) * current.size;\n    }\n\n    //size cases\n    if (metricRealWidth > this.width) {\n      if (this.autoReduce === true) {\n        this.tracking = 0;\n        this.size =\n          (this.original.size * this.width) /\n          (metricRealWidth + space.offset * space.size);\n        if (this.minSize != null && this.size < this.minSize) {\n          this.size = this.minSize;\n          this.oversetPotential = true;\n        }\n        return true;\n      }\n      //tracking cases\n    } else {\n      let trackMetric = this.offsetTracking(\n        (this.width - metricRealWidth) / len,\n        current.size,\n        current.units\n      );\n      if (trackMetric < 0) {\n        trackMetric = 0;\n      }\n      //auto expand case\n      if (trackMetric > this.original.tracking && this.autoExpand) {\n        if (this.maxTracking != null && trackMetric > this.maxTracking) {\n          this.tracking = this.maxTracking;\n        } else {\n          this.tracking = trackMetric;\n        }\n        this.size = this.original.size;\n        return true;\n      }\n      //auto reduce tracking case\n      if (trackMetric < this.original.tracking && this.autoReduce) {\n        if (this.maxTracking != null && trackMetric > this.maxTracking) {\n          this.tracking = this.maxTracking;\n        } else {\n          this.tracking = trackMetric;\n        }\n        this.size = this.original.size;\n        return true;\n      }\n    }\n    return true;\n  }\n\n  trackingOffset(tracking: number, size: number, units: number): number {\n    return size * (2.5 / units + 1 / 900 + tracking / 990);\n  }\n\n  offsetTracking(offset: number, size: number, units: number): number {\n    return Math.floor(((offset - 2.5 / units - 1 / 900) * 990) / size);\n  }\n\n  getWidth(): number {\n    return this.width;\n  }\n\n  /**\n   * Place characters in lines\n   * adds Characters to lines. LineHeight IS a factor given lack of Words.\n   */\n  characterLayout(): boolean {\n    //char layout\n    const len = this.text.length;\n    let char: Character;\n    const defaultStyle = {\n      size: this.size,\n      font: this.font,\n      tracking: this.tracking,\n      characterCase: this.characterCase,\n      fillColor: this.fillColor,\n      strokeColor: this.strokeColor,\n      strokeWidth: this.strokeWidth\n    };\n    let currentStyle = defaultStyle;\n    let hPosition = 0;\n    let vPosition = 0;\n    let lineY = 0;\n    let firstLine = true;\n\n    let currentLine: Line = new Line();\n\n    this.lines.push(currentLine);\n    this.block.addChild(currentLine);\n\n    // loop over characters\n    // place into lines\n    for (let i = 0; i < len; i++) {\n      if (this.style !== null && this.style[i] !== undefined) {\n        currentStyle = this.style[i];\n        // make sure style contains properties needed.\n        if (currentStyle.size === undefined)\n          currentStyle.size = defaultStyle.size;\n        if (currentStyle.font === undefined)\n          currentStyle.font = defaultStyle.font;\n        if (currentStyle.tracking === undefined)\n          currentStyle.tracking = defaultStyle.tracking;\n        if (currentStyle.characterCase === undefined)\n          currentStyle.characterCase = defaultStyle.characterCase;\n        if (currentStyle.fillColor === undefined)\n          currentStyle.fillColor = defaultStyle.fillColor;\n        if (currentStyle.strokeColor === undefined)\n          currentStyle.strokeColor = defaultStyle.strokeColor;\n        if (currentStyle.strokeWidth === undefined)\n          currentStyle.strokeWidth = defaultStyle.strokeWidth;\n      }\n\n      // newline\n      // mark word as having newline\n      // create new word\n      // new line has no character\n      if (this.text.charAt(i) == \"\\n\" || this.text.charAt(i) == \"\\r\") {\n        //only if not last char\n        if (i < len - 1) {\n          if (firstLine === true) {\n            vPosition = currentStyle.size;\n            currentLine.measuredHeight = currentStyle.size;\n            currentLine.measuredWidth = hPosition;\n            lineY = 0;\n            currentLine.y = 0;\n          } else if (this.lineHeight != undefined) {\n            vPosition = this.lineHeight;\n            currentLine.measuredHeight = vPosition;\n            currentLine.measuredWidth = hPosition;\n            lineY = lineY + vPosition;\n            currentLine.y = lineY;\n          } else {\n            vPosition = char.measuredHeight;\n            currentLine.measuredHeight = vPosition;\n            currentLine.measuredWidth = hPosition;\n            lineY = lineY + vPosition;\n            currentLine.y = lineY;\n          }\n\n          firstLine = false;\n          currentLine = new Line();\n          currentLine.measuredHeight = currentStyle.size;\n          currentLine.measuredWidth = 0;\n          this.lines.push(currentLine);\n          this.block.addChild(currentLine);\n          vPosition = 0;\n          hPosition = 0;\n        }\n\n        if (this.text.charAt(i) == \"\\r\" && this.text.charAt(i + 1) == \"\\n\") {\n          i++;\n        }\n\n        continue;\n      }\n\n      //runtime test for font\n      if (FontLoader.isLoaded(currentStyle.font) === false) {\n        FontLoader.load(this, [currentStyle.font]);\n        return false;\n      }\n\n      // create character\n      char = new Character(this.text.charAt(i), currentStyle, i);\n\n      if (this.original.character) {\n        applyShapeEventListeners(this.original.character, char);\n      }\n\n      if (char.missing) {\n        if (this.missingGlyphs == null) {\n          this.missingGlyphs = [];\n        }\n        this.missingGlyphs.push({\n          position: i,\n          character: this.text.charAt(i),\n          font: currentStyle.font\n        });\n      }\n\n      if (firstLine === true) {\n        if (vPosition < char.size) {\n          vPosition = char.size;\n        }\n      } else if (this.lineHeight != undefined && this.lineHeight > 0) {\n        if (vPosition < this.lineHeight) {\n          vPosition = this.lineHeight;\n        }\n      } else if (char.measuredHeight > vPosition) {\n        vPosition = char.measuredHeight;\n      }\n\n      //swap character if ligature\n      //ligatures removed if tracking or this.ligatures is false\n      if (currentStyle.tracking == 0 && this.ligatures == true) {\n        //1 char match\n        const ligTarget = this.text.substr(i, 4);\n        if (char._font.ligatures[ligTarget.charAt(0)]) {\n          //2 char match\n          if (char._font.ligatures[ligTarget.charAt(0)][ligTarget.charAt(1)]) {\n            //3 char match\n            if (\n              char._font.ligatures[ligTarget.charAt(0)][ligTarget.charAt(1)][\n                ligTarget.charAt(2)\n              ]\n            ) {\n              //4 char match\n              if (\n                char._font.ligatures[ligTarget.charAt(0)][ligTarget.charAt(1)][\n                  ligTarget.charAt(2)\n                ][ligTarget.charAt(3)]\n              ) {\n                //swap 4 char ligature\n                char.setGlyph(\n                  char._font.ligatures[ligTarget.charAt(0)][\n                    ligTarget.charAt(1)\n                  ][ligTarget.charAt(2)][ligTarget.charAt(3)].glyph\n                );\n                i = i + 3;\n              } else {\n                //swap 3 char ligature\n                char.setGlyph(\n                  char._font.ligatures[ligTarget.charAt(0)][\n                    ligTarget.charAt(1)\n                  ][ligTarget.charAt(2)].glyph\n                );\n                i = i + 2;\n              }\n            } else {\n              //swap 2 char ligature\n              char.setGlyph(\n                char._font.ligatures[ligTarget.charAt(0)][ligTarget.charAt(1)]\n                  .glyph\n              );\n              i = i + 1;\n            }\n          }\n        }\n      }\n\n      if (this.overset == true) {\n        break;\n      } else if (\n        this.singleLine === false &&\n        hPosition + char.measuredWidth > this.width\n      ) {\n        const lastchar: Character = currentLine.children[\n          currentLine.children.length - 1\n        ] as Character;\n        if (lastchar.characterCode == 32) {\n          currentLine.measuredWidth =\n            hPosition -\n            lastchar.measuredWidth -\n            lastchar.trackingOffset() -\n            lastchar._glyph.getKerning(this.getCharCodeAt(i), lastchar.size);\n        } else {\n          currentLine.measuredWidth =\n            hPosition -\n            lastchar.trackingOffset() -\n            lastchar._glyph.getKerning(this.getCharCodeAt(i), lastchar.size);\n        }\n        if (firstLine === true) {\n          currentLine.measuredHeight = vPosition;\n          currentLine.y = 0;\n          lineY = 0;\n        } else {\n          currentLine.measuredHeight = vPosition;\n          lineY = lineY + vPosition;\n          currentLine.y = lineY;\n        }\n        firstLine = false;\n        currentLine = new Line();\n        currentLine.addChild(char);\n\n        if (char.characterCode == 32) {\n          hPosition = 0;\n        } else {\n          hPosition =\n            char.x +\n            char._glyph.offset * char.size +\n            char.characterCaseOffset +\n            char.trackingOffset();\n        }\n\n        this.lines.push(currentLine);\n        this.block.addChild(currentLine);\n        vPosition = 0;\n\n        //measured case\n      } else if (\n        this.measured == true &&\n        this.singleLine === true &&\n        hPosition + char.measuredWidth > this.width &&\n        this.oversetPotential == true\n      ) {\n        //char.x = hPosition;\n        //currentLine.addChild( char );\n        this.oversetIndex = i;\n        this.overset = true;\n        //hPosition = char.x + ( char._glyph.offset * char.size ) + char.characterCaseOffset + char.trackingOffset() + char._glyph.getKerning( this.getCharCodeAt( i + 1 ) , char.size );\n\n        //not measured\n      } else if (\n        this.measured == false &&\n        this.singleLine === true &&\n        hPosition + char.measuredWidth > this.width\n      ) {\n        //char.x = hPosition;\n        //currentLine.addChild( char );\n        this.oversetIndex = i;\n        this.overset = true;\n        //hPosition = char.x + ( char._glyph.offset * char.size ) + char.characterCaseOffset + char.trackingOffset() + char._glyph.getKerning( this.getCharCodeAt( i + 1 ) , char.size );\n      } else {\n        char.x = hPosition;\n        // push character into word\n        currentLine.addChild(char);\n        hPosition =\n          char.x +\n          char._glyph.offset * char.size +\n          char.characterCaseOffset +\n          char.trackingOffset() +\n          char._glyph.getKerning(this.getCharCodeAt(i + 1), char.size);\n      }\n    }\n    //case of empty word at end.\n    if (currentLine.children.length == 0) {\n      currentLine = this.lines[this.lines.length - 1];\n      hPosition = currentLine.measuredWidth;\n      vPosition = currentLine.measuredHeight;\n    }\n    if (firstLine === true) {\n      currentLine.measuredWidth = hPosition;\n      currentLine.measuredHeight = vPosition;\n      currentLine.y = 0;\n    } else {\n      currentLine.measuredWidth = hPosition;\n      currentLine.measuredHeight = vPosition;\n      if (vPosition == 0) {\n        if (this.lineHeight) {\n          vPosition = this.lineHeight;\n        } else {\n          vPosition = currentStyle.size;\n        }\n      }\n      currentLine.y = lineY + vPosition;\n    }\n    return true;\n  }\n\n  lineLayout() {\n    // loop over lines\n    // place into text\n    let measuredHeight = 0;\n    let line;\n    const a = Align;\n    const fnt: Font = FontLoader.getFont(this.font);\n\n    const len = this.lines.length;\n    for (let i = 0; i < len; i++) {\n      line = this.lines[i];\n\n      //correct measuredWidth if last line character contains tracking\n      if (line.lastCharacter()) {\n        line.measuredWidth -= line.lastCharacter().trackingOffset();\n      }\n\n      if (this.original.line) {\n        applyShapeEventListeners(this.original.line, line);\n      }\n\n      measuredHeight += line.measuredHeight;\n\n      if (this.align === a.TOP_CENTER) {\n        //move to center\n        line.x = (this.width - line.measuredWidth) / 2;\n      } else if (this.align === a.TOP_RIGHT) {\n        //move to right\n        line.x = this.width - line.measuredWidth;\n      } else if (this.align === a.MIDDLE_CENTER) {\n        //move to center\n        line.x = (this.width - line.measuredWidth) / 2;\n      } else if (this.align === a.MIDDLE_RIGHT) {\n        //move to right\n        line.x = this.width - line.measuredWidth;\n      } else if (this.align === a.BOTTOM_CENTER) {\n        //move to center\n        line.x = (this.width - line.measuredWidth) / 2;\n      } else if (this.align === a.BOTTOM_RIGHT) {\n        //move to right\n        line.x = this.width - line.measuredWidth;\n      }\n    }\n\n    //TOP ALIGNED\n    if (\n      this.align === a.TOP_LEFT ||\n      this.align === a.TOP_CENTER ||\n      this.align === a.TOP_RIGHT\n    ) {\n      if (fnt.top == 0) {\n        this.block.y = (this.lines[0].measuredHeight * fnt.ascent) / fnt.units;\n      } else {\n        this.block.y =\n          (this.lines[0].measuredHeight * fnt.ascent) / fnt.units +\n          (this.lines[0].measuredHeight * fnt.top) / fnt.units;\n      }\n\n      //MIDDLE ALIGNED\n    } else if (\n      this.align === a.MIDDLE_LEFT ||\n      this.align === a.MIDDLE_CENTER ||\n      this.align === a.MIDDLE_RIGHT\n    ) {\n      this.block.y =\n        this.lines[0].measuredHeight +\n        (this.height - measuredHeight) / 2 +\n        (this.lines[0].measuredHeight * fnt.middle) / fnt.units;\n\n      //BOTTOM ALIGNED\n    } else if (\n      this.align === a.BOTTOM_LEFT ||\n      this.align === a.BOTTOM_CENTER ||\n      this.align === a.BOTTOM_RIGHT\n    ) {\n      this.block.y =\n        this.height -\n        this.lines[this.lines.length - 1].y +\n        (this.lines[0].measuredHeight * fnt.bottom) / fnt.units;\n    }\n\n    if (this.original.block) {\n      applyShapeEventListeners(this.original.block, this.block);\n    }\n  }\n}\n","export default class Info {\n  static VERSION = \"0.10.0\";\n  static LICENSE = \"BSD-2-Clause\";\n}\n","import Character from \"./Character\";\n\nexport default class Word extends createjs.Container {\n  hasNewLine = false;\n  hasHyphen = false;\n  hasSpace = false;\n  measuredWidth: number;\n  measuredHeight: number;\n  spaceOffset = 0;\n\n  constructor() {\n    super();\n  }\n\n  //CharacterText support\n  lastCharacter(): Character {\n    return this.children[this.children.length - 1] as Character;\n  }\n}\n","import TextContainer from \"./TextContainer\";\nimport Align from \"./Align\";\nimport FontLoader from \"./FontLoader\";\nimport Word from \"./Word\";\nimport Line from \"./Line\";\nimport Font from \"./Font\";\nimport { ConstructObj } from \"./Interfaces\";\nimport Character from \"./Character\";\nimport applyShapeEventListeners from \"./utils/apply-shape-event-listeners\";\n\nexport default class Text extends TextContainer {\n  lineHeight: number = null;\n  width = 100;\n  height = 20;\n  align: number = Align.TOP_LEFT;\n  size = 12;\n  tracking = 0;\n  ligatures = false;\n  fillColor = \"#000\";\n  strokeColor: string = null;\n  strokeWidth: number = null;\n  loaderId: number = null;\n  debug = false;\n  words: Word[] = [];\n  lines: Line[] = [];\n  block: createjs.Container;\n  missingGlyphs: any[] = null;\n  renderCycle = true;\n\n  constructor(props: ConstructObj = null) {\n    super();\n    if (props) {\n      this.original = props;\n      this.set(props);\n    }\n    this.loadFonts();\n  }\n\n  getBounds(): createjs.Rectangle {\n    // TODO: obtain intersected bounds of the characters/words in here\n\n    return new createjs.Rectangle(this.x, this.y, this.width, this.height);\n  }\n\n  layout() {\n    this.addAccessibility();\n    this.text = this.text.replace(/([\\n][ \\t]+)/g, \"\\n\");\n    this.words = [];\n    this.lines = [];\n    this.missingGlyphs = null;\n    // TODO - remove composite layout\n    this.removeAllChildren();\n\n    this.block = new createjs.Container();\n    this.addChild(this.block);\n\n    if (this.debug == true) {\n      this.addDebugLayout();\n    }\n\n    if (this.text === \"\" || this.text === undefined) {\n      this.render();\n      this.complete();\n      return;\n    }\n\n    if (this.characterLayout() === false) {\n      this.removeAllChildren();\n      return;\n    }\n\n    if (this.renderCycle === false) {\n      this.removeAllChildren();\n      this.complete();\n      return;\n    }\n\n    this.wordLayout();\n    this.lineLayout();\n\n    this.render();\n    this.complete();\n  }\n\n  /**\n   * Draw baseline, ascent, ascender, and descender lines\n   */\n  private addDebugLayout() {\n    const font: Font = FontLoader.getFont(this.font);\n    //outline\n    let s = new createjs.Shape();\n    s.graphics.beginStroke(\"#FF0000\");\n    s.graphics.setStrokeStyle(1.2);\n    s.graphics.drawRect(0, 0, this.width, this.height);\n    this.addChild(s);\n    //baseline\n    s = new createjs.Shape();\n    s.graphics.beginFill(\"#000\");\n    s.graphics.drawRect(0, 0, this.width, 0.2);\n    s.x = 0;\n    s.y = 0;\n    this.block.addChild(s);\n    s = new createjs.Shape();\n    s.graphics.beginFill(\"#F00\");\n    s.graphics.drawRect(0, 0, this.width, 0.2);\n    s.x = 0;\n    s.y = (-font[\"cap-height\"] / font.units) * this.size;\n    this.block.addChild(s);\n    s = new createjs.Shape();\n    s.graphics.beginFill(\"#0F0\");\n    s.graphics.drawRect(0, 0, this.width, 0.2);\n    s.x = 0;\n    s.y = (-font.ascent / font.units) * this.size;\n    this.block.addChild(s);\n    s = new createjs.Shape();\n    s.graphics.beginFill(\"#00F\");\n    s.graphics.drawRect(0, 0, this.width, 0.2);\n    s.x = 0;\n    s.y = (-font.descent / font.units) * this.size;\n    this.block.addChild(s);\n  }\n\n  //place characters in words\n  characterLayout(): boolean {\n    //characterlayout adds Charcters to words and measures true height. LineHeight is not a factor til Line layout.\n\n    //char layout\n    const len = this.text.length;\n    let char: Character;\n    const defaultStyle = {\n      size: this.size,\n      font: this.font,\n      tracking: this.tracking,\n      characterCase: this.characterCase,\n      fillColor: this.fillColor,\n      strokeColor: this.strokeColor,\n      strokeWidth: this.strokeWidth\n    };\n    let currentStyle = defaultStyle;\n    let hPosition = 0;\n    let vPosition = 0;\n\n    let currentWord: Word = new Word();\n    // push a new word to capture characters\n    this.words.push(currentWord);\n\n    // loop over characters\n    // place into words\n    for (let i = 0; i < len; i++) {\n      if (this.style !== null && this.style[i] !== undefined) {\n        currentStyle = this.style[i];\n        // make sure style contains properties needed.\n        if (currentStyle.size === undefined)\n          currentStyle.size = defaultStyle.size;\n        if (currentStyle.font === undefined)\n          currentStyle.font = defaultStyle.font;\n        if (currentStyle.tracking === undefined)\n          currentStyle.tracking = defaultStyle.tracking;\n        if (currentStyle.characterCase === undefined)\n          currentStyle.characterCase = defaultStyle.characterCase;\n        if (currentStyle.fillColor === undefined)\n          currentStyle.fillColor = defaultStyle.fillColor;\n        if (currentStyle.strokeColor === undefined)\n          currentStyle.strokeColor = defaultStyle.strokeColor;\n        if (currentStyle.strokeWidth === undefined)\n          currentStyle.strokeWidth = defaultStyle.strokeWidth;\n      }\n\n      // newline\n      // mark word as having newline\n      // create new word\n      // new line has no character\n      if (this.text.charAt(i) == \"\\n\") {\n        //only if not last char\n        if (i < len - 1) {\n          currentWord.measuredWidth = hPosition;\n          currentWord.measuredHeight = vPosition;\n          if (currentWord.measuredHeight == 0) {\n            currentWord.measuredHeight = currentStyle.size;\n          }\n          currentWord.hasNewLine = true;\n          currentWord = new Word();\n          this.words.push(currentWord);\n          vPosition = 0;\n          hPosition = 0;\n        }\n\n        continue;\n      }\n\n      //runtime test for font\n      if (FontLoader.isLoaded(currentStyle.font) === false) {\n        FontLoader.load(this, [currentStyle.font]);\n        return false;\n      }\n\n      // create character\n      char = new Character(this.text.charAt(i), currentStyle, i);\n\n      if (this.original.character) {\n        applyShapeEventListeners(this.original.character, char);\n      }\n\n      if (char.missing) {\n        if (this.missingGlyphs == null) {\n          this.missingGlyphs = [];\n        }\n        this.missingGlyphs.push({\n          position: i,\n          character: this.text.charAt(i),\n          font: currentStyle.font\n        });\n      }\n\n      if (char.measuredHeight > vPosition) {\n        vPosition = char.measuredHeight;\n      }\n\n      //swap character if ligature\n      //ligatures removed if tracking or this.ligatures is false\n      if (currentStyle.tracking == 0 && this.ligatures == true) {\n        //1 char match\n        const ligTarget = this.text.substr(i, 4);\n        if (char._font.ligatures[ligTarget.charAt(0)]) {\n          //2 char match\n          if (char._font.ligatures[ligTarget.charAt(0)][ligTarget.charAt(1)]) {\n            //3 char match\n            if (\n              char._font.ligatures[ligTarget.charAt(0)][ligTarget.charAt(1)][\n                ligTarget.charAt(2)\n              ]\n            ) {\n              //4 char match\n              if (\n                char._font.ligatures[ligTarget.charAt(0)][ligTarget.charAt(1)][\n                  ligTarget.charAt(2)\n                ][ligTarget.charAt(3)]\n              ) {\n                //swap 4 char ligature\n                char.setGlyph(\n                  char._font.ligatures[ligTarget.charAt(0)][\n                    ligTarget.charAt(1)\n                  ][ligTarget.charAt(2)][ligTarget.charAt(3)].glyph\n                );\n                i = i + 3;\n              } else {\n                //swap 3 char ligature\n                char.setGlyph(\n                  char._font.ligatures[ligTarget.charAt(0)][\n                    ligTarget.charAt(1)\n                  ][ligTarget.charAt(2)].glyph\n                );\n                i = i + 2;\n              }\n            } else {\n              //swap 2 char ligature\n              char.setGlyph(\n                char._font.ligatures[ligTarget.charAt(0)][ligTarget.charAt(1)]\n                  .glyph\n              );\n              i = i + 1;\n            }\n          }\n        }\n      }\n\n      char.x = hPosition;\n\n      // push character into word\n      currentWord.addChild(char);\n\n      // space\n      // mark word as having space\n      // create new word\n      // space character\n      if (this.text.charAt(i) == \" \") {\n        currentWord.hasSpace = true;\n        currentWord.spaceOffset = char._glyph.offset * char.size;\n        hPosition =\n          char.x +\n          char._glyph.offset * char.size +\n          char.characterCaseOffset +\n          char.trackingOffset() +\n          char._glyph.getKerning(this.text.charCodeAt(i + 1), char.size);\n        currentWord.measuredWidth = hPosition;\n        currentWord.measuredHeight = vPosition;\n        hPosition = 0;\n        vPosition = 0;\n        currentWord = new Word();\n        this.words.push(currentWord);\n        continue;\n      }\n\n      // hyphen\n      // mark word as having hyphen\n      // create new word\n      // space character\n      if (this.text.charAt(i) == \"-\") {\n        currentWord.hasHyphen = true;\n      }\n\n      hPosition =\n        char.x +\n        char._glyph.offset * char.size +\n        char.characterCaseOffset +\n        char.trackingOffset() +\n        char._glyph.getKerning(this.text.charCodeAt(i + 1), char.size);\n    }\n    //case of empty word at end.\n    if (currentWord.children.length == 0) {\n      currentWord = this.words[this.words.length - 1];\n      hPosition = currentWord.measuredWidth;\n      vPosition = currentWord.measuredHeight;\n    }\n    currentWord.measuredWidth = hPosition;\n    currentWord.measuredHeight = vPosition;\n\n    return true;\n  }\n\n  //place words in lines\n  wordLayout() {\n    // loop over words\n    // place into lines\n    const len = this.words.length;\n    let currentLine = new Line();\n    this.lines.push(currentLine);\n\n    currentLine.y = 0;\n\n    let currentWord: Word;\n    let lastHeight: number;\n\n    this.block.addChild(currentLine);\n    let hPosition = 0;\n    let vPosition = 0;\n    let firstLine = true;\n\n    let lastLineWord: Word;\n\n    for (let i = 0; i < len; i++) {\n      currentWord = this.words[i];\n      currentWord.x = hPosition;\n\n      if (this.original.word) {\n        applyShapeEventListeners(this.original.word, currentWord);\n      }\n\n      if (firstLine) {\n        vPosition = currentWord.measuredHeight;\n      } else if (this.lineHeight != null) {\n        vPosition = this.lineHeight;\n      } else if (currentWord.measuredHeight > vPosition) {\n        vPosition = currentWord.measuredHeight;\n      }\n\n      //exceeds line width && has new line\n      if (\n        hPosition + currentWord.measuredWidth > this.width &&\n        currentWord.hasNewLine == true &&\n        currentLine.children.length > 0\n      ) {\n        if (this.lineHeight != null) {\n          lastHeight = currentLine.y + this.lineHeight;\n        } else {\n          lastHeight = currentLine.y + vPosition;\n        }\n\n        currentLine.measuredWidth = hPosition;\n        lastLineWord = this.words[i - 1];\n\n        if (lastLineWord != undefined && lastLineWord.hasSpace) {\n          currentLine.measuredWidth -= lastLineWord.spaceOffset;\n        }\n        if (firstLine == false && this.lineHeight != null) {\n          currentLine.measuredHeight = this.lineHeight;\n        } else {\n          currentLine.measuredHeight = vPosition;\n        }\n\n        firstLine = false;\n        currentLine = new Line();\n        this.lines.push(currentLine);\n        currentLine.y = lastHeight;\n        hPosition = 0;\n        currentWord.x = 0;\n        this.block.addChild(currentLine);\n        //add word\n        const swapWord = this.words[i];\n        currentLine.addChild(swapWord);\n        if (this.lineHeight != null) {\n          currentLine.measuredHeight = this.lineHeight;\n        } else {\n          currentLine.measuredHeight = swapWord.measuredHeight;\n        }\n        currentLine.measuredWidth = swapWord.measuredWidth;\n\n        //add new line\n        currentLine = new Line();\n        this.lines.push(currentLine);\n        if (this.lineHeight != null) {\n          currentLine.y = lastHeight + this.lineHeight;\n        } else {\n          currentLine.y = lastHeight + vPosition;\n        }\n        this.block.addChild(currentLine);\n        if (i < len - 1) {\n          vPosition = 0;\n        }\n\n        continue;\n      }\n\n      //wrap word to new line if length\n      else if (\n        hPosition + currentWord.measuredWidth > this.width &&\n        i > 0 &&\n        currentLine.children.length > 0\n      ) {\n        if (this.lineHeight != null) {\n          lastHeight = currentLine.y + this.lineHeight;\n        } else {\n          lastHeight = currentLine.y + vPosition;\n        }\n        currentLine.measuredWidth = hPosition;\n        lastLineWord = this.words[i - 1];\n        if (lastLineWord != undefined && lastLineWord.hasSpace) {\n          currentLine.measuredWidth -= lastLineWord.spaceOffset;\n        }\n        if (firstLine == false && this.lineHeight != null) {\n          currentLine.measuredHeight = this.lineHeight;\n        } else {\n          currentLine.measuredHeight = vPosition;\n        }\n\n        firstLine = false;\n        currentLine = new Line();\n        this.lines.push(currentLine);\n        currentLine.y = lastHeight;\n        if (i < len - 1) {\n          vPosition = 0;\n        }\n        hPosition = 0;\n        currentWord.x = hPosition;\n        this.block.addChild(currentLine);\n      }\n\n      //wrap word to new line if newline\n      else if (currentWord.hasNewLine == true) {\n        if (this.lineHeight != null) {\n          lastHeight = currentLine.y + this.lineHeight;\n        } else {\n          lastHeight = currentLine.y + vPosition;\n        }\n        currentLine.measuredWidth = hPosition + currentWord.measuredWidth;\n        if (firstLine == false && this.lineHeight != null) {\n          currentLine.measuredHeight = this.lineHeight;\n        } else {\n          currentLine.measuredHeight = vPosition;\n        }\n        currentLine.addChild(this.words[i]);\n\n        firstLine = false;\n        currentLine = new Line();\n        this.lines.push(currentLine);\n        currentLine.y = lastHeight;\n        if (i < len - 1) {\n          vPosition = 0;\n        }\n        hPosition = 0;\n\n        this.block.addChild(currentLine);\n\n        continue;\n      }\n\n      hPosition = hPosition + currentWord.measuredWidth;\n      currentLine.addChild(this.words[i]);\n    }\n\n    //case of empty word at end.\n    if (currentLine.children.length == 0) {\n      currentLine = this.lines[this.lines.length - 1];\n    }\n\n    currentLine.measuredWidth = hPosition;\n    currentLine.measuredHeight = vPosition;\n  }\n\n  lineLayout() {\n    // loop over lines\n    // place into text\n    let measuredHeight = 0;\n    let line;\n    const a = Align;\n    const fnt: Font = FontLoader.getFont(this.font);\n\n    const len = this.lines.length;\n    for (let i = 0; i < len; i++) {\n      line = this.lines[i];\n\n      if (this.original.line) {\n        applyShapeEventListeners(this.original.line, line);\n      }\n\n      //correct measuredWidth if last line character contains tracking\n      if (line.lastWord() != undefined && line.lastWord().lastCharacter()) {\n        line.measuredWidth -= line\n          .lastWord()\n          .lastCharacter()\n          .trackingOffset();\n      }\n\n      measuredHeight += line.measuredHeight;\n      if (this.align === a.TOP_CENTER) {\n        //move to center\n        line.x = (this.width - line.measuredWidth) / 2;\n      } else if (this.align === a.TOP_RIGHT) {\n        //move to right\n        line.x = this.width - line.measuredWidth;\n      } else if (this.align === a.MIDDLE_CENTER) {\n        //move to center\n        line.x = (this.width - line.measuredWidth) / 2;\n      } else if (this.align === a.MIDDLE_RIGHT) {\n        //move to right\n        line.x = this.width - line.measuredWidth;\n      } else if (this.align === a.BOTTOM_CENTER) {\n        //move to center\n        line.x = (this.width - line.measuredWidth) / 2;\n      } else if (this.align === a.BOTTOM_RIGHT) {\n        //move to right\n        line.x = this.width - line.measuredWidth;\n      }\n    }\n\n    //TOP ALIGNED\n    if (\n      this.align === a.TOP_LEFT ||\n      this.align === a.TOP_CENTER ||\n      this.align === a.TOP_RIGHT\n    ) {\n      this.block.y =\n        (this.lines[0].measuredHeight * fnt.ascent) / fnt.units +\n        (this.lines[0].measuredHeight * fnt.top) / fnt.units;\n\n      //MIDDLE ALIGNED\n    } else if (\n      this.align === a.MIDDLE_LEFT ||\n      this.align === a.MIDDLE_CENTER ||\n      this.align === a.MIDDLE_RIGHT\n    ) {\n      this.block.y =\n        this.lines[0].measuredHeight +\n        (this.height - measuredHeight) / 2 +\n        (this.lines[0].measuredHeight * fnt.middle) / fnt.units;\n\n      //BOTTOM ALIGNED\n    } else if (\n      this.align === a.BOTTOM_LEFT ||\n      this.align === a.BOTTOM_CENTER ||\n      this.align === a.BOTTOM_RIGHT\n    ) {\n      this.block.y =\n        this.height -\n        this.lines[this.lines.length - 1].y +\n        (this.lines[0].measuredHeight * fnt.bottom) / fnt.units;\n    }\n\n    if (this.original.block) {\n      applyShapeEventListeners(this.original.block, this.block);\n    }\n  }\n}\n","export enum PathFit {\n  Rainbow,\n  Stairstep\n}\n\nexport interface PathPoint {\n  x: number;\n  y: number;\n  rotation?: number;\n  offsetX?: number;\n}\n\nexport enum PathAlign {\n  Center,\n  Right,\n  Left\n}\n\nexport default class Path {\n  private pathElement: SVGPathElement = null;\n  path: string = null;\n  start = 0;\n  center: number = null;\n  end: number = null;\n  angles: any[] = null;\n  flipped = false;\n  fit: PathFit = PathFit.Rainbow;\n  align: PathAlign = PathAlign.Center;\n  length: number = null;\n  realLength: number = null;\n  closed = false;\n  clockwise = true;\n\n  constructor(\n    path: string,\n    start = 0,\n    end: number = null,\n    flipped = false,\n    fit: PathFit = PathFit.Rainbow,\n    align: PathAlign = PathAlign.Center\n  ) {\n    this.path = path;\n    this.start = start;\n    this.align = align;\n    this.end = end;\n    this.flipped = flipped;\n    this.fit = fit;\n    this.update();\n  }\n\n  update() {\n    this.pathElement = document.createElementNS(\n      \"http://www.w3.org/2000/svg\",\n      \"path\"\n    ) as SVGPathElement;\n    this.pathElement.setAttributeNS(null, \"d\", this.path);\n    this.length = this.pathElement.getTotalLength();\n    this.closed = this.path.toLowerCase().indexOf(\"z\") != -1;\n    const pointlength = this.length / 10;\n    const points = [];\n\n    points.push(this.getRealPathPoint(0));\n    points.push(this.getRealPathPoint(pointlength));\n    points.push(this.getRealPathPoint(pointlength * 2));\n    points.push(this.getRealPathPoint(pointlength * 3));\n    points.push(this.getRealPathPoint(pointlength * 4));\n    points.push(this.getRealPathPoint(pointlength * 5));\n    points.push(this.getRealPathPoint(pointlength * 6));\n    points.push(this.getRealPathPoint(pointlength * 7));\n    points.push(this.getRealPathPoint(pointlength * 8));\n    points.push(this.getRealPathPoint(pointlength * 9));\n    points.push(this.getRealPathPoint(pointlength * 10));\n\n    const clock =\n      (points[1].x - points[0].x) * (points[1].y + points[0].y) +\n      (points[2].x - points[1].x) * (points[2].y + points[1].y) +\n      (points[3].x - points[2].x) * (points[3].y + points[2].y) +\n      (points[4].x - points[3].x) * (points[4].y + points[3].y) +\n      (points[5].x - points[4].x) * (points[5].y + points[4].y) +\n      (points[6].x - points[5].x) * (points[6].y + points[5].y) +\n      (points[7].x - points[6].x) * (points[7].y + points[6].y) +\n      (points[8].x - points[7].x) * (points[8].y + points[7].y) +\n      (points[9].x - points[8].x) * (points[9].y + points[8].y) +\n      (points[10].x - points[9].x) * (points[10].y + points[9].y);\n    if (clock > 0) {\n      this.clockwise = false;\n    } else {\n      this.clockwise = true;\n    }\n\n    if (this.end == null) {\n      this.end = this.length;\n    }\n    if (this.closed == false) {\n      if (this.flipped == false) {\n        if (this.start > this.end) {\n          this.realLength = this.start - this.end;\n          this.center = this.start - this.realLength / 2;\n        } else {\n          this.realLength = this.end - this.start;\n          this.center = this.start + this.realLength / 2;\n        }\n      } else {\n        if (this.start > this.end) {\n          this.realLength = this.start - this.end;\n          this.center = this.start - this.realLength / 2;\n        } else {\n          this.realLength = this.end - this.start;\n          this.center = this.start + this.realLength / 2;\n        }\n      }\n    } else if (this.clockwise == false) {\n      if (this.flipped == false) {\n        if (this.start > this.end) {\n          this.realLength = this.start - this.end;\n          this.center = this.end + this.realLength / 2;\n        } else {\n          this.realLength = this.start + this.length - this.end;\n          this.center = this.end + this.realLength / 2;\n          if (this.center > this.length) {\n            this.center = this.center - this.length;\n          }\n        }\n      } else {\n        if (this.start > this.end) {\n          this.realLength = this.end + this.length - this.start;\n          this.center = this.start + this.realLength / 2;\n          if (this.center > this.length) {\n            this.center = this.center - this.length;\n          }\n        } else {\n          this.realLength = this.end - this.start;\n          this.center = this.start + this.realLength / 2;\n        }\n      }\n    } else {\n      if (this.flipped == false) {\n        if (this.start > this.end) {\n          this.realLength = this.end + this.length - this.start;\n          this.center = this.start + this.realLength / 2;\n          if (this.center > this.length) {\n            this.center = this.center - this.length;\n          }\n        } else {\n          this.realLength = this.end - this.start;\n          this.center = this.start + this.realLength / 2;\n        }\n      } else {\n        if (this.start > this.end) {\n          this.realLength = this.start - this.end;\n          this.center = this.end + this.realLength / 2;\n        } else {\n          this.realLength = this.start + this.length - this.end;\n          this.center = this.end + this.realLength / 2;\n          if (this.center > this.length) {\n            this.center = this.center - this.length;\n          }\n        }\n      }\n    }\n  }\n\n  getRealPathPoint(distance: number): PathPoint {\n    if (distance > this.length) {\n      return this.pathElement.getPointAtLength(distance - this.length);\n    } else if (distance < 0) {\n      return this.pathElement.getPointAtLength(distance + this.length);\n    } else {\n      return this.pathElement.getPointAtLength(distance);\n    }\n  }\n\n  getPathPoint(\n    distance: number,\n    characterLength = 0,\n    charOffset = 0\n  ): PathPoint {\n    distance = distance * 0.99;\n    characterLength = characterLength * 0.99;\n\n    let point1: PathPoint;\n    let point2: PathPoint;\n    let position: number;\n    let direction = true;\n    let realStart = 0;\n\n    if (this.closed == false) {\n      if (this.flipped == false) {\n        if (this.start > this.end) {\n          if (this.align == PathAlign.Left) {\n            realStart = this.start;\n          } else if (this.align == PathAlign.Center) {\n            realStart = this.start - (this.realLength - characterLength) / 2;\n          } else if (this.align == PathAlign.Right) {\n            realStart = this.start - this.realLength - characterLength;\n          }\n          position = realStart - distance;\n          direction = false;\n        } else {\n          if (this.align == PathAlign.Left) {\n            realStart = this.start;\n          } else if (this.align == PathAlign.Center) {\n            realStart = this.start + (this.realLength - characterLength) / 2;\n          } else if (this.align == PathAlign.Right) {\n            realStart = this.start + this.realLength - characterLength;\n          }\n          position = realStart + distance;\n        }\n      } else {\n        if (this.start > this.end) {\n          if (this.align == PathAlign.Left) {\n            realStart = this.start;\n          } else if (this.align == PathAlign.Center) {\n            realStart = this.start - (this.realLength - characterLength) / 2;\n          } else if (this.align == PathAlign.Right) {\n            realStart = this.start - this.realLength - characterLength;\n          }\n          position = realStart - distance;\n          direction = false;\n        } else {\n          if (this.align == PathAlign.Left) {\n            realStart = this.start;\n          } else if (this.align == PathAlign.Center) {\n            realStart = this.start + (this.realLength - characterLength) / 2;\n          } else if (this.align == PathAlign.Right) {\n            realStart = this.start + this.realLength - characterLength;\n          }\n          position = realStart - distance;\n        }\n      }\n    } else if (this.clockwise == false) {\n      if (this.flipped == false) {\n        if (this.start > this.end) {\n          if (this.align == PathAlign.Left) {\n            realStart = this.start;\n          } else if (this.align == PathAlign.Center) {\n            realStart = this.start - (this.realLength - characterLength) / 2;\n          } else if (this.align == PathAlign.Right) {\n            realStart = this.start - this.realLength - characterLength;\n          }\n\n          position = realStart - distance;\n          direction = false;\n        } else {\n          if (this.align == PathAlign.Left) {\n            realStart = this.start;\n            position = realStart - distance;\n          } else if (this.align == PathAlign.Center) {\n            realStart = this.start - (this.realLength - characterLength) / 2;\n            position = realStart - distance;\n          } else if (this.align == PathAlign.Right) {\n            realStart = this.start - this.realLength - characterLength;\n            position = realStart - distance;\n          }\n\n          if (position < 0) {\n            position = position + this.length;\n          }\n          direction = false;\n        }\n      } else {\n        if (this.start > this.end) {\n          if (this.align == PathAlign.Left) {\n            realStart = this.start;\n            position = realStart + distance;\n          } else if (this.align == PathAlign.Center) {\n            realStart = this.start + (this.realLength - characterLength) / 2;\n            position = realStart + distance;\n          } else if (this.align == PathAlign.Right) {\n            realStart = this.start + this.realLength - characterLength;\n            position = realStart + distance;\n          }\n\n          if (position > this.length) {\n            position = position - this.length;\n          }\n        } else {\n          if (this.align == PathAlign.Left) {\n            realStart = this.start;\n          } else if (this.align == PathAlign.Center) {\n            realStart = this.start + (this.realLength - characterLength) / 2;\n          } else if (this.align == PathAlign.Right) {\n            realStart = this.start + this.realLength - characterLength;\n          }\n          position = realStart + distance;\n        }\n      }\n    } else {\n      if (this.flipped == false) {\n        if (this.start > this.end) {\n          if (this.align == PathAlign.Left) {\n            realStart = this.start;\n            position = realStart - distance;\n          } else if (this.align == PathAlign.Center) {\n            realStart = this.start - (this.realLength - characterLength) / 2;\n            position = realStart - distance;\n          } else if (this.align == PathAlign.Right) {\n            realStart = this.start - this.realLength - characterLength;\n            position = realStart - distance;\n          }\n\n          if (position < 0) {\n            position = position + this.length;\n          }\n          direction = false;\n        } else {\n          if (this.align == PathAlign.Left) {\n            realStart = this.start;\n          } else if (this.align == PathAlign.Center) {\n            realStart = this.start - (this.realLength - characterLength) / 2;\n          } else if (this.align == PathAlign.Right) {\n            realStart = this.start - this.realLength - characterLength;\n          }\n          position = realStart - distance;\n          direction = false;\n        }\n      } else {\n        if (this.start > this.end) {\n          if (this.align == PathAlign.Left) {\n            realStart = this.start;\n          } else if (this.align == PathAlign.Center) {\n            realStart = this.start + (this.realLength - characterLength) / 2;\n          } else if (this.align == PathAlign.Right) {\n            realStart = this.start + this.realLength - characterLength;\n          }\n          position = realStart + distance;\n        } else {\n          if (this.align == PathAlign.Left) {\n            realStart = this.start;\n            position = realStart + distance;\n          } else if (this.align == PathAlign.Center) {\n            realStart = this.start + (this.realLength - characterLength) / 2;\n            position = realStart + distance;\n          } else if (this.align == PathAlign.Right) {\n            realStart = this.start + this.realLength - characterLength;\n            position = realStart + distance;\n          }\n\n          if (position > this.length) {\n            position = position - this.length;\n          }\n        }\n      }\n    }\n\n    point1 = this.getRealPathPoint(position);\n    const segment = this.pathElement.pathSegList.getItem(\n      this.pathElement.getPathSegAtLength(position)\n    ).pathSegType;\n\n    if (\n      segment == 4 &&\n      !direction &&\n      this.pathElement.getPathSegAtLength(position) !=\n        this.pathElement.getPathSegAtLength(position - charOffset)\n    ) {\n      const pp0 = this.getRealPathPoint(position);\n      const pp1 = this.getRealPathPoint(position - charOffset);\n      const ppc = this.pathElement.pathSegList.getItem(\n        this.pathElement.getPathSegAtLength(position) - 1\n      );\n      const d0 = Math.sqrt(\n        Math.pow(pp0.x - ppc[\"x\"], 2) + Math.pow(pp0.y - ppc[\"y\"], 2)\n      );\n\n      const d1 = Math.sqrt(\n        Math.pow(pp1.x - ppc[\"x\"], 2) + Math.pow(pp1.y - ppc[\"y\"], 2)\n      );\n\n      if (d0 > d1) {\n        point1 = pp0;\n        point2 = { x: ppc[\"x\"], y: ppc[\"y\"] };\n\n        let rot12 =\n          (Math.atan((point2.y - point1.y) / (point2.x - point1.x)) * 180) /\n          Math.PI;\n        if (point1.x > point2.x) {\n          rot12 = rot12 + 180;\n        }\n\n        if (rot12 < 0) {\n          rot12 = rot12 + 360;\n        }\n        if (rot12 > 360) {\n          rot12 = rot12 - 360;\n        }\n\n        point1.rotation = rot12;\n        return point1;\n      } else {\n        point1 = { x: ppc[\"x\"], y: ppc[\"y\"] };\n        point1.offsetX = -d0;\n        point1[\"next\"] = true;\n        return point1;\n      }\n    }\n\n    if (direction) {\n      point2 = this.getRealPathPoint(position + charOffset);\n    } else {\n      point2 = this.getRealPathPoint(position - charOffset);\n    }\n\n    let rot12 =\n      (Math.atan((point2.y - point1.y) / (point2.x - point1.x)) * 180) /\n      Math.PI;\n\n    if (point1.x > point2.x) {\n      rot12 = rot12 + 180;\n    }\n\n    if (rot12 < 0) {\n      rot12 = rot12 + 360;\n    }\n    if (rot12 > 360) {\n      rot12 = rot12 - 360;\n    }\n\n    point1.rotation = rot12;\n    return point1;\n  }\n}\n","enum VerticalAlign {\n  Top,\n  CapHeight,\n  Center,\n  BaseLine,\n  Bottom,\n  XHeight,\n  Ascent,\n  Percent\n}\n\nexport default VerticalAlign;\n","import TextContainer from \"./TextContainer\";\nimport { ConstructObj } from \"./Interfaces\";\nimport Path, { PathFit, PathAlign } from \"./Path\";\nimport VerticalAlign from \"./VerticalAlign\";\nimport FontLoader from \"./FontLoader\";\nimport Character from \"./Character\";\nimport Font from \"./Font\";\nimport applyShapeEventListeners from \"./utils/apply-shape-event-listeners\";\n\nexport default class PathText extends TextContainer {\n  size = 12;\n  tracking = 0;\n  ligatures = false;\n  minSize: number = null;\n  maxTracking: number = null;\n  fillColor = \"#000\";\n  strokeColor: string = null;\n  strokeWidth: number = null;\n  debug = false;\n  characters: Character[];\n  block: createjs.Container;\n  original: ConstructObj = null;\n  autoExpand = false;\n  autoReduce = false;\n  overset = false;\n  oversetIndex: number = null;\n  pathPoints: Path = null;\n  path = \"\";\n  start = 0;\n  end: number = null;\n  flipped = false;\n  fit: PathFit = PathFit.Rainbow;\n  align: PathAlign = PathAlign.Center;\n  valign: VerticalAlign = VerticalAlign.BaseLine;\n  missingGlyphs: any[] = null;\n  renderCycle = true;\n  valignPercent = 1;\n  initialTracking = 0;\n  initialOffset = 0;\n  measured = false;\n  oversetPotential = false;\n\n  constructor(props: ConstructObj = null) {\n    super();\n\n    if (props) {\n      this.original = props;\n      this.set(props);\n      this.original.tracking = this.tracking;\n    }\n    this.loadFonts();\n    this.pathPoints = new Path(\n      this.path,\n      this.start,\n      this.end,\n      this.flipped,\n      this.fit,\n      this.align\n    );\n  }\n\n  setPath(path: string) {\n    this.path = path;\n    this.pathPoints.path = this.path;\n    this.pathPoints.update();\n  }\n\n  setStart(start: number) {\n    this.start = start;\n    this.pathPoints.start = this.start;\n    this.pathPoints.update();\n  }\n\n  setEnd(end: number) {\n    this.end = end;\n    this.pathPoints.end = this.end;\n    this.pathPoints.update();\n  }\n\n  setFlipped(flipped: boolean) {\n    this.flipped = flipped;\n    this.pathPoints.flipped = this.flipped;\n    this.pathPoints.update();\n  }\n\n  setFit(fit: PathFit = PathFit.Rainbow) {\n    this.fit = fit;\n    this.pathPoints.fit = this.fit;\n    this.pathPoints.update();\n  }\n\n  setAlign(align: PathAlign = PathAlign.Center) {\n    this.align = align;\n    this.pathPoints.align = this.align;\n    this.pathPoints.update();\n  }\n\n  getWidth(): number {\n    return this.pathPoints.realLength;\n  }\n\n  layout() {\n    this.addAccessibility();\n    this.overset = false;\n    this.oversetIndex = null;\n    this.removeAllChildren();\n    this.characters = [];\n    this.missingGlyphs = null;\n    this.measured = false;\n    this.oversetPotential = false;\n    if (this.debug == true) {\n      this.addDebugLayout();\n    }\n\n    if (this.text === \"\" || this.text === undefined) {\n      this.render();\n      return;\n    }\n\n    this.block = new createjs.Container();\n    this.addChild(this.block);\n\n    if (this.autoExpand === true || this.autoReduce === true) {\n      if (this.measure() === false) {\n        this.removeAllChildren();\n        return;\n      }\n    }\n\n    if (this.renderCycle === false) {\n      this.removeAllChildren();\n      this.complete();\n      return;\n    }\n\n    if (this.characterLayout() === false) {\n      this.removeAllChildren();\n      return;\n    }\n    this.render();\n    this.complete();\n  }\n\n  private addDebugLayout() {\n    let s = new createjs.Shape();\n    s.graphics.beginStroke(\"#FF0000\");\n    s.graphics.setStrokeStyle(0.1);\n    s.graphics.decodeSVGPath(this.path);\n    s.graphics.endFill();\n    s.graphics.endStroke();\n    this.addChild(s);\n    s = new createjs.Shape();\n    let pp = this.pathPoints.getRealPathPoint(0);\n    s.x = pp.x;\n    s.y = pp.y;\n    s.graphics.beginFill(\"black\");\n    s.graphics.drawCircle(0, 0, 2);\n    this.addChild(s);\n    s = new createjs.Shape();\n    pp = this.pathPoints.getRealPathPoint(this.pathPoints.start);\n    s.x = pp.x;\n    s.y = pp.y;\n    s.graphics.beginFill(\"green\");\n    s.graphics.drawCircle(0, 0, 2);\n    this.addChild(s);\n    s = new createjs.Shape();\n    pp = this.pathPoints.getRealPathPoint(this.pathPoints.end);\n    s.x = pp.x;\n    s.y = pp.y;\n    s.graphics.beginFill(\"red\");\n    s.graphics.drawCircle(0, 0, 2);\n    this.addChild(s);\n    s = new createjs.Shape();\n    pp = this.pathPoints.getRealPathPoint(this.pathPoints.center);\n    s.x = pp.x;\n    s.y = pp.y;\n    s.graphics.beginFill(\"blue\");\n    s.graphics.drawCircle(0, 0, 2);\n    this.addChild(s);\n  }\n\n  measure(): boolean {\n    this.measured = true;\n    //Extract orgin sizing from this.original to preserve\n    //metrics. autoMeasure will change style properties\n    //directly. Change this.original to rerender.\n\n    let len = this.text.length;\n    const width = this.getWidth();\n    const defaultStyle = {\n      size: this.original.size,\n      font: this.original.font,\n      tracking: this.original.tracking,\n      characterCase: this.original.characterCase\n    };\n    let currentStyle: any;\n    let charCode: number = null;\n    let font: Font;\n    const charMetrics = [];\n    let largestFontSize = defaultStyle.size;\n    for (let i = 0; i < len; i++) {\n      charCode = this.text.charCodeAt(i);\n\n      currentStyle = defaultStyle;\n      if (\n        this.original.style !== undefined &&\n        this.original.style[i] !== undefined\n      ) {\n        currentStyle = this.original.style[i];\n        // make sure style contains properties needed.\n        if (currentStyle.size === undefined)\n          currentStyle.size = defaultStyle.size;\n        if (currentStyle.font === undefined)\n          currentStyle.font = defaultStyle.font;\n        if (currentStyle.tracking === undefined)\n          currentStyle.tracking = defaultStyle.tracking;\n      }\n      if (currentStyle.size > largestFontSize) {\n        largestFontSize = currentStyle.size;\n      }\n      font = FontLoader.fonts[currentStyle.font];\n      charMetrics.push({\n        char: this.text[i],\n        size: currentStyle.size,\n        charCode: charCode,\n        font: currentStyle.font,\n        offset: font.glyphs[charCode].offset,\n        units: font.units,\n        tracking: this.trackingOffset(\n          currentStyle.tracking,\n          currentStyle.size,\n          font.units\n        ),\n        kerning: font.glyphs[charCode].getKerning(this.getCharCodeAt(i + 1), 1)\n      });\n    }\n\n    //save space char using last known width/height\n    const space: any = {\n      char: \" \",\n      size: currentStyle.size,\n      charCode: 32,\n      font: currentStyle.font,\n      offset: font.glyphs[32].offset,\n      units: font.units,\n      tracking: 0,\n      kerning: 0\n    };\n\n    charMetrics[charMetrics.length - 1].tracking = 0;\n    //charMetrics[ charMetrics.length-1 ].kerning=0;\n\n    len = charMetrics.length;\n\n    //measured without size\n    let metricBaseWidth = 0;\n    //measured at size\n    let metricRealWidth = 0;\n    //measured at size with tracking\n    let metricRealWidthTracking = 0;\n\n    let current = null;\n    for (let i = 0; i < len; i++) {\n      current = charMetrics[i];\n      metricBaseWidth = metricBaseWidth + current.offset + current.kerning;\n      metricRealWidth =\n        metricRealWidth + (current.offset + current.kerning) * current.size;\n      metricRealWidthTracking =\n        metricRealWidthTracking +\n        (current.offset + current.kerning + current.tracking) * current.size;\n    }\n\n    //size cases\n    if (metricRealWidth > width) {\n      if (this.autoReduce === true) {\n        this.tracking = 0;\n        this.size =\n          (this.original.size * width) /\n          (metricRealWidth + space.offset * space.size);\n        if (this.minSize != null && this.size < this.minSize) {\n          this.size = this.minSize;\n          if (this.renderCycle === false) {\n            this.overset = true;\n          } else {\n            this.oversetPotential = true;\n          }\n        }\n        return true;\n      }\n      //tracking cases\n    } else {\n      let trackMetric = this.offsetTracking(\n        (width - metricRealWidth) / len,\n        current.size,\n        current.units\n      );\n      if (trackMetric < 0) {\n        trackMetric = 0;\n      }\n      //autoexpand case\n      if (trackMetric > this.original.tracking && this.autoExpand) {\n        if (this.maxTracking != null && trackMetric > this.maxTracking) {\n          this.tracking = this.maxTracking;\n        } else {\n          this.tracking = trackMetric;\n        }\n        this.size = this.original.size;\n        return true;\n      }\n      //autoreduce tracking case\n      if (trackMetric < this.original.tracking && this.autoReduce) {\n        if (this.maxTracking != null && trackMetric > this.maxTracking) {\n          this.tracking = this.maxTracking;\n        } else {\n          this.tracking = trackMetric;\n        }\n        this.size = this.original.size;\n        return true;\n      }\n    }\n    return true;\n  }\n\n  //place characters in words\n  characterLayout(): boolean {\n    //char layout\n    let len = this.text.length;\n    let char: Character;\n    const defaultStyle = {\n      size: this.size,\n      font: this.font,\n      tracking: this.tracking,\n      characterCase: this.characterCase,\n      fillColor: this.fillColor,\n      strokeColor: this.strokeColor,\n      strokeWidth: this.strokeWidth\n    };\n    let currentStyle = defaultStyle;\n    let hPosition = 0;\n\n    // loop over characters\n    // place into lines\n    for (let i = 0; i < len; i++) {\n      if (this.style !== null && this.style[i] !== undefined) {\n        currentStyle = this.style[i];\n        // make sure style contains properties needed.\n        if (currentStyle.size === undefined)\n          currentStyle.size = defaultStyle.size;\n        if (currentStyle.font === undefined)\n          currentStyle.font = defaultStyle.font;\n        if (currentStyle.tracking === undefined)\n          currentStyle.tracking = defaultStyle.tracking;\n        if (currentStyle.characterCase === undefined)\n          currentStyle.characterCase = defaultStyle.characterCase;\n        if (currentStyle.fillColor === undefined)\n          currentStyle.fillColor = defaultStyle.fillColor;\n        if (currentStyle.strokeColor === undefined)\n          currentStyle.strokeColor = defaultStyle.strokeColor;\n        if (currentStyle.strokeWidth === undefined)\n          currentStyle.strokeWidth = defaultStyle.strokeWidth;\n      }\n\n      // newline\n      if (this.text.charAt(i) == \"\\n\") {\n        continue;\n      }\n\n      //runtime test for font\n      if (FontLoader.isLoaded(currentStyle.font) === false) {\n        FontLoader.load(this, [currentStyle.font]);\n        return false;\n      }\n\n      //initalize with initialTracking and initialOffset;\n      if (hPosition == 0) {\n        hPosition =\n          this.initialOffset +\n          this.trackingOffset(\n            this.initialTracking,\n            currentStyle.size,\n            FontLoader.getFont(currentStyle.font).units\n          );\n      }\n\n      // create character\n      char = new Character(this.text.charAt(i), currentStyle, i);\n      if (this.original.character) {\n        applyShapeEventListeners(this.original.character, char);\n      }\n\n      if (char.missing) {\n        if (this.missingGlyphs == null) {\n          this.missingGlyphs = [];\n        }\n        this.missingGlyphs.push({\n          position: i,\n          character: this.text.charAt(i),\n          font: currentStyle.font\n        });\n      }\n\n      //swap character if ligature\n      //ligatures removed if tracking or this.ligatures is false\n      if (currentStyle.tracking == 0 && this.ligatures == true) {\n        //1 char match\n        const ligTarget = this.text.substr(i, 4);\n        if (char._font.ligatures[ligTarget.charAt(0)]) {\n          //2 char match\n          if (char._font.ligatures[ligTarget.charAt(0)][ligTarget.charAt(1)]) {\n            //3 char match\n            if (\n              char._font.ligatures[ligTarget.charAt(0)][ligTarget.charAt(1)][\n                ligTarget.charAt(2)\n              ]\n            ) {\n              //4 char match\n              if (\n                char._font.ligatures[ligTarget.charAt(0)][ligTarget.charAt(1)][\n                  ligTarget.charAt(2)\n                ][ligTarget.charAt(3)]\n              ) {\n                //swap 4 char ligature\n                char.setGlyph(\n                  char._font.ligatures[ligTarget.charAt(0)][\n                    ligTarget.charAt(1)\n                  ][ligTarget.charAt(2)][ligTarget.charAt(3)].glyph\n                );\n                i = i + 3;\n              } else {\n                //swap 3 char ligature\n                char.setGlyph(\n                  char._font.ligatures[ligTarget.charAt(0)][\n                    ligTarget.charAt(1)\n                  ][ligTarget.charAt(2)].glyph\n                );\n                i = i + 2;\n              }\n            } else {\n              //swap 2 char ligature\n              char.setGlyph(\n                char._font.ligatures[ligTarget.charAt(0)][ligTarget.charAt(1)]\n                  .glyph\n              );\n              i = i + 1;\n            }\n          }\n        }\n      }\n\n      //char.hPosition = hPosition;\n\n      // push character into block\n      //this.characters.push( char );\n      //this.block.addChild( char );\n\n      if (this.overset == true) {\n        break;\n      } else if (\n        this.measured == true &&\n        hPosition + char.measuredWidth > this.getWidth() &&\n        this.oversetPotential == true\n      ) {\n        //char.hPosition = hPosition;\n        //this.characters.push( char );\n        //this.block.addChild( char );\n\n        //this.block.removeChild(this.characters.pop() );\n        this.oversetIndex = i;\n        this.overset = true;\n        break;\n      } else if (\n        this.measured == false &&\n        hPosition + char.measuredWidth > this.getWidth()\n      ) {\n        //char.hPosition = hPosition;\n        //this.characters.push( char );\n        //this.block.addChild( char );\n\n        //this.block.removeChild(this.characters.pop() );\n        this.oversetIndex = i;\n        this.overset = true;\n        break;\n      } else {\n        char.hPosition = hPosition;\n        this.characters.push(char);\n        this.block.addChild(char);\n      }\n\n      //char.x = hPosition;\n      hPosition =\n        hPosition +\n        char._glyph.offset * char.size +\n        char.characterCaseOffset +\n        char.trackingOffset() +\n        char._glyph.getKerning(this.getCharCodeAt(i + 1), char.size);\n    }\n\n    len = this.characters.length;\n    let pathPoint: any;\n    let nextRotation = false;\n    for (let i = 0; i < len; i++) {\n      char = this.characters[i] as Character;\n      pathPoint = this.pathPoints.getPathPoint(\n        char.hPosition,\n        hPosition,\n        char._glyph.offset * char.size\n      );\n      //correct rotation around linesegments\n      if (nextRotation == true) {\n        this.characters[i - 1].parent.rotation = pathPoint.rotation;\n        nextRotation = false;\n      }\n      if (pathPoint.next == true) {\n        nextRotation = true;\n      }\n\n      char.rotation = pathPoint.rotation;\n\n      //Baseline\n      if (this.valign == VerticalAlign.BaseLine) {\n        char.x = pathPoint.x;\n        char.y = pathPoint.y;\n\n        //reparent child into offset container\n        if (pathPoint.offsetX) {\n          const offsetChild = new createjs.Container();\n          offsetChild.x = pathPoint.x;\n          offsetChild.y = pathPoint.y;\n          offsetChild.rotation = pathPoint.rotation;\n          char.parent.removeChild(char);\n          offsetChild.addChild(char);\n          char.x = pathPoint.offsetX;\n          char.y = 0;\n          char.rotation = 0;\n          this.addChild(offsetChild);\n        } else {\n          char.x = pathPoint.x;\n          char.y = pathPoint.y;\n          char.rotation = pathPoint.rotation;\n        }\n      } else {\n        const offsetChild = new createjs.Container();\n        offsetChild.x = pathPoint.x;\n        offsetChild.y = pathPoint.y;\n        offsetChild.rotation = pathPoint.rotation;\n        char.parent.removeChild(char);\n        offsetChild.addChild(char);\n        char.x = 0;\n\n        //vertical alignment\n        if (this.valign == VerticalAlign.Top) {\n          char.y = char.size;\n        } else if (this.valign == VerticalAlign.Bottom) {\n          char.y = (char._font.descent / char._font.units) * char.size;\n        } else if (this.valign == VerticalAlign.CapHeight) {\n          char.y = (char._font[\"cap-height\"] / char._font.units) * char.size;\n        } else if (this.valign == VerticalAlign.XHeight) {\n          char.y = (char._font[\"x-height\"] / char._font.units) * char.size;\n        } else if (this.valign == VerticalAlign.Ascent) {\n          char.y = (char._font.ascent / char._font.units) * char.size;\n        } else if (this.valign == VerticalAlign.Center) {\n          char.y =\n            ((char._font[\"cap-height\"] / char._font.units) * char.size) / 2;\n        } else if (this.valign == VerticalAlign.Percent) {\n          char.y = this.valignPercent * char.size;\n        } else {\n          char.y = 0;\n        }\n        char.rotation = 0;\n        this.addChild(offsetChild);\n      }\n    }\n\n    if (this.original.block) {\n      applyShapeEventListeners(this.original.block, this.block);\n    }\n\n    return true;\n  }\n\n  trackingOffset(tracking: number, size: number, units: number): number {\n    return size * (2.5 / units + 1 / 900 + tracking / 990);\n  }\n\n  offsetTracking(offset: number, size: number, units: number): number {\n    return Math.floor(((offset - 2.5 / units - 1 / 900) * 990) / size);\n  }\n}\n","import \"./GraphicsMixin\";\n\nexport { default as Accessibility } from \"./Accessibility\";\nexport { default as Align } from \"./Align\";\nexport { default as Case } from \"./Case\";\nexport { default as Character } from \"./Character\";\nexport { default as CharacterText } from \"./CharacterText\";\nexport { default as Font } from \"./Font\";\nexport { default as FontLoader } from \"./FontLoader\";\nexport { default as Glyph } from \"./Glyph\";\nexport { default as Graphics } from \"./Graphics\";\nexport { default as Info } from \"./Info\";\nexport { default as Line } from \"./Line\";\nexport { default as Text } from \"./Text\";\nexport { default as Path, PathAlign, PathFit } from \"./Path\";\nexport { default as PathText } from \"./PathText\";\nexport { default as VerticalAlign } from \"./VerticalAlign\";\nexport { default as Word } from \"./Word\";\n\nimport copyEventListeners from \"./utils/apply-shape-event-listeners\";\n\nexport const Util = {\n  copyEventListeners\n};\n"],"names":["SVGArc","v","Math","sqrt","pow","u","dot","mag","angle","cost","cos","sint","sin","c","sign","acos","ratio","x1","rx","ry","phiarg","fA","fS","x2","phi","PI","abs","xPrime","rotClockwise","midPoint","xPrime2","pointMul","rx2","ry2","lambda","t","b","factor","cPrime","scale","sum","rotCounterClockwise","meanVec","x1UnitVector","x2UnitVector","theta","deltaTheta","isNaN","start","end","cx","cy","ctx","lineTo","translate","rotate","arc","parsePathData","data","cs","cc","replace","RegExp","n","length","arr","split","ca","cpx","cpy","arrLength","startPoint","str","charAt","slice","p","shift","pLength","i","parseFloat","cmd","points","startX","startY","prevCmd","ctlPtx","ctlPty","psi","fa","fs","y1","dx","dy","push","command","x","y","Graphics","target","svgpath","G","createjs","append","LineTo","MoveTo","BezierCurveTo","QuadraticCurveTo","ClosePath","applyMixins","derivedCtor","baseCtors","forEach","baseCtor","Object","getOwnPropertyNames","prototype","name","defineProperty","getOwnPropertyDescriptor","GraphicsMixin","init","Accessibility","element","stage","timeout","clearTimeout","accessibilityId","setTimeout","update","sort","a","accessibilityPriority","len","out","currentCanvas","canvas","innerHTML","accessibilityText","text","Align","Case","Font","from","glyphs","undefined","kerning","Glyph","_graphic","_stroke","Stroke","_strokeStyle","StrokeStyle","_fill","Fill","decodeSVGPath","path","draw","characterCode","size","FontLoader","fonts","hasOwnProperty","loaded","loader","loaderId","loaders","_id","_target","fontCount","prop","loadFont","id","isLoaded","window","fontLoaded","fontName","check","targets","font","req","XMLHttpRequest","localStorage","cache","local","JSON","parse","getItem","join","version","cacheResponseText","cacheFont","onload","setItem","stringify","responseText","lines","line","glyph","lineLen","parseInt","offset","units","j","pathLength","ligatures","k","cloneGlyph","top","middle","bottom","lLen","l","open","send","Character","character","style","index","set","upperSmall","characterCase","NORMAL","UPPER","toUpperCase","LOWER","toLowerCase","SMALL_CAPS","charCodeAt","_font","getFont","_glyph","String","fromCharCode","console","log","missing","graphics","graphic","scaleX","characterCaseOffset","scaleY","measuredHeight","ascent","descent","measuredWidth","ha","Shape","beginFill","drawRect","hitArea","tracking","fillColor","matrix","strokeColor","width","strokeWidth","TextContainer","concat","fontsFromCharacterStyles","load","layout","styles","styleFonts","Container","Line","children","EventNames","original","shape","eventName","on","CharacterText","props","TOP_LEFT","loadFonts","addAccessibility","overset","measured","oversetPotential","singleLine","missingGlyphs","removeAllChildren","render","complete","block","addChild","debug","addDebugLayout","autoExpand","autoReduce","measure","renderCycle","characterLayout","lineLayout","s","beginStroke","setStrokeStyle","height","defaultStyle","currentStyle","charCode","charMetrics","largestFontSize","trackingOffset","getKerning","getCharCodeAt","space","metricBaseWidth","metricRealWidth","metricRealWidthTracking","current","minSize","trackMetric","offsetTracking","maxTracking","floor","char","hPosition","vPosition","lineY","firstLine","currentLine","lineHeight","applyShapeEventListeners","position","ligTarget","substr","setGlyph","lastchar","oversetIndex","fnt","lastCharacter","align","TOP_CENTER","TOP_RIGHT","MIDDLE_CENTER","MIDDLE_RIGHT","BOTTOM_CENTER","BOTTOM_RIGHT","MIDDLE_LEFT","BOTTOM_LEFT","Info","Word","Text","Rectangle","words","wordLayout","currentWord","hasNewLine","hasSpace","spaceOffset","hasHyphen","lastHeight","lastLineWord","word","swapWord","lastWord","PathFit","PathAlign","Path","flipped","fit","Rainbow","Center","pathElement","document","createElementNS","setAttributeNS","getTotalLength","closed","indexOf","pointlength","getRealPathPoint","clock","clockwise","realLength","center","distance","getPointAtLength","characterLength","charOffset","point1","point2","direction","realStart","Left","Right","segment","pathSegList","getPathSegAtLength","pathSegType","pp0","pp1","ppc","d0","d1","rot12","atan","rotation","offsetX","VerticalAlign","PathText","BaseLine","pathPoints","characters","endFill","endStroke","pp","drawCircle","getWidth","initialOffset","initialTracking","pathPoint","nextRotation","getPathPoint","parent","next","valign","offsetChild","removeChild","Top","Bottom","CapHeight","XHeight","Ascent","Percent","valignPercent","Util","copyEventListeners"],"mappings":"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"}